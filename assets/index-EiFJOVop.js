function yk(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function vk(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var $w={exports:{}},Ac={},Dw={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uo=Symbol.for("react.element"),wk=Symbol.for("react.portal"),_k=Symbol.for("react.fragment"),bk=Symbol.for("react.strict_mode"),xk=Symbol.for("react.profiler"),Sk=Symbol.for("react.provider"),Ek=Symbol.for("react.context"),kk=Symbol.for("react.forward_ref"),Tk=Symbol.for("react.suspense"),Ck=Symbol.for("react.memo"),Ik=Symbol.for("react.lazy"),sg=Symbol.iterator;function Pk(t){return t===null||typeof t!="object"?null:(t=sg&&t[sg]||t["@@iterator"],typeof t=="function"?t:null)}var Lw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fw=Object.assign,Mw={};function $i(t,e,r){this.props=t,this.context=e,this.refs=Mw,this.updater=r||Lw}$i.prototype.isReactComponent={};$i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Uw(){}Uw.prototype=$i.prototype;function Nh(t,e,r){this.props=t,this.context=e,this.refs=Mw,this.updater=r||Lw}var Oh=Nh.prototype=new Uw;Oh.constructor=Nh;Fw(Oh,$i.prototype);Oh.isPureReactComponent=!0;var ig=Array.isArray,Bw=Object.prototype.hasOwnProperty,Rh={current:null},zw={key:!0,ref:!0,__self:!0,__source:!0};function Vw(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Bw.call(e,n)&&!zw.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:uo,type:t,key:i,ref:a,props:s,_owner:Rh.current}}function Ak(t,e){return{$$typeof:uo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $h(t){return typeof t=="object"&&t!==null&&t.$$typeof===uo}function jk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ag=/\/+/g;function Uu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jk(""+t.key):e.toString(36)}function pl(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case uo:case wk:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Uu(a,0):n,ig(s)?(r="",t!=null&&(r=t.replace(ag,"$&/")+"/"),pl(s,e,r,"",function(c){return c})):s!=null&&($h(s)&&(s=Ak(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(ag,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",ig(t))for(var o=0;o<t.length;o++){i=t[o];var l=n+Uu(i,o);a+=pl(i,e,r,l,s)}else if(l=Pk(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=n+Uu(i,o++),a+=pl(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ro(t,e,r){if(t==null)return t;var n=[],s=0;return pl(t,n,"","",function(i){return e.call(r,i,s++)}),n}function Nk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ye={current:null},ml={transition:null},Ok={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:ml,ReactCurrentOwner:Rh};function Ww(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Ro,forEach:function(t,e,r){Ro(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ro(t,function(){e++}),e},toArray:function(t){return Ro(t,function(e){return e})||[]},only:function(t){if(!$h(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=$i;Q.Fragment=_k;Q.Profiler=xk;Q.PureComponent=Nh;Q.StrictMode=bk;Q.Suspense=Tk;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ok;Q.act=Ww;Q.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Fw({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Rh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Bw.call(e,l)&&!zw.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:uo,type:t.type,key:s,ref:i,props:n,_owner:a}};Q.createContext=function(t){return t={$$typeof:Ek,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Sk,_context:t},t.Consumer=t};Q.createElement=Vw;Q.createFactory=function(t){var e=Vw.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:kk,render:t}};Q.isValidElement=$h;Q.lazy=function(t){return{$$typeof:Ik,_payload:{_status:-1,_result:t},_init:Nk}};Q.memo=function(t,e){return{$$typeof:Ck,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=ml.transition;ml.transition={};try{t()}finally{ml.transition=e}};Q.unstable_act=Ww;Q.useCallback=function(t,e){return Ye.current.useCallback(t,e)};Q.useContext=function(t){return Ye.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return Ye.current.useDeferredValue(t)};Q.useEffect=function(t,e){return Ye.current.useEffect(t,e)};Q.useId=function(){return Ye.current.useId()};Q.useImperativeHandle=function(t,e,r){return Ye.current.useImperativeHandle(t,e,r)};Q.useInsertionEffect=function(t,e){return Ye.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return Ye.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return Ye.current.useMemo(t,e)};Q.useReducer=function(t,e,r){return Ye.current.useReducer(t,e,r)};Q.useRef=function(t){return Ye.current.useRef(t)};Q.useState=function(t){return Ye.current.useState(t)};Q.useSyncExternalStore=function(t,e,r){return Ye.current.useSyncExternalStore(t,e,r)};Q.useTransition=function(){return Ye.current.useTransition()};Q.version="18.3.1";Dw.exports=Q;var b=Dw.exports;const fr=Pc(b),Rk=yk({__proto__:null,default:fr},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $k=b,Dk=Symbol.for("react.element"),Lk=Symbol.for("react.fragment"),Fk=Object.prototype.hasOwnProperty,Mk=$k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uk={key:!0,ref:!0,__self:!0,__source:!0};function Hw(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)Fk.call(e,n)&&!Uk.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:Dk,type:t,key:i,ref:a,props:s,_owner:Mk.current}}Ac.Fragment=Lk;Ac.jsx=Hw;Ac.jsxs=Hw;$w.exports=Ac;var u=$w.exports,Kd={},qw={exports:{}},xt={},Kw={exports:{}},Gw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,$){var F=P.length;P.push($);e:for(;0<F;){var G=F-1>>>1,ue=P[G];if(0<s(ue,$))P[G]=$,P[F]=ue,F=G;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var $=P[0],F=P.pop();if(F!==$){P[0]=F;e:for(var G=0,ue=P.length,Jn=ue>>>1;G<Jn;){var Ft=2*(G+1)-1,er=P[Ft],tr=Ft+1,Qr=P[tr];if(0>s(er,F))tr<ue&&0>s(Qr,er)?(P[G]=Qr,P[tr]=F,G=tr):(P[G]=er,P[Ft]=F,G=Ft);else if(tr<ue&&0>s(Qr,F))P[G]=Qr,P[tr]=F,G=tr;else break e}}return $}function s(P,$){var F=P.sortIndex-$.sortIndex;return F!==0?F:P.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,f=null,h=3,g=!1,y=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var $=r(c);$!==null;){if($.callback===null)n(c);else if($.startTime<=P)n(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=r(c)}}function S(P){if(w=!1,v(P),!y)if(r(l)!==null)y=!0,Gn(T);else{var $=r(c);$!==null&&L(S,$.startTime-P)}}function T(P,$){y=!1,w&&(w=!1,m(I),I=-1),g=!0;var F=h;try{for(v($),f=r(l);f!==null&&(!(f.expirationTime>$)||P&&!C());){var G=f.callback;if(typeof G=="function"){f.callback=null,h=f.priorityLevel;var ue=G(f.expirationTime<=$);$=t.unstable_now(),typeof ue=="function"?f.callback=ue:f===r(l)&&n(l),v($)}else n(l);f=r(l)}if(f!==null)var Jn=!0;else{var Ft=r(c);Ft!==null&&L(S,Ft.startTime-$),Jn=!1}return Jn}finally{f=null,h=F,g=!1}}var E=!1,x=null,I=-1,j=5,N=-1;function C(){return!(t.unstable_now()-N<j)}function D(){if(x!==null){var P=t.unstable_now();N=P;var $=!0;try{$=x(!0,P)}finally{$?K():(E=!1,x=null)}}else E=!1}var K;if(typeof p=="function")K=function(){p(D)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,xr=pe.port2;pe.port1.onmessage=D,K=function(){xr.postMessage(null)}}else K=function(){_(D,0)};function Gn(P){x=P,E||(E=!0,K())}function L(P,$){I=_(function(){P(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Gn(T))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var F=h;h=$;try{return P()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var F=h;h=P;try{return $()}finally{h=F}},t.unstable_scheduleCallback=function(P,$,F){var G=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?G+F:G):F=G,P){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=F+ue,P={id:d++,callback:$,priorityLevel:P,startTime:F,expirationTime:ue,sortIndex:-1},F>G?(P.sortIndex=F,e(c,P),r(l)===null&&P===r(c)&&(w?(m(I),I=-1):w=!0,L(S,F-G))):(P.sortIndex=ue,e(l,P),y||g||(y=!0,Gn(T))),P},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(P){var $=h;return function(){var F=h;h=$;try{return P.apply(this,arguments)}finally{h=F}}}})(Gw);Kw.exports=Gw;var Bk=Kw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zk=b,bt=Bk;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jw=new Set,Da={};function Ts(t,e){Si(t,e),Si(t+"Capture",e)}function Si(t,e){for(Da[t]=e,t=0;t<e.length;t++)Jw.add(e[t])}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gd=Object.prototype.hasOwnProperty,Vk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,og={},lg={};function Wk(t){return Gd.call(lg,t)?!0:Gd.call(og,t)?!1:Vk.test(t)?lg[t]=!0:(og[t]=!0,!1)}function Hk(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qk(t,e,r,n){if(e===null||typeof e>"u"||Hk(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ze(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ue[t]=new Ze(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ue[e]=new Ze(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ue[t]=new Ze(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ue[t]=new Ze(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ue[t]=new Ze(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ue[t]=new Ze(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ue[t]=new Ze(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ue[t]=new Ze(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ue[t]=new Ze(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dh=/[\-:]([a-z])/g;function Lh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dh,Lh);Ue[e]=new Ze(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dh,Lh);Ue[e]=new Ze(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dh,Lh);Ue[e]=new Ze(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ue[t]=new Ze(t,1,!1,t.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ue[t]=new Ze(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fh(t,e,r,n){var s=Ue.hasOwnProperty(e)?Ue[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qk(e,r,s,n)&&(r=null),n||s===null?Wk(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var qr=zk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$o=Symbol.for("react.element"),Js=Symbol.for("react.portal"),Qs=Symbol.for("react.fragment"),Mh=Symbol.for("react.strict_mode"),Jd=Symbol.for("react.profiler"),Qw=Symbol.for("react.provider"),Xw=Symbol.for("react.context"),Uh=Symbol.for("react.forward_ref"),Qd=Symbol.for("react.suspense"),Xd=Symbol.for("react.suspense_list"),Bh=Symbol.for("react.memo"),on=Symbol.for("react.lazy"),Yw=Symbol.for("react.offscreen"),cg=Symbol.iterator;function Gi(t){return t===null||typeof t!="object"?null:(t=cg&&t[cg]||t["@@iterator"],typeof t=="function"?t:null)}var _e=Object.assign,Bu;function sa(t){if(Bu===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Bu=e&&e[1]||""}return`
`+Bu+t}var zu=!1;function Vu(t,e){if(!t||zu)return"";zu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{zu=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?sa(t):""}function Kk(t){switch(t.tag){case 5:return sa(t.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return t=Vu(t.type,!1),t;case 11:return t=Vu(t.type.render,!1),t;case 1:return t=Vu(t.type,!0),t;default:return""}}function Yd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qs:return"Fragment";case Js:return"Portal";case Jd:return"Profiler";case Mh:return"StrictMode";case Qd:return"Suspense";case Xd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xw:return(t.displayName||"Context")+".Consumer";case Qw:return(t._context.displayName||"Context")+".Provider";case Uh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bh:return e=t.displayName||null,e!==null?e:Yd(t.type)||"Memo";case on:e=t._payload,t=t._init;try{return Yd(t(e))}catch{}}return null}function Gk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yd(e);case 8:return e===Mh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jk(t){var e=Zw(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Do(t){t._valueTracker||(t._valueTracker=Jk(t))}function e0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Zw(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ul(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zd(t,e){var r=e.checked;return _e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ug(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Rn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function t0(t,e){e=e.checked,e!=null&&Fh(t,"checked",e,!1)}function ef(t,e){t0(t,e);var r=Rn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tf(t,e.type,r):e.hasOwnProperty("defaultValue")&&tf(t,e.type,Rn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function tf(t,e,r){(e!=="number"||Ul(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ia=Array.isArray;function ui(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Rn(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function rf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return _e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(A(92));if(ia(r)){if(1<r.length)throw Error(A(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Rn(r)}}function r0(t,e){var r=Rn(e.value),n=Rn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function hg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function n0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?n0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lo,s0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lo=Lo||document.createElement("div"),Lo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function La(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var va={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qk=["Webkit","ms","Moz","O"];Object.keys(va).forEach(function(t){Qk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),va[e]=va[t]})});function i0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||va.hasOwnProperty(t)&&va[t]?(""+e).trim():e+"px"}function a0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=i0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Xk=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sf(t,e){if(e){if(Xk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function af(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var of=null;function zh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lf=null,di=null,fi=null;function pg(t){if(t=po(t)){if(typeof lf!="function")throw Error(A(280));var e=t.stateNode;e&&(e=$c(e),lf(t.stateNode,t.type,e))}}function o0(t){di?fi?fi.push(t):fi=[t]:di=t}function l0(){if(di){var t=di,e=fi;if(fi=di=null,pg(t),e)for(t=0;t<e.length;t++)pg(e[t])}}function c0(t,e){return t(e)}function u0(){}var Wu=!1;function d0(t,e,r){if(Wu)return t(e,r);Wu=!0;try{return c0(t,e,r)}finally{Wu=!1,(di!==null||fi!==null)&&(u0(),l0())}}function Fa(t,e){var r=t.stateNode;if(r===null)return null;var n=$c(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(A(231,e,typeof r));return r}var cf=!1;if(Mr)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){cf=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{cf=!1}function Yk(t,e,r,n,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var wa=!1,Bl=null,zl=!1,uf=null,Zk={onError:function(t){wa=!0,Bl=t}};function eT(t,e,r,n,s,i,a,o,l){wa=!1,Bl=null,Yk.apply(Zk,arguments)}function tT(t,e,r,n,s,i,a,o,l){if(eT.apply(this,arguments),wa){if(wa){var c=Bl;wa=!1,Bl=null}else throw Error(A(198));zl||(zl=!0,uf=c)}}function Cs(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function f0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mg(t){if(Cs(t)!==t)throw Error(A(188))}function rT(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(A(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return mg(s),t;if(i===n)return mg(s),e;i=i.sibling}throw Error(A(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(A(189))}}if(r.alternate!==n)throw Error(A(190))}if(r.tag!==3)throw Error(A(188));return r.stateNode.current===r?t:e}function h0(t){return t=rT(t),t!==null?p0(t):null}function p0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=p0(t);if(e!==null)return e;t=t.sibling}return null}var m0=bt.unstable_scheduleCallback,gg=bt.unstable_cancelCallback,nT=bt.unstable_shouldYield,sT=bt.unstable_requestPaint,Se=bt.unstable_now,iT=bt.unstable_getCurrentPriorityLevel,Vh=bt.unstable_ImmediatePriority,g0=bt.unstable_UserBlockingPriority,Vl=bt.unstable_NormalPriority,aT=bt.unstable_LowPriority,y0=bt.unstable_IdlePriority,jc=null,hr=null;function oT(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(jc,t,void 0,(t.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:uT,lT=Math.log,cT=Math.LN2;function uT(t){return t>>>=0,t===0?32:31-(lT(t)/cT|0)|0}var Fo=64,Mo=4194304;function aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wl(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=aa(o):(i&=a,i!==0&&(n=aa(i)))}else a=r&~s,a!==0?n=aa(a):i!==0&&(n=aa(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Jt(e),s=1<<r,n|=t[r],e&=~s;return n}function dT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fT(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Jt(i),o=1<<a,l=s[a];l===-1?(!(o&r)||o&n)&&(s[a]=dT(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function df(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function v0(){var t=Fo;return Fo<<=1,!(Fo&4194240)&&(Fo=64),t}function Hu(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function fo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=r}function hT(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Jt(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Wh(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Jt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var te=0;function w0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _0,Hh,b0,x0,S0,ff=!1,Uo=[],xn=null,Sn=null,En=null,Ma=new Map,Ua=new Map,dn=[],pT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yg(t,e){switch(t){case"focusin":case"focusout":xn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Ma.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(e.pointerId)}}function Qi(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=po(e),e!==null&&Hh(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function mT(t,e,r,n,s){switch(e){case"focusin":return xn=Qi(xn,t,e,r,n,s),!0;case"dragenter":return Sn=Qi(Sn,t,e,r,n,s),!0;case"mouseover":return En=Qi(En,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Ma.set(i,Qi(Ma.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ua.set(i,Qi(Ua.get(i)||null,t,e,r,n,s)),!0}return!1}function E0(t){var e=is(t.target);if(e!==null){var r=Cs(e);if(r!==null){if(e=r.tag,e===13){if(e=f0(r),e!==null){t.blockedOn=e,S0(t.priority,function(){b0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=hf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);of=n,r.target.dispatchEvent(n),of=null}else return e=po(r),e!==null&&Hh(e),t.blockedOn=r,!1;e.shift()}return!0}function vg(t,e,r){gl(t)&&r.delete(e)}function gT(){ff=!1,xn!==null&&gl(xn)&&(xn=null),Sn!==null&&gl(Sn)&&(Sn=null),En!==null&&gl(En)&&(En=null),Ma.forEach(vg),Ua.forEach(vg)}function Xi(t,e){t.blockedOn===e&&(t.blockedOn=null,ff||(ff=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,gT)))}function Ba(t){function e(s){return Xi(s,t)}if(0<Uo.length){Xi(Uo[0],t);for(var r=1;r<Uo.length;r++){var n=Uo[r];n.blockedOn===t&&(n.blockedOn=null)}}for(xn!==null&&Xi(xn,t),Sn!==null&&Xi(Sn,t),En!==null&&Xi(En,t),Ma.forEach(e),Ua.forEach(e),r=0;r<dn.length;r++)n=dn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<dn.length&&(r=dn[0],r.blockedOn===null);)E0(r),r.blockedOn===null&&dn.shift()}var hi=qr.ReactCurrentBatchConfig,Hl=!0;function yT(t,e,r,n){var s=te,i=hi.transition;hi.transition=null;try{te=1,qh(t,e,r,n)}finally{te=s,hi.transition=i}}function vT(t,e,r,n){var s=te,i=hi.transition;hi.transition=null;try{te=4,qh(t,e,r,n)}finally{te=s,hi.transition=i}}function qh(t,e,r,n){if(Hl){var s=hf(t,e,r,n);if(s===null)td(t,e,n,ql,r),yg(t,n);else if(mT(s,t,e,r,n))n.stopPropagation();else if(yg(t,n),e&4&&-1<pT.indexOf(t)){for(;s!==null;){var i=po(s);if(i!==null&&_0(i),i=hf(t,e,r,n),i===null&&td(t,e,n,ql,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else td(t,e,n,null,r)}}var ql=null;function hf(t,e,r,n){if(ql=null,t=zh(n),t=is(t),t!==null)if(e=Cs(t),e===null)t=null;else if(r=e.tag,r===13){if(t=f0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ql=t,null}function k0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iT()){case Vh:return 1;case g0:return 4;case Vl:case aT:return 16;case y0:return 536870912;default:return 16}default:return 16}}var vn=null,Kh=null,yl=null;function T0(){if(yl)return yl;var t,e=Kh,r=e.length,n,s="value"in vn?vn.value:vn.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return yl=s.slice(t,1<n?1-n:void 0)}function vl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bo(){return!0}function wg(){return!1}function St(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bo:wg,this.isPropagationStopped=wg,this}return _e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),e}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gh=St(Di),ho=_e({},Di,{view:0,detail:0}),wT=St(ho),qu,Ku,Yi,Nc=_e({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yi&&(Yi&&t.type==="mousemove"?(qu=t.screenX-Yi.screenX,Ku=t.screenY-Yi.screenY):Ku=qu=0,Yi=t),qu)},movementY:function(t){return"movementY"in t?t.movementY:Ku}}),_g=St(Nc),_T=_e({},Nc,{dataTransfer:0}),bT=St(_T),xT=_e({},ho,{relatedTarget:0}),Gu=St(xT),ST=_e({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),ET=St(ST),kT=_e({},Di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TT=St(kT),CT=_e({},Di,{data:0}),bg=St(CT),IT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AT[t])?!!e[t]:!1}function Jh(){return jT}var NT=_e({},ho,{key:function(t){if(t.key){var e=IT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jh,charCode:function(t){return t.type==="keypress"?vl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),OT=St(NT),RT=_e({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xg=St(RT),$T=_e({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jh}),DT=St($T),LT=_e({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),FT=St(LT),MT=_e({},Nc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UT=St(MT),BT=[9,13,27,32],Qh=Mr&&"CompositionEvent"in window,_a=null;Mr&&"documentMode"in document&&(_a=document.documentMode);var zT=Mr&&"TextEvent"in window&&!_a,C0=Mr&&(!Qh||_a&&8<_a&&11>=_a),Sg=" ",Eg=!1;function I0(t,e){switch(t){case"keyup":return BT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function VT(t,e){switch(t){case"compositionend":return P0(e);case"keypress":return e.which!==32?null:(Eg=!0,Sg);case"textInput":return t=e.data,t===Sg&&Eg?null:t;default:return null}}function WT(t,e){if(Xs)return t==="compositionend"||!Qh&&I0(t,e)?(t=T0(),yl=Kh=vn=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return C0&&e.locale!=="ko"?null:e.data;default:return null}}var HT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!HT[t.type]:e==="textarea"}function A0(t,e,r,n){o0(n),e=Kl(e,"onChange"),0<e.length&&(r=new Gh("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ba=null,za=null;function qT(t){B0(t,0)}function Oc(t){var e=ei(t);if(e0(e))return t}function KT(t,e){if(t==="change")return e}var j0=!1;if(Mr){var Ju;if(Mr){var Qu="oninput"in document;if(!Qu){var Tg=document.createElement("div");Tg.setAttribute("oninput","return;"),Qu=typeof Tg.oninput=="function"}Ju=Qu}else Ju=!1;j0=Ju&&(!document.documentMode||9<document.documentMode)}function Cg(){ba&&(ba.detachEvent("onpropertychange",N0),za=ba=null)}function N0(t){if(t.propertyName==="value"&&Oc(za)){var e=[];A0(e,za,t,zh(t)),d0(qT,e)}}function GT(t,e,r){t==="focusin"?(Cg(),ba=e,za=r,ba.attachEvent("onpropertychange",N0)):t==="focusout"&&Cg()}function JT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oc(za)}function QT(t,e){if(t==="click")return Oc(e)}function XT(t,e){if(t==="input"||t==="change")return Oc(e)}function YT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:YT;function Va(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Gd.call(e,s)||!Xt(t[s],e[s]))return!1}return!0}function Ig(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pg(t,e){var r=Ig(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ig(r)}}function O0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?O0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function R0(){for(var t=window,e=Ul();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ul(t.document)}return e}function Xh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZT(t){var e=R0(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&O0(r.ownerDocument.documentElement,r)){if(n!==null&&Xh(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Pg(r,i);var a=Pg(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eC=Mr&&"documentMode"in document&&11>=document.documentMode,Ys=null,pf=null,xa=null,mf=!1;function Ag(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mf||Ys==null||Ys!==Ul(n)||(n=Ys,"selectionStart"in n&&Xh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xa&&Va(xa,n)||(xa=n,n=Kl(pf,"onSelect"),0<n.length&&(e=new Gh("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ys)))}function zo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Zs={animationend:zo("Animation","AnimationEnd"),animationiteration:zo("Animation","AnimationIteration"),animationstart:zo("Animation","AnimationStart"),transitionend:zo("Transition","TransitionEnd")},Xu={},$0={};Mr&&($0=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function Rc(t){if(Xu[t])return Xu[t];if(!Zs[t])return t;var e=Zs[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in $0)return Xu[t]=e[r];return t}var D0=Rc("animationend"),L0=Rc("animationiteration"),F0=Rc("animationstart"),M0=Rc("transitionend"),U0=new Map,jg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ln(t,e){U0.set(t,e),Ts(e,[t])}for(var Yu=0;Yu<jg.length;Yu++){var Zu=jg[Yu],tC=Zu.toLowerCase(),rC=Zu[0].toUpperCase()+Zu.slice(1);Ln(tC,"on"+rC)}Ln(D0,"onAnimationEnd");Ln(L0,"onAnimationIteration");Ln(F0,"onAnimationStart");Ln("dblclick","onDoubleClick");Ln("focusin","onFocus");Ln("focusout","onBlur");Ln(M0,"onTransitionEnd");Si("onMouseEnter",["mouseout","mouseover"]);Si("onMouseLeave",["mouseout","mouseover"]);Si("onPointerEnter",["pointerout","pointerover"]);Si("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nC=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function Ng(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,tT(n,e,void 0,t),t.currentTarget=null}function B0(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Ng(s,o,c),i=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Ng(s,o,c),i=l}}}if(zl)throw t=uf,zl=!1,uf=null,t}function de(t,e){var r=e[_f];r===void 0&&(r=e[_f]=new Set);var n=t+"__bubble";r.has(n)||(z0(e,t,2,!1),r.add(n))}function ed(t,e,r){var n=0;e&&(n|=4),z0(r,t,n,e)}var Vo="_reactListening"+Math.random().toString(36).slice(2);function Wa(t){if(!t[Vo]){t[Vo]=!0,Jw.forEach(function(r){r!=="selectionchange"&&(nC.has(r)||ed(r,!1,t),ed(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vo]||(e[Vo]=!0,ed("selectionchange",!1,e))}}function z0(t,e,r,n){switch(k0(e)){case 1:var s=yT;break;case 4:s=vT;break;default:s=qh}r=s.bind(null,e,r,t),s=void 0,!cf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function td(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=is(o),a===null)return;if(l=a.tag,l===5||l===6){n=i=a;continue e}o=o.parentNode}}n=n.return}d0(function(){var c=i,d=zh(r),f=[];e:{var h=U0.get(t);if(h!==void 0){var g=Gh,y=t;switch(t){case"keypress":if(vl(r)===0)break e;case"keydown":case"keyup":g=OT;break;case"focusin":y="focus",g=Gu;break;case"focusout":y="blur",g=Gu;break;case"beforeblur":case"afterblur":g=Gu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=_g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=bT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=DT;break;case D0:case L0:case F0:g=ET;break;case M0:g=FT;break;case"scroll":g=wT;break;case"wheel":g=UT;break;case"copy":case"cut":case"paste":g=TT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=xg}var w=(e&4)!==0,_=!w&&t==="scroll",m=w?h!==null?h+"Capture":null:h;w=[];for(var p=c,v;p!==null;){v=p;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,m!==null&&(S=Fa(p,m),S!=null&&w.push(Ha(p,S,v)))),_)break;p=p.return}0<w.length&&(h=new g(h,y,null,r,d),f.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&r!==of&&(y=r.relatedTarget||r.fromElement)&&(is(y)||y[Ur]))break e;if((g||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,g?(y=r.relatedTarget||r.toElement,g=c,y=y?is(y):null,y!==null&&(_=Cs(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(w=_g,S="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=xg,S="onPointerLeave",m="onPointerEnter",p="pointer"),_=g==null?h:ei(g),v=y==null?h:ei(y),h=new w(S,p+"leave",g,r,d),h.target=_,h.relatedTarget=v,S=null,is(d)===c&&(w=new w(m,p+"enter",y,r,d),w.target=v,w.relatedTarget=_,S=w),_=S,g&&y)t:{for(w=g,m=y,p=0,v=w;v;v=Ls(v))p++;for(v=0,S=m;S;S=Ls(S))v++;for(;0<p-v;)w=Ls(w),p--;for(;0<v-p;)m=Ls(m),v--;for(;p--;){if(w===m||m!==null&&w===m.alternate)break t;w=Ls(w),m=Ls(m)}w=null}else w=null;g!==null&&Og(f,h,g,w,!1),y!==null&&_!==null&&Og(f,_,y,w,!0)}}e:{if(h=c?ei(c):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var T=KT;else if(kg(h))if(j0)T=XT;else{T=JT;var E=GT}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=QT);if(T&&(T=T(t,c))){A0(f,T,r,d);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&tf(h,"number",h.value)}switch(E=c?ei(c):window,t){case"focusin":(kg(E)||E.contentEditable==="true")&&(Ys=E,pf=c,xa=null);break;case"focusout":xa=pf=Ys=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,Ag(f,r,d);break;case"selectionchange":if(eC)break;case"keydown":case"keyup":Ag(f,r,d)}var x;if(Qh)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Xs?I0(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(C0&&r.locale!=="ko"&&(Xs||I!=="onCompositionStart"?I==="onCompositionEnd"&&Xs&&(x=T0()):(vn=d,Kh="value"in vn?vn.value:vn.textContent,Xs=!0)),E=Kl(c,I),0<E.length&&(I=new bg(I,t,null,r,d),f.push({event:I,listeners:E}),x?I.data=x:(x=P0(r),x!==null&&(I.data=x)))),(x=zT?VT(t,r):WT(t,r))&&(c=Kl(c,"onBeforeInput"),0<c.length&&(d=new bg("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:c}),d.data=x))}B0(f,e)})}function Ha(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Kl(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fa(t,r),i!=null&&n.unshift(Ha(t,i,s)),i=Fa(t,e),i!=null&&n.push(Ha(t,i,s))),t=t.return}return n}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Og(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,s?(l=Fa(r,i),l!=null&&a.unshift(Ha(r,l,o))):s||(l=Fa(r,i),l!=null&&a.push(Ha(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var sC=/\r\n?/g,iC=/\u0000|\uFFFD/g;function Rg(t){return(typeof t=="string"?t:""+t).replace(sC,`
`).replace(iC,"")}function Wo(t,e,r){if(e=Rg(e),Rg(t)!==e&&r)throw Error(A(425))}function Gl(){}var gf=null,yf=null;function vf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wf=typeof setTimeout=="function"?setTimeout:void 0,aC=typeof clearTimeout=="function"?clearTimeout:void 0,$g=typeof Promise=="function"?Promise:void 0,oC=typeof queueMicrotask=="function"?queueMicrotask:typeof $g<"u"?function(t){return $g.resolve(null).then(t).catch(lC)}:wf;function lC(t){setTimeout(function(){throw t})}function rd(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Ba(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ba(e)}function kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Li=Math.random().toString(36).slice(2),cr="__reactFiber$"+Li,qa="__reactProps$"+Li,Ur="__reactContainer$"+Li,_f="__reactEvents$"+Li,cC="__reactListeners$"+Li,uC="__reactHandles$"+Li;function is(t){var e=t[cr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ur]||r[cr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Dg(t);t!==null;){if(r=t[cr])return r;t=Dg(t)}return e}t=r,r=t.parentNode}return null}function po(t){return t=t[cr]||t[Ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function $c(t){return t[qa]||null}var bf=[],ti=-1;function Fn(t){return{current:t}}function he(t){0>ti||(t.current=bf[ti],bf[ti]=null,ti--)}function ce(t,e){ti++,bf[ti]=t.current,t.current=e}var $n={},Ke=Fn($n),lt=Fn(!1),ms=$n;function Ei(t,e){var r=t.type.contextTypes;if(!r)return $n;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ct(t){return t=t.childContextTypes,t!=null}function Jl(){he(lt),he(Ke)}function Lg(t,e,r){if(Ke.current!==$n)throw Error(A(168));ce(Ke,e),ce(lt,r)}function V0(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(A(108,Gk(t)||"Unknown",s));return _e({},r,n)}function Ql(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$n,ms=Ke.current,ce(Ke,t),ce(lt,lt.current),!0}function Fg(t,e,r){var n=t.stateNode;if(!n)throw Error(A(169));r?(t=V0(t,e,ms),n.__reactInternalMemoizedMergedChildContext=t,he(lt),he(Ke),ce(Ke,t)):he(lt),ce(lt,r)}var Pr=null,Dc=!1,nd=!1;function W0(t){Pr===null?Pr=[t]:Pr.push(t)}function dC(t){Dc=!0,W0(t)}function Mn(){if(!nd&&Pr!==null){nd=!0;var t=0,e=te;try{var r=Pr;for(te=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Pr=null,Dc=!1}catch(s){throw Pr!==null&&(Pr=Pr.slice(t+1)),m0(Vh,Mn),s}finally{te=e,nd=!1}}return null}var ri=[],ni=0,Xl=null,Yl=0,Ct=[],It=0,gs=null,jr=1,Nr="";function Zn(t,e){ri[ni++]=Yl,ri[ni++]=Xl,Xl=t,Yl=e}function H0(t,e,r){Ct[It++]=jr,Ct[It++]=Nr,Ct[It++]=gs,gs=t;var n=jr;t=Nr;var s=32-Jt(n)-1;n&=~(1<<s),r+=1;var i=32-Jt(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,jr=1<<32-Jt(e)+s|r<<s|n,Nr=i+t}else jr=1<<i|r<<s|n,Nr=t}function Yh(t){t.return!==null&&(Zn(t,1),H0(t,1,0))}function Zh(t){for(;t===Xl;)Xl=ri[--ni],ri[ni]=null,Yl=ri[--ni],ri[ni]=null;for(;t===gs;)gs=Ct[--It],Ct[It]=null,Nr=Ct[--It],Ct[It]=null,jr=Ct[--It],Ct[It]=null}var wt=null,vt=null,ge=!1,Kt=null;function q0(t,e){var r=jt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Mg(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wt=t,vt=kn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wt=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=gs!==null?{id:jr,overflow:Nr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=jt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,wt=t,vt=null,!0):!1;default:return!1}}function xf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sf(t){if(ge){var e=vt;if(e){var r=e;if(!Mg(t,e)){if(xf(t))throw Error(A(418));e=kn(r.nextSibling);var n=wt;e&&Mg(t,e)?q0(n,r):(t.flags=t.flags&-4097|2,ge=!1,wt=t)}}else{if(xf(t))throw Error(A(418));t.flags=t.flags&-4097|2,ge=!1,wt=t}}}function Ug(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wt=t}function Ho(t){if(t!==wt)return!1;if(!ge)return Ug(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vf(t.type,t.memoizedProps)),e&&(e=vt)){if(xf(t))throw K0(),Error(A(418));for(;e;)q0(t,e),e=kn(e.nextSibling)}if(Ug(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){vt=kn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=wt?kn(t.stateNode.nextSibling):null;return!0}function K0(){for(var t=vt;t;)t=kn(t.nextSibling)}function ki(){vt=wt=null,ge=!1}function ep(t){Kt===null?Kt=[t]:Kt.push(t)}var fC=qr.ReactCurrentBatchConfig;function Zi(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(A(309));var n=r.stateNode}if(!n)throw Error(A(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(A(284));if(!r._owner)throw Error(A(290,t))}return t}function qo(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bg(t){var e=t._init;return e(t._payload)}function G0(t){function e(m,p){if(t){var v=m.deletions;v===null?(m.deletions=[p],m.flags|=16):v.push(p)}}function r(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function n(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=Pn(m,p),m.index=0,m.sibling=null,m}function i(m,p,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<p?(m.flags|=2,p):v):(m.flags|=2,p)):(m.flags|=1048576,p)}function a(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,p,v,S){return p===null||p.tag!==6?(p=ud(v,m.mode,S),p.return=m,p):(p=s(p,v),p.return=m,p)}function l(m,p,v,S){var T=v.type;return T===Qs?d(m,p,v.props.children,S,v.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===on&&Bg(T)===p.type)?(S=s(p,v.props),S.ref=Zi(m,p,v),S.return=m,S):(S=kl(v.type,v.key,v.props,null,m.mode,S),S.ref=Zi(m,p,v),S.return=m,S)}function c(m,p,v,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=dd(v,m.mode,S),p.return=m,p):(p=s(p,v.children||[]),p.return=m,p)}function d(m,p,v,S,T){return p===null||p.tag!==7?(p=hs(v,m.mode,S,T),p.return=m,p):(p=s(p,v),p.return=m,p)}function f(m,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ud(""+p,m.mode,v),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case $o:return v=kl(p.type,p.key,p.props,null,m.mode,v),v.ref=Zi(m,null,p),v.return=m,v;case Js:return p=dd(p,m.mode,v),p.return=m,p;case on:var S=p._init;return f(m,S(p._payload),v)}if(ia(p)||Gi(p))return p=hs(p,m.mode,v,null),p.return=m,p;qo(m,p)}return null}function h(m,p,v,S){var T=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:o(m,p,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $o:return v.key===T?l(m,p,v,S):null;case Js:return v.key===T?c(m,p,v,S):null;case on:return T=v._init,h(m,p,T(v._payload),S)}if(ia(v)||Gi(v))return T!==null?null:d(m,p,v,S,null);qo(m,v)}return null}function g(m,p,v,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(v)||null,o(p,m,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $o:return m=m.get(S.key===null?v:S.key)||null,l(p,m,S,T);case Js:return m=m.get(S.key===null?v:S.key)||null,c(p,m,S,T);case on:var E=S._init;return g(m,p,v,E(S._payload),T)}if(ia(S)||Gi(S))return m=m.get(v)||null,d(p,m,S,T,null);qo(p,S)}return null}function y(m,p,v,S){for(var T=null,E=null,x=p,I=p=0,j=null;x!==null&&I<v.length;I++){x.index>I?(j=x,x=null):j=x.sibling;var N=h(m,x,v[I],S);if(N===null){x===null&&(x=j);break}t&&x&&N.alternate===null&&e(m,x),p=i(N,p,I),E===null?T=N:E.sibling=N,E=N,x=j}if(I===v.length)return r(m,x),ge&&Zn(m,I),T;if(x===null){for(;I<v.length;I++)x=f(m,v[I],S),x!==null&&(p=i(x,p,I),E===null?T=x:E.sibling=x,E=x);return ge&&Zn(m,I),T}for(x=n(m,x);I<v.length;I++)j=g(x,m,I,v[I],S),j!==null&&(t&&j.alternate!==null&&x.delete(j.key===null?I:j.key),p=i(j,p,I),E===null?T=j:E.sibling=j,E=j);return t&&x.forEach(function(C){return e(m,C)}),ge&&Zn(m,I),T}function w(m,p,v,S){var T=Gi(v);if(typeof T!="function")throw Error(A(150));if(v=T.call(v),v==null)throw Error(A(151));for(var E=T=null,x=p,I=p=0,j=null,N=v.next();x!==null&&!N.done;I++,N=v.next()){x.index>I?(j=x,x=null):j=x.sibling;var C=h(m,x,N.value,S);if(C===null){x===null&&(x=j);break}t&&x&&C.alternate===null&&e(m,x),p=i(C,p,I),E===null?T=C:E.sibling=C,E=C,x=j}if(N.done)return r(m,x),ge&&Zn(m,I),T;if(x===null){for(;!N.done;I++,N=v.next())N=f(m,N.value,S),N!==null&&(p=i(N,p,I),E===null?T=N:E.sibling=N,E=N);return ge&&Zn(m,I),T}for(x=n(m,x);!N.done;I++,N=v.next())N=g(x,m,I,N.value,S),N!==null&&(t&&N.alternate!==null&&x.delete(N.key===null?I:N.key),p=i(N,p,I),E===null?T=N:E.sibling=N,E=N);return t&&x.forEach(function(D){return e(m,D)}),ge&&Zn(m,I),T}function _(m,p,v,S){if(typeof v=="object"&&v!==null&&v.type===Qs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case $o:e:{for(var T=v.key,E=p;E!==null;){if(E.key===T){if(T=v.type,T===Qs){if(E.tag===7){r(m,E.sibling),p=s(E,v.props.children),p.return=m,m=p;break e}}else if(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===on&&Bg(T)===E.type){r(m,E.sibling),p=s(E,v.props),p.ref=Zi(m,E,v),p.return=m,m=p;break e}r(m,E);break}else e(m,E);E=E.sibling}v.type===Qs?(p=hs(v.props.children,m.mode,S,v.key),p.return=m,m=p):(S=kl(v.type,v.key,v.props,null,m.mode,S),S.ref=Zi(m,p,v),S.return=m,m=S)}return a(m);case Js:e:{for(E=v.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){r(m,p.sibling),p=s(p,v.children||[]),p.return=m,m=p;break e}else{r(m,p);break}else e(m,p);p=p.sibling}p=dd(v,m.mode,S),p.return=m,m=p}return a(m);case on:return E=v._init,_(m,p,E(v._payload),S)}if(ia(v))return y(m,p,v,S);if(Gi(v))return w(m,p,v,S);qo(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(r(m,p.sibling),p=s(p,v),p.return=m,m=p):(r(m,p),p=ud(v,m.mode,S),p.return=m,m=p),a(m)):r(m,p)}return _}var Ti=G0(!0),J0=G0(!1),Zl=Fn(null),ec=null,si=null,tp=null;function rp(){tp=si=ec=null}function np(t){var e=Zl.current;he(Zl),t._currentValue=e}function Ef(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function pi(t,e){ec=t,tp=si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ot=!0),t.firstContext=null)}function $t(t){var e=t._currentValue;if(tp!==t)if(t={context:t,memoizedValue:e,next:null},si===null){if(ec===null)throw Error(A(308));si=t,ec.dependencies={lanes:0,firstContext:t}}else si=si.next=t;return e}var as=null;function sp(t){as===null?as=[t]:as.push(t)}function Q0(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,sp(e)):(r.next=s.next,s.next=r),e.interleaved=r,Br(t,n)}function Br(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ln=!1;function ip(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Y&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Br(t,r)}return s=n.interleaved,s===null?(e.next=e,sp(n)):(e.next=s.next,s.next=e),n.interleaved=e,Br(t,r)}function wl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wh(t,r)}}function zg(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function tc(t,e,r,n){var s=t.updateQueue;ln=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;a=0,d=c=l=null,o=i;do{var h=o.lane,g=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,w=o;switch(h=e,g=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(g,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,h=typeof y=="function"?y.call(g,f,h):y,h==null)break e;f=_e({},f,h);break e;case 2:ln=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[o]:h.push(o))}else g={eventTime:g,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=g,l=f):d=d.next=g,a|=h;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;h=o,o=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);vs|=a,t.lanes=a,t.memoizedState=f}}function Vg(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(A(191,s));s.call(n)}}}var mo={},pr=Fn(mo),Ka=Fn(mo),Ga=Fn(mo);function os(t){if(t===mo)throw Error(A(174));return t}function ap(t,e){switch(ce(Ga,e),ce(Ka,t),ce(pr,mo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nf(e,t)}he(pr),ce(pr,e)}function Ci(){he(pr),he(Ka),he(Ga)}function Y0(t){os(Ga.current);var e=os(pr.current),r=nf(e,t.type);e!==r&&(ce(Ka,t),ce(pr,r))}function op(t){Ka.current===t&&(he(pr),he(Ka))}var ve=Fn(0);function rc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sd=[];function lp(){for(var t=0;t<sd.length;t++)sd[t]._workInProgressVersionPrimary=null;sd.length=0}var _l=qr.ReactCurrentDispatcher,id=qr.ReactCurrentBatchConfig,ys=0,we=null,Ie=null,Ne=null,nc=!1,Sa=!1,Ja=0,hC=0;function Ve(){throw Error(A(321))}function cp(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Xt(t[r],e[r]))return!1;return!0}function up(t,e,r,n,s,i){if(ys=i,we=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_l.current=t===null||t.memoizedState===null?yC:vC,t=r(n,s),Sa){i=0;do{if(Sa=!1,Ja=0,25<=i)throw Error(A(301));i+=1,Ne=Ie=null,e.updateQueue=null,_l.current=wC,t=r(n,s)}while(Sa)}if(_l.current=sc,e=Ie!==null&&Ie.next!==null,ys=0,Ne=Ie=we=null,nc=!1,e)throw Error(A(300));return t}function dp(){var t=Ja!==0;return Ja=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?we.memoizedState=Ne=t:Ne=Ne.next=t,Ne}function Dt(){if(Ie===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var e=Ne===null?we.memoizedState:Ne.next;if(e!==null)Ne=e,Ie=t;else{if(t===null)throw Error(A(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Ne===null?we.memoizedState=Ne=t:Ne=Ne.next=t}return Ne}function Qa(t,e){return typeof e=="function"?e(t):e}function ad(t){var e=Dt(),r=e.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=t;var n=Ie,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,l=null,c=i;do{var d=c.lane;if((ys&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=f,a=n):l=l.next=f,we.lanes|=d,vs|=d}c=c.next}while(c!==null&&c!==i);l===null?a=n:l.next=o,Xt(n,e.memoizedState)||(ot=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,we.lanes|=i,vs|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function od(t){var e=Dt(),r=e.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Xt(i,e.memoizedState)||(ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Z0(){}function e_(t,e){var r=we,n=Dt(),s=e(),i=!Xt(n.memoizedState,s);if(i&&(n.memoizedState=s,ot=!0),n=n.queue,fp(n_.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Ne!==null&&Ne.memoizedState.tag&1){if(r.flags|=2048,Xa(9,r_.bind(null,r,n,s,e),void 0,null),Oe===null)throw Error(A(349));ys&30||t_(r,e,s)}return s}function t_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function r_(t,e,r,n){e.value=r,e.getSnapshot=n,s_(e)&&i_(t)}function n_(t,e,r){return r(function(){s_(e)&&i_(t)})}function s_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Xt(t,r)}catch{return!0}}function i_(t){var e=Br(t,1);e!==null&&Qt(e,t,1,-1)}function Wg(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:t},e.queue=t,t=t.dispatch=gC.bind(null,we,t),[e.memoizedState,t]}function Xa(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function a_(){return Dt().memoizedState}function bl(t,e,r,n){var s=ir();we.flags|=t,s.memoizedState=Xa(1|e,r,void 0,n===void 0?null:n)}function Lc(t,e,r,n){var s=Dt();n=n===void 0?null:n;var i=void 0;if(Ie!==null){var a=Ie.memoizedState;if(i=a.destroy,n!==null&&cp(n,a.deps)){s.memoizedState=Xa(e,r,i,n);return}}we.flags|=t,s.memoizedState=Xa(1|e,r,i,n)}function Hg(t,e){return bl(8390656,8,t,e)}function fp(t,e){return Lc(2048,8,t,e)}function o_(t,e){return Lc(4,2,t,e)}function l_(t,e){return Lc(4,4,t,e)}function c_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function u_(t,e,r){return r=r!=null?r.concat([t]):null,Lc(4,4,c_.bind(null,e,t),r)}function hp(){}function d_(t,e){var r=Dt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&cp(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function f_(t,e){var r=Dt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&cp(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function h_(t,e,r){return ys&21?(Xt(r,e)||(r=v0(),we.lanes|=r,vs|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ot=!0),t.memoizedState=r)}function pC(t,e){var r=te;te=r!==0&&4>r?r:4,t(!0);var n=id.transition;id.transition={};try{t(!1),e()}finally{te=r,id.transition=n}}function p_(){return Dt().memoizedState}function mC(t,e,r){var n=In(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},m_(t))g_(e,r);else if(r=Q0(t,e,r,n),r!==null){var s=Qe();Qt(r,t,n,s),y_(r,e,n)}}function gC(t,e,r){var n=In(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(m_(t))g_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,Xt(o,a)){var l=e.interleaved;l===null?(s.next=s,sp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=Q0(t,e,s,n),r!==null&&(s=Qe(),Qt(r,t,n,s),y_(r,e,n))}}function m_(t){var e=t.alternate;return t===we||e!==null&&e===we}function g_(t,e){Sa=nc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function y_(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wh(t,r)}}var sc={readContext:$t,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},yC={readContext:$t,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:$t,useEffect:Hg,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,bl(4194308,4,c_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return bl(4194308,4,t,e)},useInsertionEffect:function(t,e){return bl(4,2,t,e)},useMemo:function(t,e){var r=ir();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ir();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=mC.bind(null,we,t),[n.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:Wg,useDebugValue:hp,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=Wg(!1),e=t[0];return t=pC.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=we,s=ir();if(ge){if(r===void 0)throw Error(A(407));r=r()}else{if(r=e(),Oe===null)throw Error(A(349));ys&30||t_(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,Hg(n_.bind(null,n,i,t),[t]),n.flags|=2048,Xa(9,r_.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=ir(),e=Oe.identifierPrefix;if(ge){var r=Nr,n=jr;r=(n&~(1<<32-Jt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ja++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=hC++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vC={readContext:$t,useCallback:d_,useContext:$t,useEffect:fp,useImperativeHandle:u_,useInsertionEffect:o_,useLayoutEffect:l_,useMemo:f_,useReducer:ad,useRef:a_,useState:function(){return ad(Qa)},useDebugValue:hp,useDeferredValue:function(t){var e=Dt();return h_(e,Ie.memoizedState,t)},useTransition:function(){var t=ad(Qa)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Z0,useSyncExternalStore:e_,useId:p_,unstable_isNewReconciler:!1},wC={readContext:$t,useCallback:d_,useContext:$t,useEffect:fp,useImperativeHandle:u_,useInsertionEffect:o_,useLayoutEffect:l_,useMemo:f_,useReducer:od,useRef:a_,useState:function(){return od(Qa)},useDebugValue:hp,useDeferredValue:function(t){var e=Dt();return Ie===null?e.memoizedState=t:h_(e,Ie.memoizedState,t)},useTransition:function(){var t=od(Qa)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Z0,useSyncExternalStore:e_,useId:p_,unstable_isNewReconciler:!1};function Vt(t,e){if(t&&t.defaultProps){e=_e({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function kf(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:_e({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Fc={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Qe(),s=In(t),i=Dr(n,s);i.payload=e,r!=null&&(i.callback=r),e=Tn(t,i,s),e!==null&&(Qt(e,t,s,n),wl(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Qe(),s=In(t),i=Dr(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Tn(t,i,s),e!==null&&(Qt(e,t,s,n),wl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Qe(),n=In(t),s=Dr(r,n);s.tag=2,e!=null&&(s.callback=e),e=Tn(t,s,n),e!==null&&(Qt(e,t,n,r),wl(e,t,n))}};function qg(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Va(r,n)||!Va(s,i):!0}function v_(t,e,r){var n=!1,s=$n,i=e.contextType;return typeof i=="object"&&i!==null?i=$t(i):(s=ct(e)?ms:Ke.current,n=e.contextTypes,i=(n=n!=null)?Ei(t,s):$n),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Kg(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Fc.enqueueReplaceState(e,e.state,null)}function Tf(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},ip(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$t(i):(i=ct(e)?ms:Ke.current,s.context=Ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(kf(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fc.enqueueReplaceState(s,s.state,null),tc(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ii(t,e){try{var r="",n=e;do r+=Kk(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ld(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Cf(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var _C=typeof WeakMap=="function"?WeakMap:Map;function w_(t,e,r){r=Dr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ac||(ac=!0,Lf=n),Cf(t,e)},r}function __(t,e,r){r=Dr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Cf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Cf(t,e),typeof n!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Gg(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new _C;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=RC.bind(null,t,e,r),e.then(t,t))}function Jg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qg(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Dr(-1,1),e.tag=2,Tn(r,e,1))),r.lanes|=1),t)}var bC=qr.ReactCurrentOwner,ot=!1;function Je(t,e,r,n){e.child=t===null?J0(e,null,r,n):Ti(e,t.child,r,n)}function Xg(t,e,r,n,s){r=r.render;var i=e.ref;return pi(e,s),n=up(t,e,r,n,i,s),r=dp(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zr(t,e,s)):(ge&&r&&Yh(e),e.flags|=1,Je(t,e,n,s),e.child)}function Yg(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!bp(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,b_(t,e,i,n,s)):(t=kl(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Va,r(a,n)&&t.ref===e.ref)return zr(t,e,s)}return e.flags|=1,t=Pn(i,n),t.ref=e.ref,t.return=e,e.child=t}function b_(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Va(i,n)&&t.ref===e.ref)if(ot=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(ot=!0);else return e.lanes=t.lanes,zr(t,e,s)}return If(t,e,r,n,s)}function x_(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(ai,yt),yt|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(ai,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ce(ai,yt),yt|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,ce(ai,yt),yt|=n;return Je(t,e,s,r),e.child}function S_(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function If(t,e,r,n,s){var i=ct(r)?ms:Ke.current;return i=Ei(e,i),pi(e,s),r=up(t,e,r,n,i,s),n=dp(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zr(t,e,s)):(ge&&n&&Yh(e),e.flags|=1,Je(t,e,r,s),e.child)}function Zg(t,e,r,n,s){if(ct(r)){var i=!0;Ql(e)}else i=!1;if(pi(e,s),e.stateNode===null)xl(t,e),v_(e,r,n),Tf(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=$t(c):(c=ct(r)?ms:Ke.current,c=Ei(e,c));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&Kg(e,a,n,c),ln=!1;var h=e.memoizedState;a.state=h,tc(e,n,a,s),l=e.memoizedState,o!==n||h!==l||lt.current||ln?(typeof d=="function"&&(kf(e,r,d,n),l=e.memoizedState),(o=ln||qg(e,r,o,n,h,l,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,X0(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Vt(e.type,o),a.props=c,f=e.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=$t(l):(l=ct(r)?ms:Ke.current,l=Ei(e,l));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||h!==l)&&Kg(e,a,n,l),ln=!1,h=e.memoizedState,a.state=h,tc(e,n,a,s);var y=e.memoizedState;o!==f||h!==y||lt.current||ln?(typeof g=="function"&&(kf(e,r,g,n),y=e.memoizedState),(c=ln||qg(e,r,c,n,h,y,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Pf(t,e,r,n,i,s)}function Pf(t,e,r,n,s,i){S_(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&Fg(e,r,!1),zr(t,e,i);n=e.stateNode,bC.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Ti(e,t.child,null,i),e.child=Ti(e,null,o,i)):Je(t,e,o,i),e.memoizedState=n.state,s&&Fg(e,r,!0),e.child}function E_(t){var e=t.stateNode;e.pendingContext?Lg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lg(t,e.context,!1),ap(t,e.containerInfo)}function ey(t,e,r,n,s){return ki(),ep(s),e.flags|=256,Je(t,e,r,n),e.child}var Af={dehydrated:null,treeContext:null,retryLane:0};function jf(t){return{baseLanes:t,cachePool:null,transitions:null}}function k_(t,e,r){var n=e.pendingProps,s=ve.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ce(ve,s&1),t===null)return Sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Bc(a,n,0,null),t=hs(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jf(r),e.memoizedState=Af,t):pp(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return xC(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Pn(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Pn(o,i):(i=hs(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?jf(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=Af,n}return i=t.child,t=i.sibling,n=Pn(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function pp(t,e){return e=Bc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ko(t,e,r,n){return n!==null&&ep(n),Ti(e,t.child,null,r),t=pp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xC(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=ld(Error(A(422))),Ko(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Bc({mode:"visible",children:n.children},s,0,null),i=hs(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Ti(e,t.child,null,a),e.child.memoizedState=jf(a),e.memoizedState=Af,i);if(!(e.mode&1))return Ko(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(A(419)),n=ld(i,n,void 0),Ko(t,e,a,n)}if(o=(a&t.childLanes)!==0,ot||o){if(n=Oe,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Br(t,s),Qt(n,t,s,-1))}return _p(),n=ld(Error(A(421))),Ko(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$C.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,vt=kn(s.nextSibling),wt=e,ge=!0,Kt=null,t!==null&&(Ct[It++]=jr,Ct[It++]=Nr,Ct[It++]=gs,jr=t.id,Nr=t.overflow,gs=e),e=pp(e,n.children),e.flags|=4096,e)}function ty(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ef(t.return,e,r)}function cd(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function T_(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Je(t,e,n.children,r),n=ve.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ty(t,r,e);else if(t.tag===19)ty(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ce(ve,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&rc(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),cd(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&rc(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}cd(e,!0,r,null,i);break;case"together":cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),vs|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,r=Pn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Pn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function SC(t,e,r){switch(e.tag){case 3:E_(e),ki();break;case 5:Y0(e);break;case 1:ct(e.type)&&Ql(e);break;case 4:ap(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ce(Zl,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ce(ve,ve.current&1),e.flags|=128,null):r&e.child.childLanes?k_(t,e,r):(ce(ve,ve.current&1),t=zr(t,e,r),t!==null?t.sibling:null);ce(ve,ve.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return T_(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ce(ve,ve.current),n)break;return null;case 22:case 23:return e.lanes=0,x_(t,e,r)}return zr(t,e,r)}var C_,Nf,I_,P_;C_=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Nf=function(){};I_=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,os(pr.current);var i=null;switch(r){case"input":s=Zd(t,s),n=Zd(t,n),i=[];break;case"select":s=_e({},s,{value:void 0}),n=_e({},n,{value:void 0}),i=[];break;case"textarea":s=rf(t,s),n=rf(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Gl)}sf(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Da.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Da.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&de("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};P_=function(t,e,r,n){r!==n&&(e.flags|=4)};function ea(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function EC(t,e,r){var n=e.pendingProps;switch(Zh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return ct(e.type)&&Jl(),We(e),null;case 3:return n=e.stateNode,Ci(),he(lt),he(Ke),lp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ho(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(Uf(Kt),Kt=null))),Nf(t,e),We(e),null;case 5:op(e);var s=os(Ga.current);if(r=e.type,t!==null&&e.stateNode!=null)I_(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(A(166));return We(e),null}if(t=os(pr.current),Ho(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[cr]=e,n[qa]=i,t=(e.mode&1)!==0,r){case"dialog":de("cancel",n),de("close",n);break;case"iframe":case"object":case"embed":de("load",n);break;case"video":case"audio":for(s=0;s<oa.length;s++)de(oa[s],n);break;case"source":de("error",n);break;case"img":case"image":case"link":de("error",n),de("load",n);break;case"details":de("toggle",n);break;case"input":ug(n,i),de("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},de("invalid",n);break;case"textarea":fg(n,i),de("invalid",n)}sf(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Wo(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Wo(n.textContent,o,t),s=["children",""+o]):Da.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&de("scroll",n)}switch(r){case"input":Do(n),dg(n,i,!0);break;case"textarea":Do(n),hg(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Gl)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=n0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[cr]=e,t[qa]=n,C_(t,e,!1,!1),e.stateNode=t;e:{switch(a=af(r,n),r){case"dialog":de("cancel",t),de("close",t),s=n;break;case"iframe":case"object":case"embed":de("load",t),s=n;break;case"video":case"audio":for(s=0;s<oa.length;s++)de(oa[s],t);s=n;break;case"source":de("error",t),s=n;break;case"img":case"image":case"link":de("error",t),de("load",t),s=n;break;case"details":de("toggle",t),s=n;break;case"input":ug(t,n),s=Zd(t,n),de("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=_e({},n,{value:void 0}),de("invalid",t);break;case"textarea":fg(t,n),s=rf(t,n),de("invalid",t);break;default:s=n}sf(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?a0(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&s0(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&La(t,l):typeof l=="number"&&La(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Da.hasOwnProperty(i)?l!=null&&i==="onScroll"&&de("scroll",t):l!=null&&Fh(t,i,l,a))}switch(r){case"input":Do(t),dg(t,n,!1);break;case"textarea":Do(t),hg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Rn(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ui(t,!!n.multiple,i,!1):n.defaultValue!=null&&ui(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Gl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return We(e),null;case 6:if(t&&e.stateNode!=null)P_(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(A(166));if(r=os(Ga.current),os(pr.current),Ho(e)){if(n=e.stateNode,r=e.memoizedProps,n[cr]=e,(i=n.nodeValue!==r)&&(t=wt,t!==null))switch(t.tag){case 3:Wo(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wo(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[cr]=e,e.stateNode=n}return We(e),null;case 13:if(he(ve),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&vt!==null&&e.mode&1&&!(e.flags&128))K0(),ki(),e.flags|=98560,i=!1;else if(i=Ho(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(A(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[cr]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),i=!1}else Kt!==null&&(Uf(Kt),Kt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Pe===0&&(Pe=3):_p())),e.updateQueue!==null&&(e.flags|=4),We(e),null);case 4:return Ci(),Nf(t,e),t===null&&Wa(e.stateNode.containerInfo),We(e),null;case 10:return np(e.type._context),We(e),null;case 17:return ct(e.type)&&Jl(),We(e),null;case 19:if(he(ve),i=e.memoizedState,i===null)return We(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)ea(i,!1);else{if(Pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=rc(t),a!==null){for(e.flags|=128,ea(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ce(ve,ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Se()>Pi&&(e.flags|=128,n=!0,ea(i,!1),e.lanes=4194304)}else{if(!n)if(t=rc(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ea(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ge)return We(e),null}else 2*Se()-i.renderingStartTime>Pi&&r!==1073741824&&(e.flags|=128,n=!0,ea(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Se(),e.sibling=null,r=ve.current,ce(ve,n?r&1|2:r&1),e):(We(e),null);case 22:case 23:return wp(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?yt&1073741824&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function kC(t,e){switch(Zh(e),e.tag){case 1:return ct(e.type)&&Jl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ci(),he(lt),he(Ke),lp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return op(e),null;case 13:if(he(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(ve),null;case 4:return Ci(),null;case 10:return np(e.type._context),null;case 22:case 23:return wp(),null;case 24:return null;default:return null}}var Go=!1,qe=!1,TC=typeof WeakSet=="function"?WeakSet:Set,R=null;function ii(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){be(t,e,n)}else r.current=null}function Of(t,e,r){try{r()}catch(n){be(t,e,n)}}var ry=!1;function CC(t,e){if(gf=Hl,t=R0(),Xh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,c=0,d=0,f=t,h=null;t:for(;;){for(var g;f!==r||s!==0&&f.nodeType!==3||(o=a+s),f!==i||n!==0&&f.nodeType!==3||(l=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===t)break t;if(h===r&&++c===s&&(o=a),h===i&&++d===n&&(l=a),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(yf={focusedElem:t,selectionRange:r},Hl=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,_=y.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?w:Vt(e.type,w),_);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(S){be(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return y=ry,ry=!1,y}function Ea(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Of(e,r,i)}s=s.next}while(s!==n)}}function Mc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Rf(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function A_(t){var e=t.alternate;e!==null&&(t.alternate=null,A_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cr],delete e[qa],delete e[_f],delete e[cC],delete e[uC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function j_(t){return t.tag===5||t.tag===3||t.tag===4}function ny(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $f(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Gl));else if(n!==4&&(t=t.child,t!==null))for($f(t,e,r),t=t.sibling;t!==null;)$f(t,e,r),t=t.sibling}function Df(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Df(t,e,r),t=t.sibling;t!==null;)Df(t,e,r),t=t.sibling}var De=null,Ht=!1;function Xr(t,e,r){for(r=r.child;r!==null;)N_(t,e,r),r=r.sibling}function N_(t,e,r){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(jc,r)}catch{}switch(r.tag){case 5:qe||ii(r,e);case 6:var n=De,s=Ht;De=null,Xr(t,e,r),De=n,Ht=s,De!==null&&(Ht?(t=De,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):De.removeChild(r.stateNode));break;case 18:De!==null&&(Ht?(t=De,r=r.stateNode,t.nodeType===8?rd(t.parentNode,r):t.nodeType===1&&rd(t,r),Ba(t)):rd(De,r.stateNode));break;case 4:n=De,s=Ht,De=r.stateNode.containerInfo,Ht=!0,Xr(t,e,r),De=n,Ht=s;break;case 0:case 11:case 14:case 15:if(!qe&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Of(r,e,a),s=s.next}while(s!==n)}Xr(t,e,r);break;case 1:if(!qe&&(ii(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){be(r,e,o)}Xr(t,e,r);break;case 21:Xr(t,e,r);break;case 22:r.mode&1?(qe=(n=qe)||r.memoizedState!==null,Xr(t,e,r),qe=n):Xr(t,e,r);break;default:Xr(t,e,r)}}function sy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new TC),e.forEach(function(n){var s=DC.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Mt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:De=o.stateNode,Ht=!1;break e;case 3:De=o.stateNode.containerInfo,Ht=!0;break e;case 4:De=o.stateNode.containerInfo,Ht=!0;break e}o=o.return}if(De===null)throw Error(A(160));N_(i,a,s),De=null,Ht=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){be(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)O_(e,t),e=e.sibling}function O_(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),rr(t),n&4){try{Ea(3,t,t.return),Mc(3,t)}catch(w){be(t,t.return,w)}try{Ea(5,t,t.return)}catch(w){be(t,t.return,w)}}break;case 1:Mt(e,t),rr(t),n&512&&r!==null&&ii(r,r.return);break;case 5:if(Mt(e,t),rr(t),n&512&&r!==null&&ii(r,r.return),t.flags&32){var s=t.stateNode;try{La(s,"")}catch(w){be(t,t.return,w)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&t0(s,i),af(o,a);var c=af(o,i);for(a=0;a<l.length;a+=2){var d=l[a],f=l[a+1];d==="style"?a0(s,f):d==="dangerouslySetInnerHTML"?s0(s,f):d==="children"?La(s,f):Fh(s,d,f,c)}switch(o){case"input":ef(s,i);break;case"textarea":r0(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ui(s,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?ui(s,!!i.multiple,i.defaultValue,!0):ui(s,!!i.multiple,i.multiple?[]:"",!1))}s[qa]=i}catch(w){be(t,t.return,w)}}break;case 6:if(Mt(e,t),rr(t),n&4){if(t.stateNode===null)throw Error(A(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){be(t,t.return,w)}}break;case 3:if(Mt(e,t),rr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ba(e.containerInfo)}catch(w){be(t,t.return,w)}break;case 4:Mt(e,t),rr(t);break;case 13:Mt(e,t),rr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yp=Se())),n&4&&sy(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(qe=(c=qe)||d,Mt(e,t),qe=c):Mt(e,t),rr(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(R=t,d=t.child;d!==null;){for(f=R=d;R!==null;){switch(h=R,g=h.child,h.tag){case 0:case 11:case 14:case 15:Ea(4,h,h.return);break;case 1:ii(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){be(n,r,w)}}break;case 5:ii(h,h.return);break;case 22:if(h.memoizedState!==null){ay(f);continue}}g!==null?(g.return=h,R=g):ay(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=i0("display",a))}catch(w){be(t,t.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){be(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mt(e,t),rr(t),n&4&&sy(t);break;case 21:break;default:Mt(e,t),rr(t)}}function rr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(j_(r)){var n=r;break e}r=r.return}throw Error(A(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(La(s,""),n.flags&=-33);var i=ny(t);Df(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=ny(t);$f(t,o,a);break;default:throw Error(A(161))}}catch(l){be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function IC(t,e,r){R=t,R_(t)}function R_(t,e,r){for(var n=(t.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Go;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||qe;o=Go;var c=qe;if(Go=a,(qe=l)&&!c)for(R=s;R!==null;)a=R,l=a.child,a.tag===22&&a.memoizedState!==null?oy(s):l!==null?(l.return=a,R=l):oy(s);for(;i!==null;)R=i,R_(i),i=i.sibling;R=s,Go=o,qe=c}iy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):iy(t)}}function iy(t){for(;R!==null;){var e=R;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qe||Mc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!qe)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Vt(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Vg(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Vg(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ba(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}qe||e.flags&512&&Rf(e)}catch(h){be(e,e.return,h)}}if(e===t){R=null;break}if(r=e.sibling,r!==null){r.return=e.return,R=r;break}R=e.return}}function ay(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var r=e.sibling;if(r!==null){r.return=e.return,R=r;break}R=e.return}}function oy(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Mc(4,e)}catch(l){be(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){be(e,s,l)}}var i=e.return;try{Rf(e)}catch(l){be(e,i,l)}break;case 5:var a=e.return;try{Rf(e)}catch(l){be(e,a,l)}}}catch(l){be(e,e.return,l)}if(e===t){R=null;break}var o=e.sibling;if(o!==null){o.return=e.return,R=o;break}R=e.return}}var PC=Math.ceil,ic=qr.ReactCurrentDispatcher,mp=qr.ReactCurrentOwner,Ot=qr.ReactCurrentBatchConfig,Y=0,Oe=null,ke=null,Me=0,yt=0,ai=Fn(0),Pe=0,Ya=null,vs=0,Uc=0,gp=0,ka=null,st=null,yp=0,Pi=1/0,Cr=null,ac=!1,Lf=null,Cn=null,Jo=!1,wn=null,oc=0,Ta=0,Ff=null,Sl=-1,El=0;function Qe(){return Y&6?Se():Sl!==-1?Sl:Sl=Se()}function In(t){return t.mode&1?Y&2&&Me!==0?Me&-Me:fC.transition!==null?(El===0&&(El=v0()),El):(t=te,t!==0||(t=window.event,t=t===void 0?16:k0(t.type)),t):1}function Qt(t,e,r,n){if(50<Ta)throw Ta=0,Ff=null,Error(A(185));fo(t,r,n),(!(Y&2)||t!==Oe)&&(t===Oe&&(!(Y&2)&&(Uc|=r),Pe===4&&fn(t,Me)),ut(t,n),r===1&&Y===0&&!(e.mode&1)&&(Pi=Se()+500,Dc&&Mn()))}function ut(t,e){var r=t.callbackNode;fT(t,e);var n=Wl(t,t===Oe?Me:0);if(n===0)r!==null&&gg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&gg(r),e===1)t.tag===0?dC(ly.bind(null,t)):W0(ly.bind(null,t)),oC(function(){!(Y&6)&&Mn()}),r=null;else{switch(w0(n)){case 1:r=Vh;break;case 4:r=g0;break;case 16:r=Vl;break;case 536870912:r=y0;break;default:r=Vl}r=z_(r,$_.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function $_(t,e){if(Sl=-1,El=0,Y&6)throw Error(A(327));var r=t.callbackNode;if(mi()&&t.callbackNode!==r)return null;var n=Wl(t,t===Oe?Me:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=lc(t,n);else{e=n;var s=Y;Y|=2;var i=L_();(Oe!==t||Me!==e)&&(Cr=null,Pi=Se()+500,fs(t,e));do try{NC();break}catch(o){D_(t,o)}while(!0);rp(),ic.current=i,Y=s,ke!==null?e=0:(Oe=null,Me=0,e=Pe)}if(e!==0){if(e===2&&(s=df(t),s!==0&&(n=s,e=Mf(t,s))),e===1)throw r=Ya,fs(t,0),fn(t,n),ut(t,Se()),r;if(e===6)fn(t,n);else{if(s=t.current.alternate,!(n&30)&&!AC(s)&&(e=lc(t,n),e===2&&(i=df(t),i!==0&&(n=i,e=Mf(t,i))),e===1))throw r=Ya,fs(t,0),fn(t,n),ut(t,Se()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(A(345));case 2:es(t,st,Cr);break;case 3:if(fn(t,n),(n&130023424)===n&&(e=yp+500-Se(),10<e)){if(Wl(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Qe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wf(es.bind(null,t,st,Cr),e);break}es(t,st,Cr);break;case 4:if(fn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-Jt(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=Se()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*PC(n/1960))-n,10<n){t.timeoutHandle=wf(es.bind(null,t,st,Cr),n);break}es(t,st,Cr);break;case 5:es(t,st,Cr);break;default:throw Error(A(329))}}}return ut(t,Se()),t.callbackNode===r?$_.bind(null,t):null}function Mf(t,e){var r=ka;return t.current.memoizedState.isDehydrated&&(fs(t,e).flags|=256),t=lc(t,e),t!==2&&(e=st,st=r,e!==null&&Uf(e)),t}function Uf(t){st===null?st=t:st.push.apply(st,t)}function AC(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Xt(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fn(t,e){for(e&=~gp,e&=~Uc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Jt(e),n=1<<r;t[r]=-1,e&=~n}}function ly(t){if(Y&6)throw Error(A(327));mi();var e=Wl(t,0);if(!(e&1))return ut(t,Se()),null;var r=lc(t,e);if(t.tag!==0&&r===2){var n=df(t);n!==0&&(e=n,r=Mf(t,n))}if(r===1)throw r=Ya,fs(t,0),fn(t,e),ut(t,Se()),r;if(r===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,es(t,st,Cr),ut(t,Se()),null}function vp(t,e){var r=Y;Y|=1;try{return t(e)}finally{Y=r,Y===0&&(Pi=Se()+500,Dc&&Mn())}}function ws(t){wn!==null&&wn.tag===0&&!(Y&6)&&mi();var e=Y;Y|=1;var r=Ot.transition,n=te;try{if(Ot.transition=null,te=1,t)return t()}finally{te=n,Ot.transition=r,Y=e,!(Y&6)&&Mn()}}function wp(){yt=ai.current,he(ai)}function fs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,aC(r)),ke!==null)for(r=ke.return;r!==null;){var n=r;switch(Zh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Jl();break;case 3:Ci(),he(lt),he(Ke),lp();break;case 5:op(n);break;case 4:Ci();break;case 13:he(ve);break;case 19:he(ve);break;case 10:np(n.type._context);break;case 22:case 23:wp()}r=r.return}if(Oe=t,ke=t=Pn(t.current,null),Me=yt=e,Pe=0,Ya=null,gp=Uc=vs=0,st=ka=null,as!==null){for(e=0;e<as.length;e++)if(r=as[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}as=null}return t}function D_(t,e){do{var r=ke;try{if(rp(),_l.current=sc,nc){for(var n=we.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}nc=!1}if(ys=0,Ne=Ie=we=null,Sa=!1,Ja=0,mp.current=null,r===null||r.return===null){Pe=1,Ya=e,ke=null;break}e:{var i=t,a=r.return,o=r,l=e;if(e=Me,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Jg(a);if(g!==null){g.flags&=-257,Qg(g,a,o,i,e),g.mode&1&&Gg(i,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){Gg(i,c,e),_p();break e}l=Error(A(426))}}else if(ge&&o.mode&1){var _=Jg(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Qg(_,a,o,i,e),ep(Ii(l,o));break e}}i=l=Ii(l,o),Pe!==4&&(Pe=2),ka===null?ka=[i]:ka.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=w_(i,l,e);zg(i,m);break e;case 1:o=l;var p=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Cn===null||!Cn.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=__(i,o,e);zg(i,S);break e}}i=i.return}while(i!==null)}M_(r)}catch(T){e=T,ke===r&&r!==null&&(ke=r=r.return);continue}break}while(!0)}function L_(){var t=ic.current;return ic.current=sc,t===null?sc:t}function _p(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Oe===null||!(vs&268435455)&&!(Uc&268435455)||fn(Oe,Me)}function lc(t,e){var r=Y;Y|=2;var n=L_();(Oe!==t||Me!==e)&&(Cr=null,fs(t,e));do try{jC();break}catch(s){D_(t,s)}while(!0);if(rp(),Y=r,ic.current=n,ke!==null)throw Error(A(261));return Oe=null,Me=0,Pe}function jC(){for(;ke!==null;)F_(ke)}function NC(){for(;ke!==null&&!nT();)F_(ke)}function F_(t){var e=B_(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?M_(t):ke=e,mp.current=null}function M_(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=kC(r,e),r!==null){r.flags&=32767,ke=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pe=6,ke=null;return}}else if(r=EC(r,e,yt),r!==null){ke=r;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Pe===0&&(Pe=5)}function es(t,e,r){var n=te,s=Ot.transition;try{Ot.transition=null,te=1,OC(t,e,r,n)}finally{Ot.transition=s,te=n}return null}function OC(t,e,r,n){do mi();while(wn!==null);if(Y&6)throw Error(A(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(hT(t,i),t===Oe&&(ke=Oe=null,Me=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Jo||(Jo=!0,z_(Vl,function(){return mi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ot.transition,Ot.transition=null;var a=te;te=1;var o=Y;Y|=4,mp.current=null,CC(t,r),O_(r,t),ZT(yf),Hl=!!gf,yf=gf=null,t.current=r,IC(r),sT(),Y=o,te=a,Ot.transition=i}else t.current=r;if(Jo&&(Jo=!1,wn=t,oc=s),i=t.pendingLanes,i===0&&(Cn=null),oT(r.stateNode),ut(t,Se()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(ac)throw ac=!1,t=Lf,Lf=null,t;return oc&1&&t.tag!==0&&mi(),i=t.pendingLanes,i&1?t===Ff?Ta++:(Ta=0,Ff=t):Ta=0,Mn(),null}function mi(){if(wn!==null){var t=w0(oc),e=Ot.transition,r=te;try{if(Ot.transition=null,te=16>t?16:t,wn===null)var n=!1;else{if(t=wn,wn=null,oc=0,Y&6)throw Error(A(331));var s=Y;for(Y|=4,R=t.current;R!==null;){var i=R,a=i.child;if(R.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(R=c;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:Ea(8,d,i)}var f=d.child;if(f!==null)f.return=d,R=f;else for(;R!==null;){d=R;var h=d.sibling,g=d.return;if(A_(d),d===c){R=null;break}if(h!==null){h.return=g,R=h;break}R=g}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}R=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,R=a;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ea(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,R=m;break e}R=i.return}}var p=t.current;for(R=p;R!==null;){a=R;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,R=v;else e:for(a=p;R!==null;){if(o=R,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Mc(9,o)}}catch(T){be(o,o.return,T)}if(o===a){R=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,R=S;break e}R=o.return}}if(Y=s,Mn(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(jc,t)}catch{}n=!0}return n}finally{te=r,Ot.transition=e}}return!1}function cy(t,e,r){e=Ii(r,e),e=w_(t,e,1),t=Tn(t,e,1),e=Qe(),t!==null&&(fo(t,1,e),ut(t,e))}function be(t,e,r){if(t.tag===3)cy(t,t,r);else for(;e!==null;){if(e.tag===3){cy(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Cn===null||!Cn.has(n))){t=Ii(r,t),t=__(e,t,1),e=Tn(e,t,1),t=Qe(),e!==null&&(fo(e,1,t),ut(e,t));break}}e=e.return}}function RC(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Qe(),t.pingedLanes|=t.suspendedLanes&r,Oe===t&&(Me&r)===r&&(Pe===4||Pe===3&&(Me&130023424)===Me&&500>Se()-yp?fs(t,0):gp|=r),ut(t,e)}function U_(t,e){e===0&&(t.mode&1?(e=Mo,Mo<<=1,!(Mo&130023424)&&(Mo=4194304)):e=1);var r=Qe();t=Br(t,e),t!==null&&(fo(t,e,r),ut(t,r))}function $C(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),U_(t,r)}function DC(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(A(314))}n!==null&&n.delete(e),U_(t,r)}var B_;B_=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||lt.current)ot=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ot=!1,SC(t,e,r);ot=!!(t.flags&131072)}else ot=!1,ge&&e.flags&1048576&&H0(e,Yl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;xl(t,e),t=e.pendingProps;var s=Ei(e,Ke.current);pi(e,r),s=up(null,e,n,t,s,r);var i=dp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ct(n)?(i=!0,Ql(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ip(e),s.updater=Fc,e.stateNode=s,s._reactInternals=e,Tf(e,n,t,r),e=Pf(null,e,n,!0,i,r)):(e.tag=0,ge&&i&&Yh(e),Je(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(xl(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=FC(n),t=Vt(n,t),s){case 0:e=If(null,e,n,t,r);break e;case 1:e=Zg(null,e,n,t,r);break e;case 11:e=Xg(null,e,n,t,r);break e;case 14:e=Yg(null,e,n,Vt(n.type,t),r);break e}throw Error(A(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Vt(n,s),If(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Vt(n,s),Zg(t,e,n,s,r);case 3:e:{if(E_(e),t===null)throw Error(A(387));n=e.pendingProps,i=e.memoizedState,s=i.element,X0(t,e),tc(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ii(Error(A(423)),e),e=ey(t,e,n,r,s);break e}else if(n!==s){s=Ii(Error(A(424)),e),e=ey(t,e,n,r,s);break e}else for(vt=kn(e.stateNode.containerInfo.firstChild),wt=e,ge=!0,Kt=null,r=J0(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ki(),n===s){e=zr(t,e,r);break e}Je(t,e,n,r)}e=e.child}return e;case 5:return Y0(e),t===null&&Sf(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,vf(n,s)?a=null:i!==null&&vf(n,i)&&(e.flags|=32),S_(t,e),Je(t,e,a,r),e.child;case 6:return t===null&&Sf(e),null;case 13:return k_(t,e,r);case 4:return ap(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ti(e,null,n,r):Je(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Vt(n,s),Xg(t,e,n,s,r);case 7:return Je(t,e,e.pendingProps,r),e.child;case 8:return Je(t,e,e.pendingProps.children,r),e.child;case 12:return Je(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ce(Zl,n._currentValue),n._currentValue=a,i!==null)if(Xt(i.value,a)){if(i.children===s.children&&!lt.current){e=zr(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Dr(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Ef(i.return,r,e),o.lanes|=r;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(A(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),Ef(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Je(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,pi(e,r),s=$t(s),n=n(s),e.flags|=1,Je(t,e,n,r),e.child;case 14:return n=e.type,s=Vt(n,e.pendingProps),s=Vt(n.type,s),Yg(t,e,n,s,r);case 15:return b_(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Vt(n,s),xl(t,e),e.tag=1,ct(n)?(t=!0,Ql(e)):t=!1,pi(e,r),v_(e,n,s),Tf(e,n,s,r),Pf(null,e,n,!0,t,r);case 19:return T_(t,e,r);case 22:return x_(t,e,r)}throw Error(A(156,e.tag))};function z_(t,e){return m0(t,e)}function LC(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,e,r,n){return new LC(t,e,r,n)}function bp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FC(t){if(typeof t=="function")return bp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uh)return 11;if(t===Bh)return 14}return 2}function Pn(t,e){var r=t.alternate;return r===null?(r=jt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function kl(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")bp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Qs:return hs(r.children,s,i,e);case Mh:a=8,s|=8;break;case Jd:return t=jt(12,r,e,s|2),t.elementType=Jd,t.lanes=i,t;case Qd:return t=jt(13,r,e,s),t.elementType=Qd,t.lanes=i,t;case Xd:return t=jt(19,r,e,s),t.elementType=Xd,t.lanes=i,t;case Yw:return Bc(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qw:a=10;break e;case Xw:a=9;break e;case Uh:a=11;break e;case Bh:a=14;break e;case on:a=16,n=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=jt(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function hs(t,e,r,n){return t=jt(7,t,n,e),t.lanes=r,t}function Bc(t,e,r,n){return t=jt(22,t,n,e),t.elementType=Yw,t.lanes=r,t.stateNode={isHidden:!1},t}function ud(t,e,r){return t=jt(6,t,null,e),t.lanes=r,t}function dd(t,e,r){return e=jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MC(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hu(0),this.expirationTimes=Hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hu(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xp(t,e,r,n,s,i,a,o,l){return t=new MC(t,e,r,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ip(i),t}function UC(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function V_(t){if(!t)return $n;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var r=t.type;if(ct(r))return V0(t,r,e)}return e}function W_(t,e,r,n,s,i,a,o,l){return t=xp(r,n,!0,t,s,i,a,o,l),t.context=V_(null),r=t.current,n=Qe(),s=In(r),i=Dr(n,s),i.callback=e??null,Tn(r,i,s),t.current.lanes=s,fo(t,s,n),ut(t,n),t}function zc(t,e,r,n){var s=e.current,i=Qe(),a=In(s);return r=V_(r),e.context===null?e.context=r:e.pendingContext=r,e=Dr(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Tn(s,e,a),t!==null&&(Qt(t,s,a,i),wl(t,s,a)),a}function cc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Sp(t,e){uy(t,e),(t=t.alternate)&&uy(t,e)}function BC(){return null}var H_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ep(t){this._internalRoot=t}Vc.prototype.render=Ep.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));zc(t,e,null,null)};Vc.prototype.unmount=Ep.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ws(function(){zc(null,t,null,null)}),e[Ur]=null}};function Vc(t){this._internalRoot=t}Vc.prototype.unstable_scheduleHydration=function(t){if(t){var e=x0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<dn.length&&e!==0&&e<dn[r].priority;r++);dn.splice(r,0,t),r===0&&E0(t)}};function kp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dy(){}function zC(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=cc(a);i.call(c)}}var a=W_(e,n,t,0,null,!1,!1,"",dy);return t._reactRootContainer=a,t[Ur]=a.current,Wa(t.nodeType===8?t.parentNode:t),ws(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=cc(l);o.call(c)}}var l=xp(t,0,!1,null,null,!1,!1,"",dy);return t._reactRootContainer=l,t[Ur]=l.current,Wa(t.nodeType===8?t.parentNode:t),ws(function(){zc(e,l,r,n)}),l}function Hc(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=cc(a);o.call(l)}}zc(e,a,t,s)}else a=zC(r,e,t,s,n);return cc(a)}_0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=aa(e.pendingLanes);r!==0&&(Wh(e,r|1),ut(e,Se()),!(Y&6)&&(Pi=Se()+500,Mn()))}break;case 13:ws(function(){var n=Br(t,1);if(n!==null){var s=Qe();Qt(n,t,1,s)}}),Sp(t,1)}};Hh=function(t){if(t.tag===13){var e=Br(t,134217728);if(e!==null){var r=Qe();Qt(e,t,134217728,r)}Sp(t,134217728)}};b0=function(t){if(t.tag===13){var e=In(t),r=Br(t,e);if(r!==null){var n=Qe();Qt(r,t,e,n)}Sp(t,e)}};x0=function(){return te};S0=function(t,e){var r=te;try{return te=t,e()}finally{te=r}};lf=function(t,e,r){switch(e){case"input":if(ef(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=$c(n);if(!s)throw Error(A(90));e0(n),ef(n,s)}}}break;case"textarea":r0(t,r);break;case"select":e=r.value,e!=null&&ui(t,!!r.multiple,e,!1)}};c0=vp;u0=ws;var VC={usingClientEntryPoint:!1,Events:[po,ei,$c,o0,l0,vp]},ta={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WC={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=h0(t),t===null?null:t.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||BC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qo.isDisabled&&Qo.supportsFiber)try{jc=Qo.inject(WC),hr=Qo}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VC;xt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kp(e))throw Error(A(200));return UC(t,e,null,r)};xt.createRoot=function(t,e){if(!kp(t))throw Error(A(299));var r=!1,n="",s=H_;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=xp(t,1,!1,null,null,r,!1,n,s),t[Ur]=e.current,Wa(t.nodeType===8?t.parentNode:t),new Ep(e)};xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=h0(e),t=t===null?null:t.stateNode,t};xt.flushSync=function(t){return ws(t)};xt.hydrate=function(t,e,r){if(!Wc(e))throw Error(A(200));return Hc(null,t,e,!0,r)};xt.hydrateRoot=function(t,e,r){if(!kp(t))throw Error(A(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=H_;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=W_(e,null,t,1,r??null,s,!1,i,a),t[Ur]=e.current,Wa(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Vc(e)};xt.render=function(t,e,r){if(!Wc(e))throw Error(A(200));return Hc(null,t,e,!1,r)};xt.unmountComponentAtNode=function(t){if(!Wc(t))throw Error(A(40));return t._reactRootContainer?(ws(function(){Hc(null,null,t,!1,function(){t._reactRootContainer=null,t[Ur]=null})}),!0):!1};xt.unstable_batchedUpdates=vp;xt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Wc(r))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Hc(t,e,r,!1,n)};xt.version="18.3.1-next-f1338f8080-20240426";function q_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q_)}catch(t){console.error(t)}}q_(),qw.exports=xt;var HC=qw.exports,fy=HC;Kd.createRoot=fy.createRoot,Kd.hydrateRoot=fy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Za(){return Za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Za.apply(this,arguments)}var _n;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_n||(_n={}));const hy="popstate";function qC(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return Bf("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:uc(s)}return GC(e,r,null,t)}function Ee(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function K_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KC(){return Math.random().toString(36).substr(2,8)}function py(t,e){return{usr:t.state,key:t.key,idx:e}}function Bf(t,e,r,n){return r===void 0&&(r=null),Za({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fi(e):e,{state:r,key:e&&e.key||n||KC()})}function uc(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Fi(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function GC(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o=_n.Pop,l=null,c=d();c==null&&(c=0,a.replaceState(Za({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function f(){o=_n.Pop;let _=d(),m=_==null?null:_-c;c=_,l&&l({action:o,location:w.location,delta:m})}function h(_,m){o=_n.Push;let p=Bf(w.location,_,m);c=d()+1;let v=py(p,c),S=w.createHref(p);try{a.pushState(v,"",S)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(S)}i&&l&&l({action:o,location:w.location,delta:1})}function g(_,m){o=_n.Replace;let p=Bf(w.location,_,m);c=d();let v=py(p,c),S=w.createHref(p);a.replaceState(v,"",S),i&&l&&l({action:o,location:w.location,delta:0})}function y(_){let m=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof _=="string"?_:uc(_);return p=p.replace(/ $/,"%20"),Ee(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let w={get action(){return o},get location(){return t(s,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(hy,f),l=_,()=>{s.removeEventListener(hy,f),l=null}},createHref(_){return e(s,_)},createURL:y,encodeLocation(_){let m=y(_);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:g,go(_){return a.go(_)}};return w}var my;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(my||(my={}));function JC(t,e,r){return r===void 0&&(r="/"),QC(t,e,r)}function QC(t,e,r,n){let s=typeof e=="string"?Fi(e):e,i=Tp(s.pathname||"/",r);if(i==null)return null;let a=G_(t);XC(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=cI(i);o=aI(a[l],c)}return o}function G_(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(Ee(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=An([n,l.relativePath]),d=r.concat(l);i.children&&i.children.length>0&&(Ee(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),G_(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:sI(c,i.index),routesMeta:d})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of J_(i.path))s(i,a,l)}),e}function J_(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=J_(n.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function XC(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:iI(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const YC=/^:[\w-]+$/,ZC=3,eI=2,tI=1,rI=10,nI=-2,gy=t=>t==="*";function sI(t,e){let r=t.split("/"),n=r.length;return r.some(gy)&&(n+=nI),e&&(n+=eI),r.filter(s=>!gy(s)).reduce((s,i)=>s+(YC.test(i)?ZC:i===""?tI:rI),n)}function iI(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function aI(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=oI({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:An([i,f.pathname]),pathnameBase:hI(An([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=An([i,f.pathnameBase]))}return a}function oI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=lI(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let w=o[f]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=o[f];return g&&!y?c[h]=void 0:c[h]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function lI(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),K_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function cI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return K_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Tp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function uI(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Fi(t):t;return{pathname:r?r.startsWith("/")?r:dI(r,e):e,search:pI(n),hash:mI(s)}}function dI(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function fd(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fI(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Cp(t,e){let r=fI(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Ip(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Fi(t):(s=Za({},t),Ee(!s.pathname||!s.pathname.includes("?"),fd("?","pathname","search",s)),Ee(!s.pathname||!s.pathname.includes("#"),fd("#","pathname","hash",s)),Ee(!s.search||!s.search.includes("#"),fd("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}o=f>=0?e[f]:"/"}let l=uI(s,o),c=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const An=t=>t.join("/").replace(/\/\/+/g,"/"),hI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Q_=["post","put","patch","delete"];new Set(Q_);const yI=["get",...Q_];new Set(yI);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eo(){return eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eo.apply(this,arguments)}const Pp=b.createContext(null),vI=b.createContext(null),Un=b.createContext(null),qc=b.createContext(null),Kr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),X_=b.createContext(null);function wI(t,e){let{relative:r}=e===void 0?{}:e;Mi()||Ee(!1);let{basename:n,navigator:s}=b.useContext(Un),{hash:i,pathname:a,search:o}=Z_(t,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:An([n,a])),s.createHref({pathname:l,search:o,hash:i})}function Mi(){return b.useContext(qc)!=null}function Ui(){return Mi()||Ee(!1),b.useContext(qc).location}function Y_(t){b.useContext(Un).static||b.useLayoutEffect(t)}function Bn(){let{isDataRoute:t}=b.useContext(Kr);return t?OI():_I()}function _I(){Mi()||Ee(!1);let t=b.useContext(Pp),{basename:e,future:r,navigator:n}=b.useContext(Un),{matches:s}=b.useContext(Kr),{pathname:i}=Ui(),a=JSON.stringify(Cp(s,r.v7_relativeSplatPath)),o=b.useRef(!1);return Y_(()=>{o.current=!0}),b.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=Ip(c,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:An([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,a,i,t])}function bI(){let{matches:t}=b.useContext(Kr),e=t[t.length-1];return e?e.params:{}}function Z_(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=b.useContext(Un),{matches:s}=b.useContext(Kr),{pathname:i}=Ui(),a=JSON.stringify(Cp(s,n.v7_relativeSplatPath));return b.useMemo(()=>Ip(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function xI(t,e){return SI(t,e)}function SI(t,e,r,n){Mi()||Ee(!1);let{navigator:s,static:i}=b.useContext(Un),{matches:a}=b.useContext(Kr),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ui(),f;if(e){var h;let m=typeof e=="string"?Fi(e):e;c==="/"||(h=m.pathname)!=null&&h.startsWith(c)||Ee(!1),f=m}else f=d;let g=f.pathname||"/",y=g;if(c!=="/"){let m=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(m.length).join("/")}let w=JC(t,{pathname:y}),_=II(w&&w.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:An([c,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:An([c,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),a,r,n);return e&&_?b.createElement(qc.Provider,{value:{location:eo({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_n.Pop}},_):_}function EI(){let t=NI(),e=gI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),r?b.createElement("pre",{style:s},r):null,null)}const kI=b.createElement(EI,null);class TI extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?b.createElement(Kr.Provider,{value:this.props.routeContext},b.createElement(X_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CI(t){let{routeContext:e,match:r,children:n}=t,s=b.useContext(Pp);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(Kr.Provider,{value:e},n)}function II(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Ee(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:h,errors:g}=r,y=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,f,h)=>{let g,y=!1,w=null,_=null;r&&(g=o&&f.route.id?o[f.route.id]:void 0,w=f.route.errorElement||kI,l&&(c<0&&h===0?(RI("route-fallback"),y=!0,_=null):c===h&&(y=!0,_=f.route.hydrateFallbackElement||null)));let m=e.concat(a.slice(0,h+1)),p=()=>{let v;return g?v=w:y?v=_:f.route.Component?v=b.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=d,b.createElement(CI,{match:f,routeContext:{outlet:d,matches:m,isDataRoute:r!=null},children:v})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?b.createElement(TI,{location:r.location,revalidation:r.revalidation,component:w,error:g,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var eb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(eb||{}),tb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tb||{});function PI(t){let e=b.useContext(Pp);return e||Ee(!1),e}function AI(t){let e=b.useContext(vI);return e||Ee(!1),e}function jI(t){let e=b.useContext(Kr);return e||Ee(!1),e}function rb(t){let e=jI(),r=e.matches[e.matches.length-1];return r.route.id||Ee(!1),r.route.id}function NI(){var t;let e=b.useContext(X_),r=AI(),n=rb();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function OI(){let{router:t}=PI(eb.UseNavigateStable),e=rb(tb.UseNavigateStable),r=b.useRef(!1);return Y_(()=>{r.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,eo({fromRouteId:e},i)))},[t,e])}const yy={};function RI(t,e,r){yy[t]||(yy[t]=!0)}function $I(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function nb(t){let{to:e,replace:r,state:n,relative:s}=t;Mi()||Ee(!1);let{future:i,static:a}=b.useContext(Un),{matches:o}=b.useContext(Kr),{pathname:l}=Ui(),c=Bn(),d=Ip(e,Cp(o,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return b.useEffect(()=>c(JSON.parse(f),{replace:r,state:n,relative:s}),[c,f,s,r,n]),null}function ht(t){Ee(!1)}function DI(t){let{basename:e="/",children:r=null,location:n,navigationType:s=_n.Pop,navigator:i,static:a=!1,future:o}=t;Mi()&&Ee(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:a,future:eo({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof n=="string"&&(n=Fi(n));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:y="default"}=n,w=b.useMemo(()=>{let _=Tp(d,l);return _==null?null:{location:{pathname:_,search:f,hash:h,state:g,key:y},navigationType:s}},[l,d,f,h,g,y,s]);return w==null?null:b.createElement(Un.Provider,{value:c},b.createElement(qc.Provider,{children:r,value:w}))}function LI(t){let{children:e,location:r}=t;return xI(zf(e),r)}new Promise(()=>{});function zf(t,e){e===void 0&&(e=[]);let r=[];return b.Children.forEach(t,(n,s)=>{if(!b.isValidElement(n))return;let i=[...e,s];if(n.type===b.Fragment){r.push.apply(r,zf(n.props.children,i));return}n.type!==ht&&Ee(!1),!n.props.index||!n.props.children||Ee(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=zf(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vf(){return Vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vf.apply(this,arguments)}function FI(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function MI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function UI(t,e){return t.button===0&&(!e||e==="_self")&&!MI(t)}const BI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zI="6";try{window.__reactRouterVersion=zI}catch{}const VI="startTransition",vy=Rk[VI];function WI(t){let{basename:e,children:r,future:n,window:s}=t,i=b.useRef();i.current==null&&(i.current=qC({window:s,v5Compat:!0}));let a=i.current,[o,l]=b.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},d=b.useCallback(f=>{c&&vy?vy(()=>l(f)):l(f)},[l,c]);return b.useLayoutEffect(()=>a.listen(d),[a,d]),b.useEffect(()=>$I(n),[n]),b.createElement(DI,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const HI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pt=b.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:c,preventScrollReset:d,viewTransition:f}=e,h=FI(e,BI),{basename:g}=b.useContext(Un),y,w=!1;if(typeof c=="string"&&qI.test(c)&&(y=c,HI))try{let v=new URL(window.location.href),S=c.startsWith("//")?new URL(v.protocol+c):new URL(c),T=Tp(S.pathname,g);S.origin===v.origin&&T!=null?c=T+S.search+S.hash:w=!0}catch{}let _=wI(c,{relative:s}),m=KI(c,{replace:a,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:f});function p(v){n&&n(v),v.defaultPrevented||m(v)}return b.createElement("a",Vf({},h,{href:y||_,onClick:w||i?n:p,ref:r,target:l}))});var wy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wy||(wy={}));var _y;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_y||(_y={}));function KI(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=Bn(),c=Ui(),d=Z_(t,{relative:a});return b.useCallback(f=>{if(UI(f,r)){f.preventDefault();let h=n!==void 0?n:uc(c)===uc(d);l(t,{replace:h,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,d,n,s,r,t,i,a,o])}var by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},GI=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},ib={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,f=(i&3)<<4|o>>4;let h=(o&15)<<2|c>>6,g=c&63;l||(g=64,a||(h=64)),n.push(r[d],r[f],r[h],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||f==null)throw new JI;const h=i<<2|o>>4;if(n.push(h),c!==64){const g=o<<4&240|c>>2;if(n.push(g),f!==64){const y=c<<6&192|f;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QI=function(t){const e=sb(t);return ib.encodeByteArray(e,!0)},ab=function(t){return QI(t).replace(/\./g,"")},ob=function(t){try{return ib.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=()=>XI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof by>"u")return;const t=by.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},e1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ob(t[1]);return e&&JSON.parse(e)},Ap=()=>{try{return YI()||ZI()||e1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},t1=t=>{var e,r;return(r=(e=Ap())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},lb=()=>{var t;return(t=Ap())===null||t===void 0?void 0:t.config},cb=t=>{var e;return(e=Ap())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r1=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function s1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ub(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function i1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function a1(){const t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function db(){try{return typeof indexedDB=="object"}catch{return!1}}function fb(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}function o1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="FirebaseError";class _r extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=l1,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Is.prototype.create)}}class Is{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?c1(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new _r(s,o,n)}}function c1(t,e){return t.replace(u1,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const u1=/\{\$([^}]+)}/g;function d1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function to(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(xy(i)&&xy(a)){if(!to(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function xy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function la(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ca(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function f1(t,e){const r=new h1(t,e);return r.subscribe.bind(r)}class h1{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");p1(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=hd),s.error===void 0&&(s.error=hd),s.complete===void 0&&(s.complete=hd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p1(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function hd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=1e3,g1=2,y1=4*60*60*1e3,v1=.5;function Sy(t,e=m1,r=g1){const n=e*Math.pow(r,t),s=Math.round(v1*n*(Math.random()-.5)*2);return Math.min(y1,n+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return t&&t._delegate?t._delegate:t}class wr{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new r1;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(b1(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:_1(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _1(t){return t===ts?void 0:t}function b1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new w1(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const S1={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},E1=ae.INFO,k1={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},T1=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=k1[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jp{constructor(e){this.name=e,this._logLevel=E1,this._logHandler=T1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const C1=(t,e)=>e.some(r=>t instanceof r);let Ey,ky;function I1(){return Ey||(Ey=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P1(){return ky||(ky=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hb=new WeakMap,Wf=new WeakMap,pb=new WeakMap,pd=new WeakMap,Np=new WeakMap;function A1(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(jn(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&hb.set(r,t)}).catch(()=>{}),Np.set(e,t),e}function j1(t){if(Wf.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Wf.set(t,e)}let Hf={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pb.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return jn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function N1(t){Hf=t(Hf)}function O1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(md(this),e,...r);return pb.set(n,e.sort?e.sort():[e]),jn(n)}:P1().includes(t)?function(...e){return t.apply(md(this),e),jn(hb.get(this))}:function(...e){return jn(t.apply(md(this),e))}}function R1(t){return typeof t=="function"?O1(t):(t instanceof IDBTransaction&&j1(t),C1(t,I1())?new Proxy(t,Hf):t)}function jn(t){if(t instanceof IDBRequest)return A1(t);if(pd.has(t))return pd.get(t);const e=R1(t);return e!==t&&(pd.set(t,e),Np.set(e,t)),e}const md=t=>Np.get(t);function mb(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=jn(a);return n&&a.addEventListener("upgradeneeded",l=>{n(jn(a.result),l.oldVersion,l.newVersion,jn(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const $1=["get","getKey","getAll","getAllKeys","count"],D1=["put","add","delete","clear"],gd=new Map;function Ty(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gd.get(e))return gd.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=D1.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||$1.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return gd.set(e,i),i}N1(t=>({...t,get:(e,r,n)=>Ty(e,r)||t.get(e,r,n),has:(e,r)=>!!Ty(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(F1(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function F1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qf="@firebase/app",Cy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new jp("@firebase/app"),M1="@firebase/app-compat",U1="@firebase/analytics-compat",B1="@firebase/analytics",z1="@firebase/app-check-compat",V1="@firebase/app-check",W1="@firebase/auth",H1="@firebase/auth-compat",q1="@firebase/database",K1="@firebase/data-connect",G1="@firebase/database-compat",J1="@firebase/functions",Q1="@firebase/functions-compat",X1="@firebase/installations",Y1="@firebase/installations-compat",Z1="@firebase/messaging",eP="@firebase/messaging-compat",tP="@firebase/performance",rP="@firebase/performance-compat",nP="@firebase/remote-config",sP="@firebase/remote-config-compat",iP="@firebase/storage",aP="@firebase/storage-compat",oP="@firebase/firestore",lP="@firebase/vertexai-preview",cP="@firebase/firestore-compat",uP="firebase",dP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="[DEFAULT]",fP={[qf]:"fire-core",[M1]:"fire-core-compat",[B1]:"fire-analytics",[U1]:"fire-analytics-compat",[V1]:"fire-app-check",[z1]:"fire-app-check-compat",[W1]:"fire-auth",[H1]:"fire-auth-compat",[q1]:"fire-rtdb",[K1]:"fire-data-connect",[G1]:"fire-rtdb-compat",[J1]:"fire-fn",[Q1]:"fire-fn-compat",[X1]:"fire-iid",[Y1]:"fire-iid-compat",[Z1]:"fire-fcm",[eP]:"fire-fcm-compat",[tP]:"fire-perf",[rP]:"fire-perf-compat",[nP]:"fire-rc",[sP]:"fire-rc-compat",[iP]:"fire-gcs",[aP]:"fire-gcs-compat",[oP]:"fire-fst",[cP]:"fire-fst-compat",[lP]:"fire-vertex","fire-js":"fire-js",[uP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Map,hP=new Map,Gf=new Map;function Iy(t,e){try{t.container.addComponent(e)}catch(r){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Wr(t){const e=t.name;if(Gf.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;Gf.set(e,t);for(const r of dc.values())Iy(r,t);for(const r of hP.values())Iy(r,t);return!0}function Bi(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ur(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nn=new Is("app","Firebase",pP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=dP;function gb(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Kf,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Nn.create("bad-app-name",{appName:String(s)});if(r||(r=lb()),!r)throw Nn.create("no-options");const i=dc.get(s);if(i){if(to(r,i.options)&&to(n,i.config))return i;throw Nn.create("duplicate-app",{appName:s})}const a=new x1(s);for(const l of Gf.values())a.addComponent(l);const o=new mP(r,n,a);return dc.set(s,o),o}function yb(t=Kf){const e=dc.get(t);if(!e&&t===Kf&&lb())return gb();if(!e)throw Nn.create("no-app",{appName:t});return e}function mr(t,e,r){var n;let s=(n=fP[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(o.join(" "));return}Wr(new wr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="firebase-heartbeat-database",yP=1,ro="firebase-heartbeat-store";let yd=null;function vb(){return yd||(yd=mb(gP,yP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ro)}catch(r){console.warn(r)}}}}).catch(t=>{throw Nn.create("idb-open",{originalErrorMessage:t.message})})),yd}async function vP(t){try{const r=(await vb()).transaction(ro),n=await r.objectStore(ro).get(wb(t));return await r.done,n}catch(e){if(e instanceof _r)Vr.warn(e.message);else{const r=Nn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vr.warn(r.message)}}}async function Py(t,e){try{const n=(await vb()).transaction(ro,"readwrite");await n.objectStore(ro).put(e,wb(t)),await n.done}catch(r){if(r instanceof _r)Vr.warn(r.message);else{const n=Nn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Vr.warn(n.message)}}}function wb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=1024,_P=30*24*60*60*1e3;class bP{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new SP(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ay();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=_P}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Vr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Ay(),{heartbeatsToSend:n,unsentEntries:s}=xP(this._heartbeatsCache.heartbeats),i=ab(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Vr.warn(r),""}}}function Ay(){return new Date().toISOString().substring(0,10)}function xP(t,e=wP){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),jy(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),jy(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class SP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return db()?fb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await vP(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Py(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Py(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jy(t){return ab(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){Wr(new wr("platform-logger",e=>new L1(e),"PRIVATE")),Wr(new wr("heartbeat",e=>new bP(e),"PRIVATE")),mr(qf,Cy,t),mr(qf,Cy,"esm2017"),mr("fire-js","")}EP("");function Op(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function _b(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kP=_b,bb=new Is("auth","Firebase",_b());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new jp("@firebase/auth");function TP(t,...e){fc.logLevel<=ae.WARN&&fc.warn(`Auth (${yo}): ${t}`,...e)}function Tl(t,...e){fc.logLevel<=ae.ERROR&&fc.error(`Auth (${yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,...e){throw Rp(t,...e)}function gr(t,...e){return Rp(t,...e)}function xb(t,e,r){const n=Object.assign(Object.assign({},kP()),{[e]:r});return new Is("auth","Firebase",n).create(e,{appName:t.name})}function Lr(t){return xb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rp(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return bb.create(t,...e)}function V(t,e,...r){if(!t)throw Rp(e,...r)}function Or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tl(e),new Error(e)}function Hr(t,e){t||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function CP(){return Ny()==="http:"||Ny()==="https:"}function Ny(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CP()||ub()||"connection"in navigator)?navigator.onLine:!0}function PP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,r){this.shortDelay=e,this.longDelay=r,Hr(r>e,"Short delay should be less than long delay!"),this.isMobile=n1()||i1()}get(){return IP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,e){Hr(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=new vo(3e4,6e4);function zn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gr(t,e,r,n,s={}){return Eb(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=go(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return s1()||(c.referrerPolicy="no-referrer"),Sb.fetch()(kb(t,t.config.apiHost,r,o),c)})}async function Eb(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},AP),e);try{const s=new OP(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Xo(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xo(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Xo(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Xo(t,"user-disabled",a);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw xb(t,d,c);Yt(t,d)}}catch(s){if(s instanceof _r)throw s;Yt(t,"network-request-failed",{message:String(s)})}}async function wo(t,e,r,n,s={}){const i=await Gr(t,e,r,n,s);return"mfaPendingCredential"in i&&Yt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function kb(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?$p(t.config,s):`${t.config.apiScheme}://${s}`}function NP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(gr(this.auth,"network-request-failed")),jP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xo(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=gr(t,e,n);return s.customData._tokenResponse=r,s}function Oy(t){return t!==void 0&&t.enterprise!==void 0}class RP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return NP(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function $P(t,e){return Gr(t,"GET","/v2/recaptchaConfig",zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(t,e){return Gr(t,"POST","/v1/accounts:delete",e)}async function Tb(t,e){return Gr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LP(t,e=!1){const r=Et(t),n=await r.getIdToken(e),s=Dp(n);V(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Ca(vd(s.auth_time)),issuedAtTime:Ca(vd(s.iat)),expirationTime:Ca(vd(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function vd(t){return Number(t)*1e3}function Dp(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Tl("JWT malformed, contained fewer than 3 sections"),null;try{const s=ob(r);return s?JSON.parse(s):(Tl("Failed to decode base64 JWT payload"),null)}catch(s){return Tl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ry(t){const e=Dp(t);return V(e,"internal-error"),V(typeof e.exp<"u","internal-error"),V(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof _r&&FP(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function FP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ca(this.lastLoginAt),this.creationTime=Ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Ai(t,Tb(r,{idToken:n}));V(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Cb(i.providerUserInfo):[],o=BP(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Qf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function UP(t){const e=Et(t);await hc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BP(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Cb(t){return t.map(e=>{var{providerId:r}=e,n=Op(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,e){const r=await Eb(t,{},async()=>{const n=go({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=kb(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Sb.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function VP(t,e){return Gr(t,"POST","/v2/accounts:revokeToken",zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){V(e.idToken,"internal-error"),V(typeof e.idToken<"u","internal-error"),V(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ry(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){V(e.length!==0,"internal-error");const r=Ry(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(V(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await zP(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new gi;return n&&(V(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(V(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(V(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gi,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,e){V(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Op(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Ai(this,this.stsTokenManager.getToken(this.auth,e));return V(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return LP(this,e)}reload(){return UP(this)}_assign(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await hc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(Lr(this.auth));const e=await this.getIdToken();return await Ai(this,DP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(s=r.email)!==null&&s!==void 0?s:void 0,g=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,y=(a=r.photoURL)!==null&&a!==void 0?a:void 0,w=(o=r.tenantId)!==null&&o!==void 0?o:void 0,_=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=r.createdAt)!==null&&c!==void 0?c:void 0,p=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:v,emailVerified:S,isAnonymous:T,providerData:E,stsTokenManager:x}=r;V(v&&x,e,"internal-error");const I=gi.fromJSON(this.name,x);V(typeof v=="string",e,"internal-error"),Yr(f,e.name),Yr(h,e.name),V(typeof S=="boolean",e,"internal-error"),V(typeof T=="boolean",e,"internal-error"),Yr(g,e.name),Yr(y,e.name),Yr(w,e.name),Yr(_,e.name),Yr(m,e.name),Yr(p,e.name);const j=new Rr({uid:v,auth:e,email:h,emailVerified:S,displayName:f,isAnonymous:T,photoURL:y,phoneNumber:g,tenantId:w,stsTokenManager:I,createdAt:m,lastLoginAt:p});return E&&Array.isArray(E)&&(j.providerData=E.map(N=>Object.assign({},N))),_&&(j._redirectEventId=_),j}static async _fromIdTokenResponse(e,r,n=!1){const s=new gi;s.updateFromServerResponse(r);const i=new Rr({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await hc(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];V(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Cb(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new gi;o.updateFromIdToken(n);const l=new Rr({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Qf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=new Map;function $r(t){Hr(t instanceof Function,"Expected a class definition");let e=$y.get(t);return e?(Hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$y.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Ib.type="NONE";const Dy=Ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t,e,r){return`firebase:${t}:${e}:${r}`}class yi{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Cl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Cl("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new yi($r(Dy),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||$r(Dy);const a=Cl(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const d=await c._get(a);if(d){const f=Rr._fromJSON(e,d);c!==i&&(o=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new yi(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new yi(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Pb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rb(e))return"Blackberry";if($b(e))return"Webos";if(Ab(e))return"Safari";if((e.includes("chrome/")||jb(e))&&!e.includes("edge/"))return"Chrome";if(Ob(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Pb(t=Xe()){return/firefox\//i.test(t)}function Ab(t=Xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jb(t=Xe()){return/crios\//i.test(t)}function Nb(t=Xe()){return/iemobile/i.test(t)}function Ob(t=Xe()){return/android/i.test(t)}function Rb(t=Xe()){return/blackberry/i.test(t)}function $b(t=Xe()){return/webos/i.test(t)}function Lp(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WP(t=Xe()){var e;return Lp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HP(){return a1()&&document.documentMode===10}function Db(t=Xe()){return Lp(t)||Ob(t)||$b(t)||Rb(t)||/windows phone/i.test(t)||Nb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t,e=[]){let r;switch(t){case"Browser":r=Ly(Xe());break;case"Worker":r=`${Ly(Xe())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${yo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(t,e={}){return Gr(t,"GET","/v2/passwordPolicy",zn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=6;class JP{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:GP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fy(this),this.idTokenSubscription=new Fy(this),this.beforeStateQueue=new qP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=$r(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await yi.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Tb(this,{idToken:e}),n=await Rr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ur(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return V(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await hc(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(Lr(this));const r=e?Et(e):null;return r&&V(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&V(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(Lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(Lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KP(this),r=new JP(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Is("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await VP(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&$r(e)||this._popupRedirectResolver;V(r,this,"argument-error"),this.redirectPersistenceManager=await yi.create(this,[$r(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(V(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&TP(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ps(t){return Et(t)}class Fy{constructor(e){this.auth=e,this.observer=null,this.addObserver=f1(r=>this.observer=r)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XP(t){Kc=t}function Fb(t){return Kc.loadJS(t)}function YP(){return Kc.recaptchaEnterpriseScript}function ZP(){return Kc.gapiScript}function eA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const tA="recaptcha-enterprise",rA="NO_RECAPTCHA";class nA{constructor(e){this.type=tA,this.auth=Ps(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{$P(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new RP(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function s(i,a,o){const l=window.grecaptcha;Oy(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(rA)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&Oy(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=YP();l.length!==0&&(l+=o),Fb(l).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function My(t,e,r,n=!1){const s=new nA(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Xf(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await My(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await My(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){const r=Bi(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(to(i,e??{}))return s;Yt(s,"already-initialized")}return r.initialize({options:e})}function iA(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map($r);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function aA(t,e,r){const n=Ps(t);V(n._canInitEmulator,n,"emulator-config-failed"),V(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=Mb(e),{host:a,port:o}=oA(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),lA()}function Mb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oA(t){const e=Mb(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:Uy(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:Uy(a)}}}function Uy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lA(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,r){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function cA(t,e){return Gr(t,"POST","/v1/accounts:update",e)}async function uA(t,e){return Gr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(t,e){return wo(t,"POST","/v1/accounts:signInWithPassword",zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e){return wo(t,"POST","/v1/accounts:signInWithEmailLink",zn(t,e))}async function hA(t,e){return wo(t,"POST","/v1/accounts:signInWithEmailLink",zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Fp{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new no(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new no(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,r,"signInWithPassword",dA);case"emailLink":return fA(e,{email:this._email,oobCode:this._password});default:Yt(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,n,"signUpPassword",uA);case"emailLink":return hA(e,{idToken:r,email:this._email,oobCode:this._password});default:Yt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vi(t,e){return wo(t,"POST","/v1/accounts:signInWithIdp",zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="http://localhost";class _s extends Fp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Yt("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Op(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new _s(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return vi(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,vi(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,vi(e,r)}buildRequest(){const e={requestUri:pA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=go(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gA(t){const e=la(ca(t)).link,r=e?la(ca(e)).deep_link_id:null,n=la(ca(t)).deep_link_id;return(n?la(ca(n)).link:null)||n||r||e||t}class Mp{constructor(e){var r,n,s,i,a,o;const l=la(ca(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,d=(n=l.oobCode)!==null&&n!==void 0?n:null,f=mA((s=l.mode)!==null&&s!==void 0?s:null);V(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=gA(e);try{return new Mp(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.providerId=As.PROVIDER_ID}static credential(e,r){return no._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Mp.parseLink(r);return V(n,"argument-error"),no._fromEmailAndCode(e,n.code,n.tenantId)}}As.PROVIDER_ID="password";As.EMAIL_PASSWORD_SIGN_IN_METHOD="password";As.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Ub{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn extends _o{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:hn.PROVIDER_ID,signInMethod:hn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hn.credentialFromTaggedObject(e)}static credentialFromError(e){return hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hn.credential(e.oauthAccessToken)}catch{return null}}}hn.FACEBOOK_SIGN_IN_METHOD="facebook.com";hn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends _o{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return _s._fromParams({providerId:pn.PROVIDER_ID,signInMethod:pn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return pn.credentialFromTaggedObject(e)}static credentialFromError(e){return pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return pn.credential(r,n)}catch{return null}}}pn.GOOGLE_SIGN_IN_METHOD="google.com";pn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends _o{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:mn.PROVIDER_ID,signInMethod:mn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mn.credentialFromTaggedObject(e)}static credentialFromError(e){return mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mn.credential(e.oauthAccessToken)}catch{return null}}}mn.GITHUB_SIGN_IN_METHOD="github.com";mn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn extends _o{constructor(){super("twitter.com")}static credential(e,r){return _s._fromParams({providerId:gn.PROVIDER_ID,signInMethod:gn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return gn.credentialFromTaggedObject(e)}static credentialFromError(e){return gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return gn.credential(r,n)}catch{return null}}}gn.TWITTER_SIGN_IN_METHOD="twitter.com";gn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,e){return wo(t,"POST","/v1/accounts:signUp",zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Rr._fromIdTokenResponse(e,n,s),a=By(n);return new bs({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=By(n);return new bs({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function By(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends _r{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,pc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new pc(e,r,n,s)}}function Bb(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?pc._fromErrorAndOperation(t,i,e,n):i})}async function vA(t,e,r=!1){const n=await Ai(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return bs._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(t,e,r=!1){const{auth:n}=t;if(ur(n.app))return Promise.reject(Lr(n));const s="reauthenticate";try{const i=await Ai(t,Bb(n,s,e,t),r);V(i.idToken,n,"internal-error");const a=Dp(i.idToken);V(a,n,"internal-error");const{sub:o}=a;return V(t.uid===o,n,"user-mismatch"),bs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Yt(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(t,e,r=!1){if(ur(t.app))return Promise.reject(Lr(t));const n="signIn",s=await Bb(t,n,e),i=await bs._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function wA(t,e){return Vb(Ps(t),e)}async function _A(t,e){return zb(Et(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wb(t){const e=Ps(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bA(t,e,r){if(ur(t.app))return Promise.reject(Lr(t));const n=Ps(t),a=await Xf(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yA).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Wb(t),l}),o=await bs._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function xA(t,e,r){return ur(t.app)?Promise.reject(Lr(t)):wA(Et(t),As.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Wb(t),n})}function SA(t,e){return EA(Et(t),null,e)}async function EA(t,e,r){const{auth:n}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};r&&(i.password=r);const a=await Ai(t,cA(n,i));await t._updateTokensIfNecessary(a,!0)}function kA(t,e,r,n){return Et(t).onIdTokenChanged(e,r,n)}function TA(t,e,r){return Et(t).beforeAuthStateChanged(e,r)}function CA(t,e,r,n){return Et(t).onAuthStateChanged(e,r,n)}function IA(t){return Et(t).signOut()}const mc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(mc,"1"),this.storage.removeItem(mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=1e3,AA=10;class qb extends Hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Db(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);HP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AA):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},PA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}qb.type="LOCAL";const jA=qb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb extends Hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Kb.type="SESSION";const Gb=Kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Gc(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await NA(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=Up("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const h=f;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(h.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(){return window}function RA(t){yr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(){return typeof yr().WorkerGlobalScope<"u"&&typeof yr().importScripts=="function"}async function $A(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LA(){return Jb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="firebaseLocalStorageDb",FA=1,gc="firebaseLocalStorage",Xb="fbase_key";class bo{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Jc(t,e){return t.transaction([gc],e?"readwrite":"readonly").objectStore(gc)}function MA(){const t=indexedDB.deleteDatabase(Qb);return new bo(t).toPromise()}function Yf(){const t=indexedDB.open(Qb,FA);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(gc,{keyPath:Xb})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(gc)?e(n):(n.close(),await MA(),e(await Yf()))})})}async function zy(t,e,r){const n=Jc(t,!0).put({[Xb]:e,value:r});return new bo(n).toPromise()}async function UA(t,e){const r=Jc(t,!1).get(e),n=await new bo(r).toPromise();return n===void 0?null:n.value}function Vy(t,e){const r=Jc(t,!0).delete(e);return new bo(r).toPromise()}const BA=800,zA=3;class Yb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yf(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>zA)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gc._getInstance(LA()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await $A(),!this.activeServiceWorker)return;this.sender=new OA(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yf();return await zy(e,mc,"1"),await Vy(e,mc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>zy(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>UA(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vy(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Jc(s,!1).getAll();return new bo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Yb.type="LOCAL";const VA=Yb;new vo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t,e){return e?$r(e):(V(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends Fp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vi(e,this._buildIdpRequest())}_linkToIdToken(e,r){return vi(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return vi(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function HA(t){return Vb(t.auth,new Bp(t),t.bypassAuthState)}function qA(t){const{auth:e,user:r}=t;return V(r,e,"internal-error"),zb(r,new Bp(t),t.bypassAuthState)}async function KA(t){const{auth:e,user:r}=t;return V(r,e,"internal-error"),vA(r,new Bp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HA;case"linkViaPopup":case"linkViaRedirect":return KA;case"reauthViaPopup":case"reauthViaRedirect":return qA;default:Yt(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new vo(2e3,1e4);class oi extends Zb{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,oi.currentPopupAction&&oi.currentPopupAction.cancel(),oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return V(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=Up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GA.get())};e()}}oi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="pendingRedirect",Il=new Map;class QA extends Zb{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Il.get(this.auth._key());if(!e){try{const n=await XA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Il.set(this.auth._key(),e)}return this.bypassAuthState||Il.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XA(t,e){const r=ej(e),n=ZA(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function YA(t,e){Il.set(t._key(),e)}function ZA(t){return $r(t._redirectPersistence)}function ej(t){return Cl(JA,t.config.apiKey,t.name)}async function tj(t,e,r=!1){if(ur(t.app))return Promise.reject(Lr(t));const n=Ps(t),s=WA(n,e),a=await new QA(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=10*60*1e3;class nj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sj(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!ex(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(gr(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rj&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wy(e))}saveEventToCache(e){this.cachedEventUids.add(Wy(e)),this.lastProcessedEventTime=Date.now()}}function Wy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ex({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ex(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(t,e={}){return Gr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oj=/^https?/;async function lj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ij(t);for(const r of e)try{if(cj(r))return}catch{}Yt(t,"unauthorized-domain")}function cj(t){const e=Jf(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!oj.test(r))return!1;if(aj.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new vo(3e4,6e4);function Hy(){const t=yr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function dj(t){return new Promise((e,r)=>{var n,s,i;function a(){Hy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hy(),r(gr(t,"network-request-failed"))},timeout:uj.get()})}if(!((s=(n=yr().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=yr().gapi)===null||i===void 0)&&i.load)a();else{const o=eA("iframefcb");return yr()[o]=()=>{gapi.load?a():r(gr(t,"network-request-failed"))},Fb(`${ZP()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw Pl=null,e})}let Pl=null;function fj(t){return Pl=Pl||dj(t),Pl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new vo(5e3,15e3),pj="__/auth/iframe",mj="emulator/auth/iframe",gj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vj(t){const e=t.config;V(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?$p(e,mj):`https://${t.config.authDomain}/${pj}`,n={apiKey:e.apiKey,appName:t.name,v:yo},s=yj.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${go(n).slice(1)}`}async function wj(t){const e=await fj(t),r=yr().gapi;return V(r,t,"internal-error"),e.open({where:document.body,url:vj(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gj,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=gr(t,"network-request-failed"),o=yr().setTimeout(()=>{i(a)},hj.get());function l(){yr().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bj=500,xj=600,Sj="_blank",Ej="http://localhost";class qy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kj(t,e,r,n=bj,s=xj){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},_j),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Xe().toLowerCase();r&&(o=jb(c)?Sj:r),Pb(c)&&(e=e||Ej,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[g,y])=>`${h}${g}=${y},`,"");if(WP(c)&&o!=="_self")return Tj(e||"",o),new qy(null);const f=window.open(e||"",o,d);V(f,t,"popup-blocked");try{f.focus()}catch{}return new qy(f)}function Tj(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="__/auth/handler",Ij="emulator/auth/handler",Pj=encodeURIComponent("fac");async function Ky(t,e,r,n,s,i){V(t.config.authDomain,t,"auth-domain-config-required"),V(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:yo,eventId:s};if(e instanceof Ub){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",d1(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))a[d]=f}if(e instanceof _o){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),c=l?`#${Pj}=${encodeURIComponent(l)}`:"";return`${Aj(t)}?${go(o).slice(1)}${c}`}function Aj({config:t}){return t.emulator?$p(t,Ij):`https://${t.authDomain}/${Cj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="webStorageSupport";class jj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gb,this._completeRedirectFn=tj,this._overrideRedirectResult=YA}async _openPopup(e,r,n,s){var i;Hr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Ky(e,r,n,Jf(),s);return kj(e,a,Up())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await Ky(e,r,n,Jf(),s);return RA(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Hr(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await wj(e),n=new nj(e);return r.register("authEvent",s=>(V(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(wd,{type:wd},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[wd];a!==void 0&&r(!!a),Yt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=lj(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Db()||Ab()||Lp()}}const Nj=jj;var Gy="@firebase/auth",Jy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $j(t){Wr(new wr("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;V(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lb(t)},c=new QP(n,s,i,l);return iA(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Wr(new wr("auth-internal",e=>{const r=Ps(e.getProvider("auth").getImmediate());return(n=>new Oj(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(Gy,Jy,Rj(t)),mr(Gy,Jy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=5*60,Lj=cb("authIdTokenMaxAge")||Dj;let Qy=null;const Fj=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Lj)return;const s=r==null?void 0:r.token;Qy!==s&&(Qy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Mj(t=yb()){const e=Bi(t,"auth");if(e.isInitialized())return e.getImmediate();const r=sA(t,{popupRedirectResolver:Nj,persistence:[VA,jA,Gb]}),n=cb("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=Fj(i.toString());TA(r,a,()=>a(r.currentUser)),kA(r,o=>a(o))}}const s=t1("auth");return s&&aA(r,`http://${s}`),r}function Uj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}XP({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=gr("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",Uj().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$j("Browser");var Bj="firebase",zj="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(Bj,zj,"app");const tx="@firebase/installations",zp="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=1e4,nx=`w:${zp}`,sx="FIS_v2",Vj="https://firebaseinstallations.googleapis.com/v1",Wj=60*60*1e3,Hj="installations",qj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xs=new Is(Hj,qj,Kj);function ix(t){return t instanceof _r&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax({projectId:t}){return`${Vj}/projects/${t}/installations`}function ox(t){return{token:t.token,requestStatus:2,expiresIn:Jj(t.expiresIn),creationTime:Date.now()}}async function lx(t,e){const n=(await e.json()).error;return xs.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function cx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Gj(t,{refreshToken:e}){const r=cx(t);return r.append("Authorization",Qj(e)),r}async function ux(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Jj(t){return Number(t.replace("s","000"))}function Qj(t){return`${sx} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xj({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=ax(t),s=cx(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={fid:r,authVersion:sx,appId:t.appId,sdkVersion:nx},o={method:"POST",headers:s,body:JSON.stringify(a)},l=await ux(()=>fetch(n,o));if(l.ok){const c=await l.json();return{fid:c.fid||r,registrationStatus:2,refreshToken:c.refreshToken,authToken:ox(c.authToken)}}else throw await lx("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=/^[cdef][\w-]{21}$/,Zf="";function eN(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=tN(t);return Zj.test(r)?r:Zf}catch{return Zf}}function tN(t){return Yj(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new Map;function hx(t,e){const r=Qc(t);px(r,e),rN(r,e)}function px(t,e){const r=fx.get(t);if(r)for(const n of r)n(e)}function rN(t,e){const r=nN();r&&r.postMessage({key:t,fid:e}),sN()}let ls=null;function nN(){return!ls&&"BroadcastChannel"in self&&(ls=new BroadcastChannel("[Firebase] FID Change"),ls.onmessage=t=>{px(t.data.key,t.data.fid)}),ls}function sN(){fx.size===0&&ls&&(ls.close(),ls=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="firebase-installations-database",aN=1,Ss="firebase-installations-store";let _d=null;function Vp(){return _d||(_d=mb(iN,aN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ss)}}})),_d}async function yc(t,e){const r=Qc(t),s=(await Vp()).transaction(Ss,"readwrite"),i=s.objectStore(Ss),a=await i.get(r);return await i.put(e,r),await s.done,(!a||a.fid!==e.fid)&&hx(t,e.fid),e}async function mx(t){const e=Qc(t),n=(await Vp()).transaction(Ss,"readwrite");await n.objectStore(Ss).delete(e),await n.done}async function Xc(t,e){const r=Qc(t),s=(await Vp()).transaction(Ss,"readwrite"),i=s.objectStore(Ss),a=await i.get(r),o=e(a);return o===void 0?await i.delete(r):await i.put(o,r),await s.done,o&&(!a||a.fid!==o.fid)&&hx(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wp(t){let e;const r=await Xc(t.appConfig,n=>{const s=oN(n),i=lN(t,s);return e=i.registrationPromise,i.installationEntry});return r.fid===Zf?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function oN(t){const e=t||{fid:eN(),registrationStatus:0};return gx(e)}function lN(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(xs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=cN(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uN(t)}:{installationEntry:e}}async function cN(t,e){try{const r=await Xj(t,e);return yc(t.appConfig,r)}catch(r){throw ix(r)&&r.customData.serverCode===409?await mx(t.appConfig):await yc(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function uN(t){let e=await Xy(t.appConfig);for(;e.registrationStatus===1;)await dx(100),e=await Xy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await Wp(t);return n||r}return e}function Xy(t){return Xc(t,e=>{if(!e)throw xs.create("installation-not-found");return gx(e)})}function gx(t){return dN(t)?{fid:t.fid,registrationStatus:0}:t}function dN(t){return t.registrationStatus===1&&t.registrationTime+rx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN({appConfig:t,heartbeatServiceProvider:e},r){const n=hN(t,r),s=Gj(t,r),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={installation:{sdkVersion:nx,appId:t.appId}},o={method:"POST",headers:s,body:JSON.stringify(a)},l=await ux(()=>fetch(n,o));if(l.ok){const c=await l.json();return ox(c)}else throw await lx("Generate Auth Token",l)}function hN(t,{fid:e}){return`${ax(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hp(t,e=!1){let r;const n=await Xc(t.appConfig,i=>{if(!yx(i))throw xs.create("not-registered");const a=i.authToken;if(!e&&gN(a))return i;if(a.requestStatus===1)return r=pN(t,e),i;{if(!navigator.onLine)throw xs.create("app-offline");const o=vN(i);return r=mN(t,o),o}});return r?await r:n.authToken}async function pN(t,e){let r=await Yy(t.appConfig);for(;r.authToken.requestStatus===1;)await dx(100),r=await Yy(t.appConfig);const n=r.authToken;return n.requestStatus===0?Hp(t,e):n}function Yy(t){return Xc(t,e=>{if(!yx(e))throw xs.create("not-registered");const r=e.authToken;return wN(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function mN(t,e){try{const r=await fN(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return await yc(t.appConfig,n),r}catch(r){if(ix(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await mx(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await yc(t.appConfig,n)}throw r}}function yx(t){return t!==void 0&&t.registrationStatus===2}function gN(t){return t.requestStatus===2&&!yN(t)}function yN(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Wj}function vN(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function wN(t){return t.requestStatus===1&&t.requestTime+rx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(t){const e=t,{installationEntry:r,registrationPromise:n}=await Wp(e);return n?n.catch(console.error):Hp(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e=!1){const r=t;return await xN(r),(await Hp(r,e)).token}async function xN(t){const{registrationPromise:e}=await Wp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){if(!t||!t.options)throw bd("App Configuration");if(!t.name)throw bd("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw bd(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function bd(t){return xs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="installations",EN="installations-internal",kN=t=>{const e=t.getProvider("app").getImmediate(),r=SN(e),n=Bi(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},TN=t=>{const e=t.getProvider("app").getImmediate(),r=Bi(e,vx).getImmediate();return{getId:()=>_N(r),getToken:s=>bN(r,s)}};function CN(){Wr(new wr(vx,kN,"PUBLIC")),Wr(new wr(EN,TN,"PRIVATE"))}CN();mr(tx,zp);mr(tx,zp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc="analytics",IN="firebase_id",PN="origin",AN=60*1e3,jN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt=new jp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_t=new Is("analytics","Analytics",NN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){if(!t.startsWith(qp)){const e=_t.create("invalid-gtag-resource",{gtagURL:t});return dt.warn(e.message),""}return t}function wx(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function RN(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function $N(t,e){const r=RN("firebase-js-sdk-policy",{createScriptURL:ON}),n=document.createElement("script"),s=`${qp}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function DN(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function LN(t,e,r,n,s,i){const a=n[s];try{if(a)await e[a];else{const l=(await wx(r)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(o){dt.error(o)}t("config",s,i)}async function FN(t,e,r,n,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const o=await wx(r);for(const l of a){const c=o.find(f=>f.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",n,s||{})}catch(i){dt.error(i)}}function MN(t,e,r,n){async function s(i,...a){try{if(i==="event"){const[o,l]=a;await FN(t,e,r,o,l)}else if(i==="config"){const[o,l]=a;await LN(t,e,r,n,o,l)}else if(i==="consent"){const[o,l]=a;t("consent",o,l)}else if(i==="get"){const[o,l,c]=a;t("get",o,l,c)}else if(i==="set"){const[o]=a;t("set",o)}else t(i,...a)}catch(o){dt.error(o)}}return s}function UN(t,e,r,n,s){let i=function(...a){window[n].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=MN(i,t,e,r),{gtagCore:i,wrappedGtag:window[s]}}function BN(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(qp)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=30,VN=1e3;class WN{constructor(e={},r=VN){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const _x=new WN;function HN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function qN(t){var e;const{appId:r,apiKey:n}=t,s={method:"GET",headers:HN(n)},i=jN.replace("{app-id}",r),a=await fetch(i,s);if(a.status!==200&&a.status!==304){let o="";try{const l=await a.json();!((e=l.error)===null||e===void 0)&&e.message&&(o=l.error.message)}catch{}throw _t.create("config-fetch-failed",{httpStatus:a.status,responseMessage:o})}return a.json()}async function KN(t,e=_x,r){const{appId:n,apiKey:s,measurementId:i}=t.options;if(!n)throw _t.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:n};throw _t.create("no-api-key")}const a=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new QN;return setTimeout(async()=>{o.abort()},AN),bx({appId:n,apiKey:s,measurementId:i},a,o,e)}async function bx(t,{throttleEndTimeMillis:e,backoffCount:r},n,s=_x){var i;const{appId:a,measurementId:o}=t;try{await GN(n,e)}catch(l){if(o)return dt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:a,measurementId:o};throw l}try{const l=await qN(t);return s.deleteThrottleMetadata(a),l}catch(l){const c=l;if(!JN(c)){if(s.deleteThrottleMetadata(a),o)return dt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:o};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?Sy(r,s.intervalMillis,zN):Sy(r,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:r+1};return s.setThrottleMetadata(a,f),dt.debug(`Calling attemptFetch again in ${d} millis`),bx(t,f,n,s)}}function GN(t,e){return new Promise((r,n)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(r,s);t.addEventListener(()=>{clearTimeout(i),n(_t.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function JN(t){if(!(t instanceof _r)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class QN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function XN(t,e,r,n,s){if(s&&s.global){t("event",r,n);return}else{const i=await e,a=Object.assign(Object.assign({},n),{send_to:i});t("event",r,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(){if(db())try{await fb()}catch(t){return dt.warn(_t.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return dt.warn(_t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ZN(t,e,r,n,s,i,a){var o;const l=KN(t);l.then(g=>{r[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&dt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>dt.error(g)),e.push(l);const c=YN().then(g=>{if(g)return n.getId()}),[d,f]=await Promise.all([l,c]);BN(i)||$N(i,d.measurementId),s("js",new Date);const h=(o=a==null?void 0:a.config)!==null&&o!==void 0?o:{};return h[PN]="firebase",h.update=!0,f!=null&&(h[IN]=f),s("config",d.measurementId,h),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.app=e}_delete(){return delete Ia[this.app.options.appId],Promise.resolve()}}let Ia={},Zy=[];const ev={};let xd="dataLayer",tO="gtag",tv,xx,rv=!1;function rO(){const t=[];if(ub()&&t.push("This is a browser extension environment."),o1()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,s)=>`(${s+1}) ${n}`).join(" "),r=_t.create("invalid-analytics-context",{errorInfo:e});dt.warn(r.message)}}function nO(t,e,r){rO();const n=t.options.appId;if(!n)throw _t.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)dt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _t.create("no-api-key");if(Ia[n]!=null)throw _t.create("already-exists",{id:n});if(!rv){DN(xd);const{wrappedGtag:i,gtagCore:a}=UN(Ia,Zy,ev,xd,tO);xx=i,tv=a,rv=!0}return Ia[n]=ZN(t,Zy,ev,e,tv,xd,r),new eO(t)}function sO(t=yb()){t=Et(t);const e=Bi(t,vc);return e.isInitialized()?e.getImmediate():iO(t)}function iO(t,e={}){const r=Bi(t,vc);if(r.isInitialized()){const s=r.getImmediate();if(to(e,r.getOptions()))return s;throw _t.create("already-initialized")}return r.initialize({options:e})}function aO(t,e,r,n){t=Et(t),XN(xx,Ia[t.app.options.appId],e,r,n).catch(s=>dt.error(s))}const nv="@firebase/analytics",sv="0.10.8";function oO(){Wr(new wr(vc,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return nO(n,s,r)},"PUBLIC")),Wr(new wr("analytics-internal",t,"PRIVATE")),mr(nv,sv),mr(nv,sv,"esm2017");function t(e){try{const r=e.getProvider(vc).getImmediate();return{logEvent:(n,s,i)=>aO(r,n,s,i)}}catch(r){throw _t.create("interop-component-reg-failed",{reason:r})}}}oO();const lO={apiKey:"AIzaSyDHjkB9XX8tHc1GSeYofMgg9ckqeMtgZmg",authDomain:"leadlines-portal.firebaseapp.com",projectId:"leadlines-portal",storageBucket:"leadlines-portal.firebasestorage.app",messagingSenderId:"966858129098",appId:"1:966858129098:web:96ee31a034cccb1a8bbe33",measurementId:"G-05EYVQS5E8"},Sx=gb(lO),Yo=Mj(Sx);sO(Sx);const cO="modulepreload",uO=function(t,e){return new URL(t,e).href},iv={},ji=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=uO(c,n),c in iv)return;iv[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let y=a.length-1;y>=0;y--){const w=a[y];if(w.href===c&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":cO,d||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((y,w)=>{g.addEventListener("load",y),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},dO=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ji(async()=>{const{default:n}=await Promise.resolve().then(()=>zi);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Kp extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class fO extends Kp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hO extends Kp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class pO extends Kp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var eh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(eh||(eh={}));var mO=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};class gO{constructor(e,{headers:r={},customFetch:n,region:s=eh.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=dO(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return mO(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=r;let o={},{region:l}=r;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let c;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:c}).catch(y=>{throw new fO(y)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new hO(d);if(!d.ok)throw new pO(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return h==="application/json"?g=yield d.json():h==="application/octet-stream"?g=yield d.blob():h==="text/event-stream"?g=d:h==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var it={},Gp={},Yc={},xo={},Zc={},eu={},yO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ni=yO();const vO=Ni.fetch,Ex=Ni.fetch.bind(Ni),kx=Ni.Headers,wO=Ni.Request,_O=Ni.Response,zi=Object.freeze(Object.defineProperty({__proto__:null,Headers:kx,Request:wO,Response:_O,default:Ex,fetch:vO},Symbol.toStringTag,{value:"Module"})),bO=vk(zi);var tu={};Object.defineProperty(tu,"__esModule",{value:!0});let xO=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};tu.default=xO;var Tx=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eu,"__esModule",{value:!0});const SO=Tx(bO),EO=Tx(tu);let kO=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=SO.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let c=null,d=null,f=null,h=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const w=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),_=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");w&&_&&_.length>1&&(f=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const w=await i.text();try{c=JSON.parse(w),Array.isArray(c)&&i.status===404&&(d=[],c=null,h=200,g="OK")}catch{i.status===404&&w===""?(h=204,g="No Content"):c={message:w}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,g="OK"),c&&this.shouldThrowOnError)throw new EO.default(c)}return{error:c,data:d,count:f,status:h,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};eu.default=kO;var TO=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zc,"__esModule",{value:!0});const CO=TO(eu);let IO=class extends CO.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Zc.default=IO;var PO=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xo,"__esModule",{value:!0});const AO=PO(Zc);let jO=class extends AO.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};xo.default=jO;var NO=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yc,"__esModule",{value:!0});const ra=NO(xo);let OO=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new ra.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new ra.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new ra.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new ra.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ra.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Yc.default=OO;var ru={},nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.version=void 0;nu.version="0.0.0-automated";Object.defineProperty(ru,"__esModule",{value:!0});ru.DEFAULT_HEADERS=void 0;const RO=nu;ru.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${RO.version}`};var Cx=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gp,"__esModule",{value:!0});const $O=Cx(Yc),DO=Cx(xo),LO=ru;let FO=class Ix{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},LO.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new $O.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ix(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{o.searchParams.append(d,f)})):(a="POST",l=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new DO.default({method:a,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Gp.default=FO;var Vi=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(it,"__esModule",{value:!0});it.PostgrestError=it.PostgrestBuilder=it.PostgrestTransformBuilder=it.PostgrestFilterBuilder=it.PostgrestQueryBuilder=it.PostgrestClient=void 0;const Px=Vi(Gp);it.PostgrestClient=Px.default;const Ax=Vi(Yc);it.PostgrestQueryBuilder=Ax.default;const jx=Vi(xo);it.PostgrestFilterBuilder=jx.default;const Nx=Vi(Zc);it.PostgrestTransformBuilder=Nx.default;const Ox=Vi(eu);it.PostgrestBuilder=Ox.default;const Rx=Vi(tu);it.PostgrestError=Rx.default;var MO=it.default={PostgrestClient:Px.default,PostgrestQueryBuilder:Ax.default,PostgrestFilterBuilder:jx.default,PostgrestTransformBuilder:Nx.default,PostgrestBuilder:Ox.default,PostgrestError:Rx.default};const{PostgrestClient:UO,PostgrestQueryBuilder:H3,PostgrestFilterBuilder:q3,PostgrestTransformBuilder:K3,PostgrestBuilder:G3,PostgrestError:J3}=MO,BO="2.11.2",zO={"X-Client-Info":`realtime-js/${BO}`},VO="1.0.0",$x=1e4,WO=1e3;var wi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(wi||(wi={}));var mt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(mt||(mt={}));var qt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(qt||(qt={}));var th;(function(t){t.websocket="websocket"})(th||(th={}));var ns;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ns||(ns={}));class HO{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+s));a=a+s;const l=n.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class Dx{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(oe||(oe={}));const av=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=qO(a,t,e,s),i),{})},qO=(t,e,r,n)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=r[t];return i&&!n.includes(i)?Lx(i,a):rh(a)},Lx=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return QO(e,r)}switch(t){case oe.bool:return KO(e);case oe.float4:case oe.float8:case oe.int2:case oe.int4:case oe.int8:case oe.numeric:case oe.oid:return GO(e);case oe.json:case oe.jsonb:return JO(e);case oe.timestamp:return XO(e);case oe.abstime:case oe.date:case oe.daterange:case oe.int4range:case oe.int8range:case oe.money:case oe.reltime:case oe.text:case oe.time:case oe.timestamptz:case oe.timetz:case oe.tsrange:case oe.tstzrange:return rh(e);default:return rh(e)}},rh=t=>t,KO=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},GO=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},JO=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},QO=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Lx(e,o))}return t},XO=t=>typeof t=="string"?t.replace(" ","T"):t,Fx=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Sd{constructor(e,r,n={},s=$x){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ov;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ov||(ov={}));class Pa{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pa.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=Pa.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Pa.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),a=this.transformState(r),o={},l={};return this.map(i,(c,d)=>{a[c]||(l[c]=d)}),this.map(a,(c,d)=>{const f=i[c];if(f){const h=d.map(_=>_.presence_ref),g=f.map(_=>_.presence_ref),y=d.filter(_=>g.indexOf(_.presence_ref)<0),w=f.filter(_=>h.indexOf(_.presence_ref)<0);y.length>0&&(o[c]=y),w.length>0&&(l[c]=w)}else o[c]=d}),this.syncDiff(i,{joins:o,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var c;const d=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),d.length>0){const f=e[o].map(g=>g.presence_ref),h=d.filter(g=>f.indexOf(g.presence_ref)<0);e[o].unshift(...h)}n(o,d,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const d=l.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=c,s(o,c,l),c.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var lv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(lv||(lv={}));var cv;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(cv||(cv={}));var Ir;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ir||(Ir={}));class Jp{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Sd(this,qt.join,this.params,this.timeout),this.rejoinTimer=new Dx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Pa(this),this.broadcastEndpointURL=Fx(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(d=>e==null?void 0:e(Ir.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Ir.CLOSED));const l={},c={broadcast:i,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(Ir.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,g=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,y=[];for(let w=0;w<g;w++){const _=h[w],{filter:{event:m,schema:p,table:v,filter:S}}=_,T=d&&d[w];if(T&&T.event===m&&T.schema===p&&T.table===v&&T.filter===S)y.push(Object.assign(Object.assign({},_),{id:T.id}));else{this.unsubscribe(),e==null||e(Ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Ir.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(Ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new Sd(this,qt.leave,{},e);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Sd(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:d}=qt;if(n&&[o,l,c,d].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var y,w,_;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(w=g.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(g=>g.callback(h,n)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var y,w,_,m,p,v;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const S=g.id,T=(y=g.filter)===null||y===void 0?void 0:y.event;return S&&((w=r.ids)===null||w===void 0?void 0:w.includes(S))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const S=(p=(m=g==null?void 0:g.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return S==="*"||S===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:w,table:_,commit_timestamp:m,type:p,errors:v}=y;h=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:m,eventType:p,new:{},old:{},errors:v}),this._getPayloadRecords(y))}g.callback(h,n)})}_isClosed(){return this.state===mt.closed}_isJoined(){return this.state===mt.joined}_isJoining(){return this.state===mt.joining}_isLeaving(){return this.state===mt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Jp.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qt.close,{},e)}_onError(e){this._on(qt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=av(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=av(e.columns,e.old_record)),r}}const YO=()=>{},ZO=typeof WebSocket<"u",eR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tR{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=zO,this.params={},this.timeout=$x,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=YO,this.conn=null,this.sendBuffer=[],this.serializer=new HO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>ji(async()=>{const{default:l}=await Promise.resolve().then(()=>zi);return{default:l}},void 0,import.meta.url).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${th.websocket}`,this.httpEndpoint=Fx(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,a)=>a(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Dx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(ZO){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new rR(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ji(async()=>{const{default:e}=await import("./browser-B7-F3S_I.js").then(r=>r.b);return{default:e}},[],import.meta.url).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VO}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case wi.connecting:return ns.Connecting;case wi.open:return ns.Open;case wi.closing:return ns.Closing;default:return ns.Closed}}isConnected(){return this.connectionState()===ns.Open}channel(e,r={config:{}}){const n=new Jp(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){const{topic:r,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r}),s.joinedOnce&&s._isJoined()&&s._push(qt.access_token,{access_token:r})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(WO,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:i,ref:a}=r;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(qt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([eR],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class rR{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=wi.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Qp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function je(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class nR extends Qp{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nh extends Qp{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var sR=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};const Mx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ji(async()=>{const{default:n}=await Promise.resolve().then(()=>zi);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},iR=()=>sR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ji(()=>Promise.resolve().then(()=>zi),void 0,import.meta.url)).Response:Response}),sh=t=>{if(Array.isArray(t))return t.map(r=>sh(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=sh(n)}),e};var js=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};const Ed=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),aR=(t,e,r)=>js(void 0,void 0,void 0,function*(){const n=yield iR();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{e(new nR(Ed(s),t.status||500))}).catch(s=>{e(new nh(Ed(s),s))}):e(new nh(Ed(t),t))}),oR=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function So(t,e,r,n,s,i){return js(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,oR(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>aR(l,o,n))})})}function wc(t,e,r,n){return js(this,void 0,void 0,function*(){return So(t,"GET",e,r,n)})}function cn(t,e,r,n,s){return js(this,void 0,void 0,function*(){return So(t,"POST",e,n,s,r)})}function lR(t,e,r,n,s){return js(this,void 0,void 0,function*(){return So(t,"PUT",e,n,s,r)})}function cR(t,e,r,n){return js(this,void 0,void 0,function*(){return So(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Ux(t,e,r,n,s){return js(this,void 0,void 0,function*(){return So(t,"DELETE",e,n,s,r)})}var et=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};const uR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},uv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dR{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=Mx(s)}uploadOrUpdate(e,r,n,s){return et(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},uv),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),h=yield f.json();return f.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(je(i))return{data:null,error:i};throw i}})}upload(e,r,n){return et(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return et(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:uv.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:d}),h=yield f.json();return f.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(je(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return et(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield cn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Qp("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}update(e,r,n){return et(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return et(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}})}copy(e,r,n){return et(this,void 0,void 0,function*(){try{return{data:{path:(yield cn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return et(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield cn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return et(this,void 0,void 0,function*(){try{const s=yield cn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}})}download(e,r){return et(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield wc(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(je(o))return{data:null,error:o};throw o}})}info(e){return et(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield wc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:sh(n),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}exists(e){return et(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield cR(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(je(n)&&n instanceof nh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}remove(e){return et(this,void 0,void 0,function*(){try{return{data:yield Ux(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}list(e,r,n){return et(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},uR),r),{prefix:e||""});return{data:yield cn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const fR="2.7.1",hR={"X-Client-Info":`storage-js/${fR}`};var Fs=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};class pR{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},hR),r),this.fetch=Mx(n)}listBuckets(){return Fs(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(je(e))return{data:null,error:e};throw e}})}getBucket(e){return Fs(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Fs(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Fs(this,void 0,void 0,function*(){try{return{data:yield lR(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Fs(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Fs(this,void 0,void 0,function*(){try{return{data:yield Ux(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}}class mR extends pR{constructor(e,r={},n){super(e,r,n)}from(e){return new dR(this.url,this.headers,e,this.fetch)}}const gR="2.49.4";let ua="";typeof Deno<"u"?ua="deno":typeof document<"u"?ua="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ua="react-native":ua="node";const yR={"X-Client-Info":`supabase-js-${ua}/${gR}`},vR={headers:yR},wR={schema:"public"},_R={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bR={};var xR=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};const SR=t=>{let e;return t?e=t:typeof fetch>"u"?e=Ex:e=fetch,(...r)=>e(...r)},ER=()=>typeof Headers>"u"?kx:Headers,kR=(t,e,r)=>{const n=SR(r),s=ER();return(i,a)=>xR(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},a),{headers:c}))})};var TR=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};function CR(t){return t.replace(/\/$/,"")}function IR(t,e){const{db:r,auth:n,realtime:s,global:i}=t,{db:a,auth:o,realtime:l,global:c}=e,d={db:Object.assign(Object.assign({},a),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i),accessToken:()=>TR(this,void 0,void 0,function*(){return""})};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}const Bx="2.69.1",qs=30*1e3,ih=3,kd=ih*qs,PR="http://localhost:9999",AR="supabase.auth.token",jR={"X-Client-Info":`gotrue-js/${Bx}`},ah="X-Supabase-Api-Version",zx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},NR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,OR=6e5;class Xp extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class RR extends Xp{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function $R(t){return q(t)&&t.name==="AuthApiError"}class Vx extends Xp{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Vn extends Xp{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class sn extends Vn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function DR(t){return q(t)&&t.name==="AuthSessionMissingError"}class Td extends Vn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zo extends Vn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class el extends Vn{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function LR(t){return q(t)&&t.name==="AuthImplicitGrantRedirectError"}class dv extends Vn{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oh extends Vn{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Cd(t){return q(t)&&t.name==="AuthRetryableFetchError"}class fv extends Vn{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Aa extends Vn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const hv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pv=` 	
\r=`.split(""),FR=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<pv.length;e+=1)t[pv[e].charCodeAt(0)]=-2;for(let e=0;e<hv.length;e+=1)t[hv[e].charCodeAt(0)]=e;return t})();function Wx(t,e,r){const n=FR[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function mv(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{BR(a,n,r)};for(let a=0;a<t.length;a+=1)Wx(t.charCodeAt(a),s,i);return e.join("")}function MR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function UR(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}MR(n,e)}}function BR(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function zR(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Wx(t.charCodeAt(s),r,n);return new Uint8Array(e)}function VR(t){const e=[];return UR(t,r=>e.push(r)),new Uint8Array(e)}function WR(t){return Math.round(Date.now()/1e3)+t}function HR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const sr=()=>typeof window<"u"&&typeof document<"u",Qn={tested:!1,writable:!1},ja=()=>{if(!sr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qn.tested)return Qn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Qn.tested=!0,Qn.writable=!0}catch{Qn.tested=!0,Qn.writable=!1}return Qn.writable};function qR(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Hx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ji(async()=>{const{default:n}=await Promise.resolve().then(()=>zi);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},KR=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",qx=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},tl=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},rl=async(t,e)=>{await t.removeItem(e)};class su{constructor(){this.promise=new su.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}su.promiseConstructor=Promise;function Id(t){const e=t.split(".");if(e.length!==3)throw new Aa("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!NR.test(e[n]))throw new Aa("JWT not in base64url format");return{header:JSON.parse(mv(e[0])),payload:JSON.parse(mv(e[1])),signature:zR(e[2]),raw:{header:e[0],payload:e[1]}}}async function GR(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function JR(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function QR(t){return("0"+t.toString(16)).substr(-2)}function XR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,QR).join("")}async function YR(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function ZR(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await YR(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ms(t,e,r=!1){const n=XR();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await qx(t,`${e}-code-verifier`,s);const i=await ZR(n);return[i,n===i?"plain":"s256"]}const e2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function t2(t){const e=t.headers.get(ah);if(!e||!e.match(e2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function r2(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function n2(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var s2=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const rs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),i2=[502,503,504];async function gv(t){var e;if(!KR(t))throw new oh(rs(t),0);if(i2.includes(t.status))throw new oh(rs(t),t.status);let r;try{r=await t.json()}catch(i){throw new Vx(rs(i),i)}let n;const s=t2(t);if(s&&s.getTime()>=zx["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new fv(rs(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new sn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new fv(rs(r),t.status,r.weak_password.reasons);throw new RR(rs(r),t.status||500,n)}const a2=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function X(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[ah]||(i[ah]=zx["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await o2(t,e,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function o2(t,e,r,n,s,i){const a=a2(e,n,s,i);let o;try{o=await t(r,Object.assign({},a))}catch(l){throw console.error(l),new oh(rs(l),0)}if(o.ok||await gv(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await gv(l)}}function an(t){var e;let r=null;d2(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=WR(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function yv(t){const e=an(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function yn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function l2(t){return{data:t,error:null}}function c2(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,a=s2(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function u2(t){return t}function d2(t){return t.access_token&&t.refresh_token&&t.expires_in}var f2=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class h2{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Hx(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:yn})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=f2(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:c2,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(q(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yn})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:u2});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);c[`${_}Page`]=w}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(q(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await X(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yn})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:yn})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:yn})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:r,error:n}=await X(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(q(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}}const p2={getItem:t=>ja()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ja()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ja()&&globalThis.localStorage.removeItem(t)}};function vv(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function m2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Us={debug:!!(globalThis&&ja()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Kx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class g2 extends Kx{}async function y2(t,e,r){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new g2(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Us.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}m2();const v2={url:PR,storageKey:AR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wv(t,e,r){return await r()}class so{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=so.nextInstanceID,so.nextInstanceID+=1,this.instanceID>0&&sr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},v2),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new h2({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Hx(s.fetch),this.lock=s.lock||wv,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:sr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=y2:this.lock=wv,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ja()?this.storage=p2:(this.memoryStorage={},this.storage=vv(this.memoryStorage)):(this.memoryStorage={},this.storage=vv(this.memoryStorage)),sr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=qR(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),sr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),LR(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return q(r)?{error:r}:{error:new Vx("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:an}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:f,options:h}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await Ms(this.storage,this.storageKey)),i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:y},xform:an})}else if("phone"in e){const{phone:d,password:f,options:h}=e;i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:an})}else throw new Zo("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:o}=e;r=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:yv})}else if("phone"in e){const{phone:i,password:a,options:o}=e;r=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:yv})}else throw new Zo("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Td}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await tl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:an});if(await rl(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Td}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=e,o=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:an}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Td}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Ms(this.storage,this.storageKey));const{error:f}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:d}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Zo("You must provide either an email or phone number.")}catch(o){if(q(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:an});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Ms(this.storage,this.storageKey)),await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:l2})}catch(i){if(q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new sn;const{error:s}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await X(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:o}=await X(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Zo("You must provide either an email or phone number and a type")}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await tl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<kd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yn}):await this._useSession(async r=>{var n,s,i;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sn}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:yn})})}catch(r){if(q(r))return DR(r)&&(await this._removeSession(),await rl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new sn;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Ms(this.storage,this.storageKey));const{data:c,error:d}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:yn});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new sn;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Id(e.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(q(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:o}=r;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new sn;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!sr())throw new el("No browser detected.");if(e.error||e.error_description||e.error_code)throw new el(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new dv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new el("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new dv("No code detected.");const{data:p,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!i||!o||!a||!c)throw new el("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;l&&(h=parseInt(l));const g=h-d;g*1e3<=qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const y=h-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const m={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:a,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(q(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await tl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!($R(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await rl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=HR(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ms(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,o,l,c,d;const{data:f,error:h}=i;if(h)throw h;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return sr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(q(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await JR(async s=>(s>0&&await GR(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:an})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Cd(i)&&Date.now()+a-n<qs})}catch(n){if(this._debug(r,"error",n),q(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),sr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await tl(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<kd;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${kd}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Cd(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new sn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new su;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new sn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),q(i)){const a={session:null,error:i};return Cd(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await qx(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await rl(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&sr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${qs}ms, refresh threshold is ${ih} ticks`),s<=ih&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Kx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Ms(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await X(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await X(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:a,error:o}=await X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(r){if(q(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(q(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Id(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n||(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+OR>Date.now()))return n;const{data:s,error:i}=await X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Aa("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(a=>a.kid===e),!n)throw new Aa("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:g,error:y}=await this.getSession();if(y||!g.session)return{data:null,error:y};n=g.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=Id(n);if(r2(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:s,signature:a},error:null}}const c=n2(s.alg),d=await this.fetchJwk(s.kid,r),f=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,a,VR(`${o}.${l}`)))throw new Aa("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}}so.nextInstanceID=0;const w2=so;class _2 extends w2{constructor(e){super(e)}}var b2=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};class x2{constructor(e,r,n){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=CR(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:wR,realtime:bR,auth:Object.assign(Object.assign({},_R),{storageKey:l}),global:vR},d=IR(n??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=kR(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new UO(`${o}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new gO(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new mR(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return b2(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,lock:o,debug:l},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _2({url:this.authUrl,headers:Object.assign(Object.assign({},f),c),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new tR(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const S2=(t,e,r)=>new x2(t,e,r),E2="https://jaicupcmdaypybsbbacz.supabase.co",k2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImphaWN1cGNtZGF5cHlic2JiYWN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM3MzE4OTcsImV4cCI6MjA1OTMwNzg5N30.x4PDKEcqKhOlmY5B-9nBtewcB6voNG5SC0TJ2wQ1yQE";let se;try{se=S2(E2,k2)}catch(t){console.error("Error initializing Supabase client:",t),se={from:()=>({select:()=>({eq:()=>({data:[],error:null}),single:()=>({data:null,error:null})}),insert:()=>({data:null,error:null}),update:()=>({eq:()=>({data:null,error:null})})})}}const Gx=b.createContext(),Lt=()=>b.useContext(Gx),T2=({children:t})=>{const[e,r]=b.useState(null),[n,s]=b.useState(!0),[i,a]=b.useState({}),o=async(y,w)=>{try{const m=(await bA(Yo,y,w)).user,p={integrations:{instantly:{apiKey:"",isConnected:!1}}};localStorage.setItem(`user_settings_${m.uid}`,JSON.stringify({[m.uid]:p})),a({[m.uid]:p});try{await se.from("profiles").insert({user_id:m.uid,name:"John Doe",email:m.email,company:"Acme Corporation",role:"Hiring Manager",phone:"(555) 123-4567",notifications:{email:!0,browser:!1,mobile:!0},created_at:new Date,updated_at:new Date})}catch(v){console.error("Error creating user profile in Supabase:",v)}return m}catch(_){throw console.error("Error creating user:",_),_}},l=async(y,w)=>{try{const m=(await xA(Yo,y,w)).user,p=localStorage.getItem(`user_settings_${m.uid}`);if(p)a(JSON.parse(p));else{const v={[m.uid]:{integrations:{instantly:{apiKey:"",isConnected:!1}}}};a(v),localStorage.setItem(`user_settings_${m.uid}`,JSON.stringify(v))}return m}catch(_){throw console.error("Error signing in:",_),_}},c=async()=>{try{await IA(Yo),a({})}catch(y){throw console.error("Error signing out:",y),y}},d=async(y,w)=>{if(!e)throw new Error("No user is currently logged in");try{const _=As.credential(e.email,y);return await _A(e,_),await SA(e,w),!0}catch(_){throw console.error("Error updating password:",_),_}},f=y=>{if(!e)return;const w={...i,[e.uid]:y};a(w),localStorage.setItem(`user_settings_${e.uid}`,JSON.stringify(w))},h=()=>!e||!i[e.uid]?null:i[e.uid];b.useEffect(()=>CA(Yo,w=>{if(r(w),s(!1),w){const _=localStorage.getItem(`user_settings_${w.uid}`);_&&a(JSON.parse(_))}}),[]);const g={currentUser:e,signup:o,login:l,logout:c,updatePassword:d,loading:n,updateUserSettings:f,getUserSettings:h};return u.jsx(Gx.Provider,{value:g,children:!n&&t})},Ut=({children:t})=>{const e=Ui(),r=Bn(),{currentUser:n,logout:s}=Lt(),[i,a]=b.useState(!1),o=b.useRef(null);e.pathname;const l=e.pathname==="/login",c=e.pathname==="/register",d=n;b.useEffect(()=>{n&&(l||c)&&r("/dashboard")},[n,l,c,r]);const f=()=>{if(!n)return"U";const g=n.email.split("@")[0];return g?g[0].toUpperCase():"U"},h=async()=>{try{await s(),a(!1)}catch(g){console.error("Failed to log out",g)}};return b.useEffect(()=>{const g=y=>{o.current&&!o.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]),u.jsxs("div",{className:"h-screen flex flex-col overflow-hidden",children:[u.jsx("header",{className:"bg-secondary text-text-light p-4 pb-3 shadow-md relative",children:u.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[d&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute left-0 top-0 w-44 h-full flex items-center bg-secondary",children:u.jsx(Pt,{to:"/dashboard",className:"text-2xl font-bold hover:text-accent transition-colors block px-4 py-2 text-center w-full",children:"LeadLines"})}),u.jsx("div",{className:"w-44 invisible"}),u.jsx(Pt,{to:"/agent",className:"bg-accent text-text-dark px-4 py-2 rounded-md hover:bg-accent-dark transition-colors",children:"AI Agent"})]}),!d&&u.jsxs(u.Fragment,{children:[u.jsx("h1",{className:"text-2xl font-bold",children:"LeadLines"}),u.jsx("div",{})," "]})]})}),u.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[d&&u.jsxs("aside",{className:"w-44 bg-secondary text-text-light p-3 pt-2 flex flex-col overflow-hidden",children:[u.jsx("nav",{className:"mb-auto overflow-y-auto",children:u.jsxs("ul",{className:"space-y-3 mt-2",children:[u.jsx("li",{children:u.jsx(Pt,{to:"/dashboard",className:`block py-2 px-4 rounded-md ${e.pathname==="/dashboard"?"bg-accent text-text-dark":"hover:bg-secondary-dark"} transition-colors`,children:"Dashboard"})}),u.jsx("li",{children:u.jsx(Pt,{to:"/upload",className:`block py-2 px-4 rounded-md ${e.pathname.startsWith("/upload")?"bg-accent text-text-dark":"hover:bg-secondary-dark"} transition-colors`,children:"CSV Upload"})}),u.jsx("li",{children:u.jsx(Pt,{to:"/submissions",className:`block py-2 px-4 rounded-md ${e.pathname==="/submissions"?"bg-accent text-text-dark":"hover:bg-secondary-dark"} transition-colors`,children:"Submissions"})})]})}),u.jsxs("div",{className:"mt-auto relative",ref:o,children:[u.jsx("button",{onClick:()=>a(!i),className:"w-full flex items-center justify-center p-2 hover:bg-secondary-dark rounded-md transition-colors","aria-label":"Profile menu",children:u.jsx("div",{className:"w-10 h-10 rounded-full bg-accent text-text-dark flex items-center justify-center font-medium",children:f()})}),i&&u.jsxs("div",{className:"absolute bottom-full left-0 right-0 mb-2 mx-auto w-auto min-w-full bg-white rounded-md shadow-lg py-1 z-10",children:[u.jsx(Pt,{to:"/profile",className:"block px-4 py-2 text-text-dark hover:bg-gray-100",onClick:()=>a(!1),children:"Profile"}),u.jsx("button",{onClick:h,className:"block w-full text-left px-4 py-2 text-text-dark hover:bg-gray-100",children:"Log Out"})]})]})]}),u.jsx("main",{className:"flex-1 overflow-hidden",children:u.jsx("div",{className:"h-full overflow-y-auto p-4",children:u.jsx("div",{className:"container mx-auto",children:t})})})]})]})};var C2=function(e){return I2(e)&&!P2(e)};function I2(t){return!!t&&typeof t=="object"}function P2(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||N2(t)}var A2=typeof Symbol=="function"&&Symbol.for,j2=A2?Symbol.for("react.element"):60103;function N2(t){return t.$$typeof===j2}function O2(t){return Array.isArray(t)?[]:{}}function _c(t,e){return e.clone!==!1&&e.isMergeableObject(t)?io(O2(t),t,e):t}function R2(t,e,r){return t.concat(e).map(function(n){return _c(n,r)})}function $2(t,e,r){var n={};return r.isMergeableObject(t)&&Object.keys(t).forEach(function(s){n[s]=_c(t[s],r)}),Object.keys(e).forEach(function(s){!r.isMergeableObject(e[s])||!t[s]?n[s]=_c(e[s],r):n[s]=io(t[s],e[s],r)}),n}function io(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||R2,r.isMergeableObject=r.isMergeableObject||C2;var n=Array.isArray(e),s=Array.isArray(t),i=n===s;return i?n?r.arrayMerge(t,e,r):$2(t,e,r):_c(e,r)}io.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,s){return io(n,s,r)},{})};var lh=io,Jx=typeof global=="object"&&global&&global.Object===Object&&global,D2=typeof self=="object"&&self&&self.Object===Object&&self,br=Jx||D2||Function("return this")(),Dn=br.Symbol,Qx=Object.prototype,L2=Qx.hasOwnProperty,F2=Qx.toString,na=Dn?Dn.toStringTag:void 0;function M2(t){var e=L2.call(t,na),r=t[na];try{t[na]=void 0;var n=!0}catch{}var s=F2.call(t);return n&&(e?t[na]=r:delete t[na]),s}var U2=Object.prototype,B2=U2.toString;function z2(t){return B2.call(t)}var V2="[object Null]",W2="[object Undefined]",_v=Dn?Dn.toStringTag:void 0;function Ns(t){return t==null?t===void 0?W2:V2:_v&&_v in Object(t)?M2(t):z2(t)}function Xx(t,e){return function(r){return t(e(r))}}var Yp=Xx(Object.getPrototypeOf,Object);function Os(t){return t!=null&&typeof t=="object"}var H2="[object Object]",q2=Function.prototype,K2=Object.prototype,Yx=q2.toString,G2=K2.hasOwnProperty,J2=Yx.call(Object);function bv(t){if(!Os(t)||Ns(t)!=H2)return!1;var e=Yp(t);if(e===null)return!0;var r=G2.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Yx.call(r)==J2}function Q2(){this.__data__=[],this.size=0}function Zx(t,e){return t===e||t!==t&&e!==e}function iu(t,e){for(var r=t.length;r--;)if(Zx(t[r][0],e))return r;return-1}var X2=Array.prototype,Y2=X2.splice;function Z2(t){var e=this.__data__,r=iu(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Y2.call(e,r,1),--this.size,!0}function e$(t){var e=this.__data__,r=iu(e,t);return r<0?void 0:e[r][1]}function t$(t){return iu(this.__data__,t)>-1}function r$(t,e){var r=this.__data__,n=iu(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function Jr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Jr.prototype.clear=Q2;Jr.prototype.delete=Z2;Jr.prototype.get=e$;Jr.prototype.has=t$;Jr.prototype.set=r$;function n$(){this.__data__=new Jr,this.size=0}function s$(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function i$(t){return this.__data__.get(t)}function a$(t){return this.__data__.has(t)}function Eo(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var o$="[object AsyncFunction]",l$="[object Function]",c$="[object GeneratorFunction]",u$="[object Proxy]";function eS(t){if(!Eo(t))return!1;var e=Ns(t);return e==l$||e==c$||e==o$||e==u$}var Pd=br["__core-js_shared__"],xv=function(){var t=/[^.]+$/.exec(Pd&&Pd.keys&&Pd.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function d$(t){return!!xv&&xv in t}var f$=Function.prototype,h$=f$.toString;function Rs(t){if(t!=null){try{return h$.call(t)}catch{}try{return t+""}catch{}}return""}var p$=/[\\^$.*+?()[\]{}|]/g,m$=/^\[object .+?Constructor\]$/,g$=Function.prototype,y$=Object.prototype,v$=g$.toString,w$=y$.hasOwnProperty,_$=RegExp("^"+v$.call(w$).replace(p$,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function b$(t){if(!Eo(t)||d$(t))return!1;var e=eS(t)?_$:m$;return e.test(Rs(t))}function x$(t,e){return t==null?void 0:t[e]}function $s(t,e){var r=x$(t,e);return b$(r)?r:void 0}var ao=$s(br,"Map"),oo=$s(Object,"create");function S$(){this.__data__=oo?oo(null):{},this.size=0}function E$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var k$="__lodash_hash_undefined__",T$=Object.prototype,C$=T$.hasOwnProperty;function I$(t){var e=this.__data__;if(oo){var r=e[t];return r===k$?void 0:r}return C$.call(e,t)?e[t]:void 0}var P$=Object.prototype,A$=P$.hasOwnProperty;function j$(t){var e=this.__data__;return oo?e[t]!==void 0:A$.call(e,t)}var N$="__lodash_hash_undefined__";function O$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=oo&&e===void 0?N$:e,this}function Es(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Es.prototype.clear=S$;Es.prototype.delete=E$;Es.prototype.get=I$;Es.prototype.has=j$;Es.prototype.set=O$;function R$(){this.size=0,this.__data__={hash:new Es,map:new(ao||Jr),string:new Es}}function $$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function au(t,e){var r=t.__data__;return $$(e)?r[typeof e=="string"?"string":"hash"]:r.map}function D$(t){var e=au(this,t).delete(t);return this.size-=e?1:0,e}function L$(t){return au(this,t).get(t)}function F$(t){return au(this,t).has(t)}function M$(t,e){var r=au(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function Wn(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Wn.prototype.clear=R$;Wn.prototype.delete=D$;Wn.prototype.get=L$;Wn.prototype.has=F$;Wn.prototype.set=M$;var U$=200;function B$(t,e){var r=this.__data__;if(r instanceof Jr){var n=r.__data__;if(!ao||n.length<U$-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Wn(n)}return r.set(t,e),this.size=r.size,this}function Wi(t){var e=this.__data__=new Jr(t);this.size=e.size}Wi.prototype.clear=n$;Wi.prototype.delete=s$;Wi.prototype.get=i$;Wi.prototype.has=a$;Wi.prototype.set=B$;function z$(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var Sv=function(){try{var t=$s(Object,"defineProperty");return t({},"",{}),t}catch{}}();function tS(t,e,r){e=="__proto__"&&Sv?Sv(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var V$=Object.prototype,W$=V$.hasOwnProperty;function rS(t,e,r){var n=t[e];(!(W$.call(t,e)&&Zx(n,r))||r===void 0&&!(e in t))&&tS(t,e,r)}function ou(t,e,r,n){var s=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var o=e[i],l=void 0;l===void 0&&(l=t[o]),s?tS(r,o,l):rS(r,o,l)}return r}function H$(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var q$="[object Arguments]";function Ev(t){return Os(t)&&Ns(t)==q$}var nS=Object.prototype,K$=nS.hasOwnProperty,G$=nS.propertyIsEnumerable,J$=Ev(function(){return arguments}())?Ev:function(t){return Os(t)&&K$.call(t,"callee")&&!G$.call(t,"callee")},ko=Array.isArray;function Q$(){return!1}var sS=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kv=sS&&typeof module=="object"&&module&&!module.nodeType&&module,X$=kv&&kv.exports===sS,Tv=X$?br.Buffer:void 0,Y$=Tv?Tv.isBuffer:void 0,iS=Y$||Q$,Z$=9007199254740991,eD=/^(?:0|[1-9]\d*)$/;function tD(t,e){var r=typeof t;return e=e??Z$,!!e&&(r=="number"||r!="symbol"&&eD.test(t))&&t>-1&&t%1==0&&t<e}var rD=9007199254740991;function aS(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rD}var nD="[object Arguments]",sD="[object Array]",iD="[object Boolean]",aD="[object Date]",oD="[object Error]",lD="[object Function]",cD="[object Map]",uD="[object Number]",dD="[object Object]",fD="[object RegExp]",hD="[object Set]",pD="[object String]",mD="[object WeakMap]",gD="[object ArrayBuffer]",yD="[object DataView]",vD="[object Float32Array]",wD="[object Float64Array]",_D="[object Int8Array]",bD="[object Int16Array]",xD="[object Int32Array]",SD="[object Uint8Array]",ED="[object Uint8ClampedArray]",kD="[object Uint16Array]",TD="[object Uint32Array]",fe={};fe[vD]=fe[wD]=fe[_D]=fe[bD]=fe[xD]=fe[SD]=fe[ED]=fe[kD]=fe[TD]=!0;fe[nD]=fe[sD]=fe[gD]=fe[iD]=fe[yD]=fe[aD]=fe[oD]=fe[lD]=fe[cD]=fe[uD]=fe[dD]=fe[fD]=fe[hD]=fe[pD]=fe[mD]=!1;function CD(t){return Os(t)&&aS(t.length)&&!!fe[Ns(t)]}function Zp(t){return function(e){return t(e)}}var oS=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Na=oS&&typeof module=="object"&&module&&!module.nodeType&&module,ID=Na&&Na.exports===oS,Ad=ID&&Jx.process,Oi=function(){try{var t=Na&&Na.require&&Na.require("util").types;return t||Ad&&Ad.binding&&Ad.binding("util")}catch{}}(),Cv=Oi&&Oi.isTypedArray,PD=Cv?Zp(Cv):CD,AD=Object.prototype,jD=AD.hasOwnProperty;function lS(t,e){var r=ko(t),n=!r&&J$(t),s=!r&&!n&&iS(t),i=!r&&!n&&!s&&PD(t),a=r||n||s||i,o=a?H$(t.length,String):[],l=o.length;for(var c in t)(e||jD.call(t,c))&&!(a&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||tD(c,l)))&&o.push(c);return o}var ND=Object.prototype;function em(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ND;return t===r}var OD=Xx(Object.keys,Object),RD=Object.prototype,$D=RD.hasOwnProperty;function DD(t){if(!em(t))return OD(t);var e=[];for(var r in Object(t))$D.call(t,r)&&r!="constructor"&&e.push(r);return e}function cS(t){return t!=null&&aS(t.length)&&!eS(t)}function tm(t){return cS(t)?lS(t):DD(t)}function LD(t,e){return t&&ou(e,tm(e),t)}function FD(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var MD=Object.prototype,UD=MD.hasOwnProperty;function BD(t){if(!Eo(t))return FD(t);var e=em(t),r=[];for(var n in t)n=="constructor"&&(e||!UD.call(t,n))||r.push(n);return r}function rm(t){return cS(t)?lS(t,!0):BD(t)}function zD(t,e){return t&&ou(e,rm(e),t)}var uS=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Iv=uS&&typeof module=="object"&&module&&!module.nodeType&&module,VD=Iv&&Iv.exports===uS,Pv=VD?br.Buffer:void 0,Av=Pv?Pv.allocUnsafe:void 0;function WD(t,e){if(e)return t.slice();var r=t.length,n=Av?Av(r):new t.constructor(r);return t.copy(n),n}function dS(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function HD(t,e){for(var r=-1,n=t==null?0:t.length,s=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[s++]=a)}return i}function fS(){return[]}var qD=Object.prototype,KD=qD.propertyIsEnumerable,jv=Object.getOwnPropertySymbols,nm=jv?function(t){return t==null?[]:(t=Object(t),HD(jv(t),function(e){return KD.call(t,e)}))}:fS;function GD(t,e){return ou(t,nm(t),e)}function hS(t,e){for(var r=-1,n=e.length,s=t.length;++r<n;)t[s+r]=e[r];return t}var JD=Object.getOwnPropertySymbols,pS=JD?function(t){for(var e=[];t;)hS(e,nm(t)),t=Yp(t);return e}:fS;function QD(t,e){return ou(t,pS(t),e)}function mS(t,e,r){var n=e(t);return ko(t)?n:hS(n,r(t))}function XD(t){return mS(t,tm,nm)}function YD(t){return mS(t,rm,pS)}var ch=$s(br,"DataView"),uh=$s(br,"Promise"),dh=$s(br,"Set"),fh=$s(br,"WeakMap"),Nv="[object Map]",ZD="[object Object]",Ov="[object Promise]",Rv="[object Set]",$v="[object WeakMap]",Dv="[object DataView]",eL=Rs(ch),tL=Rs(ao),rL=Rs(uh),nL=Rs(dh),sL=Rs(fh),Ar=Ns;(ch&&Ar(new ch(new ArrayBuffer(1)))!=Dv||ao&&Ar(new ao)!=Nv||uh&&Ar(uh.resolve())!=Ov||dh&&Ar(new dh)!=Rv||fh&&Ar(new fh)!=$v)&&(Ar=function(t){var e=Ns(t),r=e==ZD?t.constructor:void 0,n=r?Rs(r):"";if(n)switch(n){case eL:return Dv;case tL:return Nv;case rL:return Ov;case nL:return Rv;case sL:return $v}return e});var iL=Object.prototype,aL=iL.hasOwnProperty;function oL(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&aL.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Lv=br.Uint8Array;function sm(t){var e=new t.constructor(t.byteLength);return new Lv(e).set(new Lv(t)),e}function lL(t,e){var r=e?sm(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var cL=/\w*$/;function uL(t){var e=new t.constructor(t.source,cL.exec(t));return e.lastIndex=t.lastIndex,e}var Fv=Dn?Dn.prototype:void 0,Mv=Fv?Fv.valueOf:void 0;function dL(t){return Mv?Object(Mv.call(t)):{}}function fL(t,e){var r=e?sm(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var hL="[object Boolean]",pL="[object Date]",mL="[object Map]",gL="[object Number]",yL="[object RegExp]",vL="[object Set]",wL="[object String]",_L="[object Symbol]",bL="[object ArrayBuffer]",xL="[object DataView]",SL="[object Float32Array]",EL="[object Float64Array]",kL="[object Int8Array]",TL="[object Int16Array]",CL="[object Int32Array]",IL="[object Uint8Array]",PL="[object Uint8ClampedArray]",AL="[object Uint16Array]",jL="[object Uint32Array]";function NL(t,e,r){var n=t.constructor;switch(e){case bL:return sm(t);case hL:case pL:return new n(+t);case xL:return lL(t,r);case SL:case EL:case kL:case TL:case CL:case IL:case PL:case AL:case jL:return fL(t,r);case mL:return new n;case gL:case wL:return new n(t);case yL:return uL(t);case vL:return new n;case _L:return dL(t)}}var Uv=Object.create,OL=function(){function t(){}return function(e){if(!Eo(e))return{};if(Uv)return Uv(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function RL(t){return typeof t.constructor=="function"&&!em(t)?OL(Yp(t)):{}}var $L="[object Map]";function DL(t){return Os(t)&&Ar(t)==$L}var Bv=Oi&&Oi.isMap,LL=Bv?Zp(Bv):DL,FL="[object Set]";function ML(t){return Os(t)&&Ar(t)==FL}var zv=Oi&&Oi.isSet,UL=zv?Zp(zv):ML,BL=1,zL=2,VL=4,gS="[object Arguments]",WL="[object Array]",HL="[object Boolean]",qL="[object Date]",KL="[object Error]",yS="[object Function]",GL="[object GeneratorFunction]",JL="[object Map]",QL="[object Number]",vS="[object Object]",XL="[object RegExp]",YL="[object Set]",ZL="[object String]",eF="[object Symbol]",tF="[object WeakMap]",rF="[object ArrayBuffer]",nF="[object DataView]",sF="[object Float32Array]",iF="[object Float64Array]",aF="[object Int8Array]",oF="[object Int16Array]",lF="[object Int32Array]",cF="[object Uint8Array]",uF="[object Uint8ClampedArray]",dF="[object Uint16Array]",fF="[object Uint32Array]",le={};le[gS]=le[WL]=le[rF]=le[nF]=le[HL]=le[qL]=le[sF]=le[iF]=le[aF]=le[oF]=le[lF]=le[JL]=le[QL]=le[vS]=le[XL]=le[YL]=le[ZL]=le[eF]=le[cF]=le[uF]=le[dF]=le[fF]=!0;le[KL]=le[yS]=le[tF]=!1;function Oa(t,e,r,n,s,i){var a,o=e&BL,l=e&zL,c=e&VL;if(a!==void 0)return a;if(!Eo(t))return t;var d=ko(t);if(d){if(a=oL(t),!o)return dS(t,a)}else{var f=Ar(t),h=f==yS||f==GL;if(iS(t))return WD(t,o);if(f==vS||f==gS||h&&!s){if(a=l||h?{}:RL(t),!o)return l?QD(t,zD(a,t)):GD(t,LD(a,t))}else{if(!le[f])return s?t:{};a=NL(t,f,o)}}i||(i=new Wi);var g=i.get(t);if(g)return g;i.set(t,a),UL(t)?t.forEach(function(_){a.add(Oa(_,e,r,_,t,i))}):LL(t)&&t.forEach(function(_,m){a.set(m,Oa(_,e,r,m,t,i))});var y=c?l?YD:XD:l?rm:tm,w=d?void 0:y(t);return z$(w||t,function(_,m){w&&(m=_,_=t[m]),rS(a,m,Oa(_,e,r,m,t,i))}),a}var hF=1,pF=4;function da(t){return Oa(t,hF|pF)}var Vv=Array.isArray,Wv=Object.keys,mF=Object.prototype.hasOwnProperty,gF=typeof Element<"u";function hh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Vv(t),n=Vv(e),s,i,a;if(r&&n){if(i=t.length,i!=e.length)return!1;for(s=i;s--!==0;)if(!hh(t[s],e[s]))return!1;return!0}if(r!=n)return!1;var o=t instanceof Date,l=e instanceof Date;if(o!=l)return!1;if(o&&l)return t.getTime()==e.getTime();var c=t instanceof RegExp,d=e instanceof RegExp;if(c!=d)return!1;if(c&&d)return t.toString()==e.toString();var f=Wv(t);if(i=f.length,i!==Wv(e).length)return!1;for(s=i;s--!==0;)if(!mF.call(e,f[s]))return!1;if(gF&&t instanceof Element&&e instanceof Element)return t===e;for(s=i;s--!==0;)if(a=f[s],!(a==="_owner"&&t.$$typeof)&&!hh(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}var yF=function(e,r){try{return hh(e,r)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||n.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}};const un=Pc(yF);var vF=4;function Hv(t){return Oa(t,vF)}function wS(t,e){for(var r=-1,n=t==null?0:t.length,s=Array(n);++r<n;)s[r]=e(t[r],r,t);return s}var wF="[object Symbol]";function im(t){return typeof t=="symbol"||Os(t)&&Ns(t)==wF}var _F="Expected a function";function am(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(_F);var r=function(){var n=arguments,s=e?e.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var a=t.apply(this,n);return r.cache=i.set(s,a)||i,a};return r.cache=new(am.Cache||Wn),r}am.Cache=Wn;var bF=500;function xF(t){var e=am(t,function(n){return r.size===bF&&r.clear(),n}),r=e.cache;return e}var SF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,EF=/\\(\\)?/g,kF=xF(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(SF,function(r,n,s,i){e.push(s?i.replace(EF,"$1"):n||r)}),e});function TF(t){if(typeof t=="string"||im(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var qv=Dn?Dn.prototype:void 0,Kv=qv?qv.toString:void 0;function _S(t){if(typeof t=="string")return t;if(ko(t))return wS(t,_S)+"";if(im(t))return Kv?Kv.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function CF(t){return t==null?"":_S(t)}function bS(t){return ko(t)?wS(t,TF):im(t)?[t]:dS(kF(CF(t)))}var xS={exports:{}},re={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Re=typeof Symbol=="function"&&Symbol.for,om=Re?Symbol.for("react.element"):60103,lm=Re?Symbol.for("react.portal"):60106,lu=Re?Symbol.for("react.fragment"):60107,cu=Re?Symbol.for("react.strict_mode"):60108,uu=Re?Symbol.for("react.profiler"):60114,du=Re?Symbol.for("react.provider"):60109,fu=Re?Symbol.for("react.context"):60110,cm=Re?Symbol.for("react.async_mode"):60111,hu=Re?Symbol.for("react.concurrent_mode"):60111,pu=Re?Symbol.for("react.forward_ref"):60112,mu=Re?Symbol.for("react.suspense"):60113,IF=Re?Symbol.for("react.suspense_list"):60120,gu=Re?Symbol.for("react.memo"):60115,yu=Re?Symbol.for("react.lazy"):60116,PF=Re?Symbol.for("react.block"):60121,AF=Re?Symbol.for("react.fundamental"):60117,jF=Re?Symbol.for("react.responder"):60118,NF=Re?Symbol.for("react.scope"):60119;function kt(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case om:switch(t=t.type,t){case cm:case hu:case lu:case uu:case cu:case mu:return t;default:switch(t=t&&t.$$typeof,t){case fu:case pu:case yu:case gu:case du:return t;default:return e}}case lm:return e}}}function SS(t){return kt(t)===hu}re.AsyncMode=cm;re.ConcurrentMode=hu;re.ContextConsumer=fu;re.ContextProvider=du;re.Element=om;re.ForwardRef=pu;re.Fragment=lu;re.Lazy=yu;re.Memo=gu;re.Portal=lm;re.Profiler=uu;re.StrictMode=cu;re.Suspense=mu;re.isAsyncMode=function(t){return SS(t)||kt(t)===cm};re.isConcurrentMode=SS;re.isContextConsumer=function(t){return kt(t)===fu};re.isContextProvider=function(t){return kt(t)===du};re.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===om};re.isForwardRef=function(t){return kt(t)===pu};re.isFragment=function(t){return kt(t)===lu};re.isLazy=function(t){return kt(t)===yu};re.isMemo=function(t){return kt(t)===gu};re.isPortal=function(t){return kt(t)===lm};re.isProfiler=function(t){return kt(t)===uu};re.isStrictMode=function(t){return kt(t)===cu};re.isSuspense=function(t){return kt(t)===mu};re.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===lu||t===hu||t===uu||t===cu||t===mu||t===IF||typeof t=="object"&&t!==null&&(t.$$typeof===yu||t.$$typeof===gu||t.$$typeof===du||t.$$typeof===fu||t.$$typeof===pu||t.$$typeof===AF||t.$$typeof===jF||t.$$typeof===NF||t.$$typeof===PF)};re.typeOf=kt;xS.exports=re;var OF=xS.exports,um=OF,RF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},$F={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},DF={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ES={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},dm={};dm[um.ForwardRef]=DF;dm[um.Memo]=ES;function Gv(t){return um.isMemo(t)?ES:dm[t.$$typeof]||RF}var LF=Object.defineProperty,FF=Object.getOwnPropertyNames,Jv=Object.getOwnPropertySymbols,MF=Object.getOwnPropertyDescriptor,UF=Object.getPrototypeOf,Qv=Object.prototype;function kS(t,e,r){if(typeof e!="string"){if(Qv){var n=UF(e);n&&n!==Qv&&kS(t,n,r)}var s=FF(e);Jv&&(s=s.concat(Jv(e)));for(var i=Gv(t),a=Gv(e),o=0;o<s.length;++o){var l=s[o];if(!$F[l]&&!(r&&r[l])&&!(a&&a[l])&&!(i&&i[l])){var c=MF(e,l);try{LF(t,l,c)}catch{}}}}return t}var BF=kS;const zF=Pc(BF);function ee(){return ee=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ee.apply(this,arguments)}function TS(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function bn(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Xv(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var vu=b.createContext(void 0);vu.displayName="FormikContext";var VF=vu.Provider,WF=vu.Consumer;function CS(){var t=b.useContext(vu);return t}var Yv=function(e){return Array.isArray(e)&&e.length===0},Le=function(e){return typeof e=="function"},To=function(e){return e!==null&&typeof e=="object"},HF=function(e){return String(Math.floor(Number(e)))===e},jd=function(e){return Object.prototype.toString.call(e)==="[object String]"},IS=function(e){return b.Children.count(e)===0},Nd=function(e){return To(e)&&Le(e.then)};function me(t,e,r,n){n===void 0&&(n=0);for(var s=bS(e);t&&n<s.length;)t=t[s[n++]];return n!==s.length&&!t||t===void 0?r:t}function vr(t,e,r){for(var n=Hv(t),s=n,i=0,a=bS(e);i<a.length-1;i++){var o=a[i],l=me(t,a.slice(0,i+1));if(l&&(To(l)||Array.isArray(l)))s=s[o]=Hv(l);else{var c=a[i+1];s=s[o]=HF(c)&&Number(c)>=0?[]:{}}}return(i===0?t:s)[a[i]]===r?t:(r===void 0?delete s[a[i]]:s[a[i]]=r,i===0&&r===void 0&&delete n[a[i]],n)}function PS(t,e,r,n){r===void 0&&(r=new WeakMap),n===void 0&&(n={});for(var s=0,i=Object.keys(t);s<i.length;s++){var a=i[s],o=t[a];To(o)?r.get(o)||(r.set(o,!0),n[a]=Array.isArray(o)?[]:{},PS(o,e,r,n[a])):n[a]=e}return n}function qF(t,e){switch(e.type){case"SET_VALUES":return ee({},t,{values:e.payload});case"SET_TOUCHED":return ee({},t,{touched:e.payload});case"SET_ERRORS":return un(t.errors,e.payload)?t:ee({},t,{errors:e.payload});case"SET_STATUS":return ee({},t,{status:e.payload});case"SET_ISSUBMITTING":return ee({},t,{isSubmitting:e.payload});case"SET_ISVALIDATING":return ee({},t,{isValidating:e.payload});case"SET_FIELD_VALUE":return ee({},t,{values:vr(t.values,e.payload.field,e.payload.value)});case"SET_FIELD_TOUCHED":return ee({},t,{touched:vr(t.touched,e.payload.field,e.payload.value)});case"SET_FIELD_ERROR":return ee({},t,{errors:vr(t.errors,e.payload.field,e.payload.value)});case"RESET_FORM":return ee({},t,e.payload);case"SET_FORMIK_STATE":return e.payload(t);case"SUBMIT_ATTEMPT":return ee({},t,{touched:PS(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":return ee({},t,{isSubmitting:!1});case"SUBMIT_SUCCESS":return ee({},t,{isSubmitting:!1});default:return t}}var Xn={},nl={};function KF(t){var e=t.validateOnChange,r=e===void 0?!0:e,n=t.validateOnBlur,s=n===void 0?!0:n,i=t.validateOnMount,a=i===void 0?!1:i,o=t.isInitialValid,l=t.enableReinitialize,c=l===void 0?!1:l,d=t.onSubmit,f=bn(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),h=ee({validateOnChange:r,validateOnBlur:s,validateOnMount:a,onSubmit:d},f),g=b.useRef(h.initialValues),y=b.useRef(h.initialErrors||Xn),w=b.useRef(h.initialTouched||nl),_=b.useRef(h.initialStatus),m=b.useRef(!1),p=b.useRef({});b.useEffect(function(){return m.current=!0,function(){m.current=!1}},[]);var v=b.useState(0),S=v[1],T=b.useRef({values:da(h.initialValues),errors:da(h.initialErrors)||Xn,touched:da(h.initialTouched)||nl,status:da(h.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),E=T.current,x=b.useCallback(function(k){var O=T.current;T.current=qF(O,k),O!==T.current&&S(function(M){return M+1})},[]),I=b.useCallback(function(k,O){return new Promise(function(M,B){var J=h.validate(k,O);J==null?M(Xn):Nd(J)?J.then(function(Z){M(Z||Xn)},function(Z){B(Z)}):M(J)})},[h.validate]),j=b.useCallback(function(k,O){var M=h.validationSchema,B=Le(M)?M(O):M,J=O&&B.validateAt?B.validateAt(O,k):JF(k,B);return new Promise(function(Z,Ge){J.then(function(){Z(Xn)},function(Sr){Sr.name==="ValidationError"?Z(GF(Sr)):Ge(Sr)})})},[h.validationSchema]),N=b.useCallback(function(k,O){return new Promise(function(M){return M(p.current[k].validate(O))})},[]),C=b.useCallback(function(k){var O=Object.keys(p.current).filter(function(B){return Le(p.current[B].validate)}),M=O.length>0?O.map(function(B){return N(B,me(k,B))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(M).then(function(B){return B.reduce(function(J,Z,Ge){return Z==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||Z&&(J=vr(J,O[Ge],Z)),J},{})})},[N]),D=b.useCallback(function(k){return Promise.all([C(k),h.validationSchema?j(k):{},h.validate?I(k):{}]).then(function(O){var M=O[0],B=O[1],J=O[2],Z=lh.all([M,B,J],{arrayMerge:QF});return Z})},[h.validate,h.validationSchema,C,I,j]),K=Tt(function(k){return k===void 0&&(k=E.values),x({type:"SET_ISVALIDATING",payload:!0}),D(k).then(function(O){return m.current&&(x({type:"SET_ISVALIDATING",payload:!1}),x({type:"SET_ERRORS",payload:O})),O})});b.useEffect(function(){a&&m.current===!0&&un(g.current,h.initialValues)&&K(g.current)},[a,K]);var pe=b.useCallback(function(k){var O=k&&k.values?k.values:g.current,M=k&&k.errors?k.errors:y.current?y.current:h.initialErrors||{},B=k&&k.touched?k.touched:w.current?w.current:h.initialTouched||{},J=k&&k.status?k.status:_.current?_.current:h.initialStatus;g.current=O,y.current=M,w.current=B,_.current=J;var Z=function(){x({type:"RESET_FORM",payload:{isSubmitting:!!k&&!!k.isSubmitting,errors:M,touched:B,status:J,values:O,isValidating:!!k&&!!k.isValidating,submitCount:k&&k.submitCount&&typeof k.submitCount=="number"?k.submitCount:0}})};if(h.onReset){var Ge=h.onReset(E.values,rg);Nd(Ge)?Ge.then(Z):Z()}else Z()},[h.initialErrors,h.initialStatus,h.initialTouched,h.onReset]);b.useEffect(function(){m.current===!0&&!un(g.current,h.initialValues)&&c&&(g.current=h.initialValues,pe(),a&&K(g.current))},[c,h.initialValues,pe,a,K]),b.useEffect(function(){c&&m.current===!0&&!un(y.current,h.initialErrors)&&(y.current=h.initialErrors||Xn,x({type:"SET_ERRORS",payload:h.initialErrors||Xn}))},[c,h.initialErrors]),b.useEffect(function(){c&&m.current===!0&&!un(w.current,h.initialTouched)&&(w.current=h.initialTouched||nl,x({type:"SET_TOUCHED",payload:h.initialTouched||nl}))},[c,h.initialTouched]),b.useEffect(function(){c&&m.current===!0&&!un(_.current,h.initialStatus)&&(_.current=h.initialStatus,x({type:"SET_STATUS",payload:h.initialStatus}))},[c,h.initialStatus,h.initialTouched]);var xr=Tt(function(k){if(p.current[k]&&Le(p.current[k].validate)){var O=me(E.values,k),M=p.current[k].validate(O);return Nd(M)?(x({type:"SET_ISVALIDATING",payload:!0}),M.then(function(B){return B}).then(function(B){x({type:"SET_FIELD_ERROR",payload:{field:k,value:B}}),x({type:"SET_ISVALIDATING",payload:!1})})):(x({type:"SET_FIELD_ERROR",payload:{field:k,value:M}}),Promise.resolve(M))}else if(h.validationSchema)return x({type:"SET_ISVALIDATING",payload:!0}),j(E.values,k).then(function(B){return B}).then(function(B){x({type:"SET_FIELD_ERROR",payload:{field:k,value:me(B,k)}}),x({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Gn=b.useCallback(function(k,O){var M=O.validate;p.current[k]={validate:M}},[]),L=b.useCallback(function(k){delete p.current[k]},[]),P=Tt(function(k,O){x({type:"SET_TOUCHED",payload:k});var M=O===void 0?s:O;return M?K(E.values):Promise.resolve()}),$=b.useCallback(function(k){x({type:"SET_ERRORS",payload:k})},[]),F=Tt(function(k,O){var M=Le(k)?k(E.values):k;x({type:"SET_VALUES",payload:M});var B=O===void 0?r:O;return B?K(M):Promise.resolve()}),G=b.useCallback(function(k,O){x({type:"SET_FIELD_ERROR",payload:{field:k,value:O}})},[]),ue=Tt(function(k,O,M){x({type:"SET_FIELD_VALUE",payload:{field:k,value:O}});var B=M===void 0?r:M;return B?K(vr(E.values,k,O)):Promise.resolve()}),Jn=b.useCallback(function(k,O){var M=O,B=k,J;if(!jd(k)){k.persist&&k.persist();var Z=k.target?k.target:k.currentTarget,Ge=Z.type,Sr=Z.name,Fu=Z.id,Mu=Z.value,mk=Z.checked;Z.outerHTML;var ng=Z.options,gk=Z.multiple;M=O||Sr||Fu,B=/number|range/.test(Ge)?(J=parseFloat(Mu),isNaN(J)?"":J):/checkbox/.test(Ge)?YF(me(E.values,M),mk,Mu):ng&&gk?XF(ng):Mu}M&&ue(M,B)},[ue,E.values]),Ft=Tt(function(k){if(jd(k))return function(O){return Jn(O,k)};Jn(k)}),er=Tt(function(k,O,M){O===void 0&&(O=!0),x({type:"SET_FIELD_TOUCHED",payload:{field:k,value:O}});var B=M===void 0?s:M;return B?K(E.values):Promise.resolve()}),tr=b.useCallback(function(k,O){k.persist&&k.persist();var M=k.target,B=M.name,J=M.id;M.outerHTML;var Z=O||B||J;er(Z,!0)},[er]),Qr=Tt(function(k){if(jd(k))return function(O){return tr(O,k)};tr(k)}),Zm=b.useCallback(function(k){Le(k)?x({type:"SET_FORMIK_STATE",payload:k}):x({type:"SET_FORMIK_STATE",payload:function(){return k}})},[]),eg=b.useCallback(function(k){x({type:"SET_STATUS",payload:k})},[]),tg=b.useCallback(function(k){x({type:"SET_ISSUBMITTING",payload:k})},[]),Du=Tt(function(){return x({type:"SUBMIT_ATTEMPT"}),K().then(function(k){var O=k instanceof Error,M=!O&&Object.keys(k).length===0;if(M){var B;try{if(B=lk(),B===void 0)return}catch(J){throw J}return Promise.resolve(B).then(function(J){return m.current&&x({type:"SUBMIT_SUCCESS"}),J}).catch(function(J){if(m.current)throw x({type:"SUBMIT_FAILURE"}),J})}else if(m.current&&(x({type:"SUBMIT_FAILURE"}),O))throw k})}),ok=Tt(function(k){k&&k.preventDefault&&Le(k.preventDefault)&&k.preventDefault(),k&&k.stopPropagation&&Le(k.stopPropagation)&&k.stopPropagation(),Du().catch(function(O){console.warn("Warning: An unhandled error was caught from submitForm()",O)})}),rg={resetForm:pe,validateForm:K,validateField:xr,setErrors:$,setFieldError:G,setFieldTouched:er,setFieldValue:ue,setStatus:eg,setSubmitting:tg,setTouched:P,setValues:F,setFormikState:Zm,submitForm:Du},lk=Tt(function(){return d(E.values,rg)}),ck=Tt(function(k){k&&k.preventDefault&&Le(k.preventDefault)&&k.preventDefault(),k&&k.stopPropagation&&Le(k.stopPropagation)&&k.stopPropagation(),pe()}),uk=b.useCallback(function(k){return{value:me(E.values,k),error:me(E.errors,k),touched:!!me(E.touched,k),initialValue:me(g.current,k),initialTouched:!!me(w.current,k),initialError:me(y.current,k)}},[E.errors,E.touched,E.values]),dk=b.useCallback(function(k){return{setValue:function(M,B){return ue(k,M,B)},setTouched:function(M,B){return er(k,M,B)},setError:function(M){return G(k,M)}}},[ue,er,G]),fk=b.useCallback(function(k){var O=To(k),M=O?k.name:k,B=me(E.values,M),J={name:M,value:B,onChange:Ft,onBlur:Qr};if(O){var Z=k.type,Ge=k.value,Sr=k.as,Fu=k.multiple;Z==="checkbox"?Ge===void 0?J.checked=!!B:(J.checked=!!(Array.isArray(B)&&~B.indexOf(Ge)),J.value=Ge):Z==="radio"?(J.checked=B===Ge,J.value=Ge):Sr==="select"&&Fu&&(J.value=J.value||[],J.multiple=!0)}return J},[Qr,Ft,E.values]),Lu=b.useMemo(function(){return!un(g.current,E.values)},[g.current,E.values]),hk=b.useMemo(function(){return typeof o<"u"?Lu?E.errors&&Object.keys(E.errors).length===0:o!==!1&&Le(o)?o(h):o:E.errors&&Object.keys(E.errors).length===0},[o,Lu,E.errors,h]),pk=ee({},E,{initialValues:g.current,initialErrors:y.current,initialTouched:w.current,initialStatus:_.current,handleBlur:Qr,handleChange:Ft,handleReset:ck,handleSubmit:ok,resetForm:pe,setErrors:$,setFormikState:Zm,setFieldTouched:er,setFieldValue:ue,setFieldError:G,setStatus:eg,setSubmitting:tg,setTouched:P,setValues:F,submitForm:Du,validateForm:K,validateField:xr,isValid:hk,dirty:Lu,unregisterField:L,registerField:Gn,getFieldProps:fk,getFieldMeta:uk,getFieldHelpers:dk,validateOnBlur:s,validateOnChange:r,validateOnMount:a});return pk}function fm(t){var e=KF(t),r=t.component,n=t.children,s=t.render,i=t.innerRef;return b.useImperativeHandle(i,function(){return e}),b.createElement(VF,{value:e},r?b.createElement(r,e):s?s(e):n?Le(n)?n(e):IS(n)?null:b.Children.only(n):null)}function GF(t){var e={};if(t.inner){if(t.inner.length===0)return vr(e,t.path,t.message);for(var s=t.inner,r=Array.isArray(s),n=0,s=r?s:s[Symbol.iterator]();;){var i;if(r){if(n>=s.length)break;i=s[n++]}else{if(n=s.next(),n.done)break;i=n.value}var a=i;me(e,a.path)||(e=vr(e,a.path,a.message))}}return e}function JF(t,e,r,n){r===void 0&&(r=!1);var s=ph(t);return e[r?"validateSync":"validate"](s,{abortEarly:!1,context:s})}function ph(t){var e=Array.isArray(t)?[]:{};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=String(r);Array.isArray(t[n])===!0?e[n]=t[n].map(function(s){return Array.isArray(s)===!0||bv(s)?ph(s):s!==""?s:void 0}):bv(t[n])?e[n]=ph(t[n]):e[n]=t[n]!==""?t[n]:void 0}return e}function QF(t,e,r){var n=t.slice();return e.forEach(function(i,a){if(typeof n[a]>"u"){var o=r.clone!==!1,l=o&&r.isMergeableObject(i);n[a]=l?lh(Array.isArray(i)?[]:{},i,r):i}else r.isMergeableObject(i)?n[a]=lh(t[a],i,r):t.indexOf(i)===-1&&n.push(i)}),n}function XF(t){return Array.from(t).filter(function(e){return e.selected}).map(function(e){return e.value})}function YF(t,e,r){if(typeof t=="boolean")return!!e;var n=[],s=!1,i=-1;if(Array.isArray(t))n=t,i=t.indexOf(r),s=i>=0;else if(!r||r=="true"||r=="false")return!!e;return e&&r&&!s?n.concat(r):s?n.slice(0,i).concat(n.slice(i+1)):n}var ZF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect;function Tt(t){var e=b.useRef(t);return ZF(function(){e.current=t}),b.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e.current.apply(void 0,n)},[])}function ie(t){var e=t.validate,r=t.name,n=t.render,s=t.children,i=t.as,a=t.component,o=t.className,l=bn(t,["validate","name","render","children","as","component","className"]),c=CS(),d=bn(c,["validate","validationSchema"]),f=d.registerField,h=d.unregisterField;b.useEffect(function(){return f(r,{validate:e}),function(){h(r)}},[f,h,r,e]);var g=d.getFieldProps(ee({name:r},l)),y=d.getFieldMeta(r),w={field:g,form:d};if(n)return n(ee({},w,{meta:y}));if(Le(s))return s(ee({},w,{meta:y}));if(a){if(typeof a=="string"){var _=l.innerRef,m=bn(l,["innerRef"]);return b.createElement(a,ee({ref:_},g,m,{className:o}),s)}return b.createElement(a,ee({field:g,form:d},l,{className:o}),s)}var p=i||"input";if(typeof p=="string"){var v=l.innerRef,S=bn(l,["innerRef"]);return b.createElement(p,ee({ref:v},g,S,{className:o}),s)}return b.createElement(p,ee({},g,l,{className:o}),s)}var wu=b.forwardRef(function(t,e){var r=t.action,n=bn(t,["action"]),s=r??"#",i=CS(),a=i.handleReset,o=i.handleSubmit;return b.createElement("form",ee({onSubmit:o,ref:e,onReset:a,action:s},n))});wu.displayName="Form";function eM(t){var e=function(s){return b.createElement(WF,null,function(i){return b.createElement(t,ee({},s,{formik:i}))})},r=t.displayName||t.name||t.constructor&&t.constructor.name||"Component";return e.WrappedComponent=t,e.displayName="FormikConnect("+r+")",zF(e,t)}var tM=function(e,r,n){var s=ks(e),i=s[r];return s.splice(r,1),s.splice(n,0,i),s},rM=function(e,r,n){var s=ks(e),i=s[r];return s[r]=s[n],s[n]=i,s},Od=function(e,r,n){var s=ks(e);return s.splice(r,0,n),s},nM=function(e,r,n){var s=ks(e);return s[r]=n,s},ks=function(e){if(e){if(Array.isArray(e))return[].concat(e);var r=Object.keys(e).map(function(n){return parseInt(n)}).reduce(function(n,s){return s>n?s:n},0);return Array.from(ee({},e,{length:r+1}))}else return[]},Zv=function(e,r){var n=typeof e=="function"?e:r;return function(s){if(Array.isArray(s)||To(s)){var i=ks(s);return n(i)}return s}},sM=function(t){TS(e,t);function e(n){var s;return s=t.call(this,n)||this,s.updateArrayField=function(i,a,o){var l=s.props,c=l.name,d=l.formik.setFormikState;d(function(f){var h=Zv(o,i),g=Zv(a,i),y=vr(f.values,c,i(me(f.values,c))),w=o?h(me(f.errors,c)):void 0,_=a?g(me(f.touched,c)):void 0;return Yv(w)&&(w=void 0),Yv(_)&&(_=void 0),ee({},f,{values:y,errors:o?vr(f.errors,c,w):f.errors,touched:a?vr(f.touched,c,_):f.touched})})},s.push=function(i){return s.updateArrayField(function(a){return[].concat(ks(a),[da(i)])},!1,!1)},s.handlePush=function(i){return function(){return s.push(i)}},s.swap=function(i,a){return s.updateArrayField(function(o){return rM(o,i,a)},!0,!0)},s.handleSwap=function(i,a){return function(){return s.swap(i,a)}},s.move=function(i,a){return s.updateArrayField(function(o){return tM(o,i,a)},!0,!0)},s.handleMove=function(i,a){return function(){return s.move(i,a)}},s.insert=function(i,a){return s.updateArrayField(function(o){return Od(o,i,a)},function(o){return Od(o,i,null)},function(o){return Od(o,i,null)})},s.handleInsert=function(i,a){return function(){return s.insert(i,a)}},s.replace=function(i,a){return s.updateArrayField(function(o){return nM(o,i,a)},!1,!1)},s.handleReplace=function(i,a){return function(){return s.replace(i,a)}},s.unshift=function(i){var a=-1;return s.updateArrayField(function(o){var l=o?[i].concat(o):[i];return a=l.length,l},function(o){return o?[null].concat(o):[null]},function(o){return o?[null].concat(o):[null]}),a},s.handleUnshift=function(i){return function(){return s.unshift(i)}},s.handleRemove=function(i){return function(){return s.remove(i)}},s.handlePop=function(){return function(){return s.pop()}},s.remove=s.remove.bind(Xv(s)),s.pop=s.pop.bind(Xv(s)),s}var r=e.prototype;return r.componentDidUpdate=function(s){this.props.validateOnChange&&this.props.formik.validateOnChange&&!un(me(s.formik.values,s.name),me(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},r.remove=function(s){var i;return this.updateArrayField(function(a){var o=a?ks(a):[];return i||(i=o[s]),Le(o.splice)&&o.splice(s,1),Le(o.every)&&o.every(function(l){return l===void 0})?[]:o},!0,!0),i},r.pop=function(){var s;return this.updateArrayField(function(i){var a=i.slice();return s||(s=a&&a.pop&&a.pop()),a},!0,!0),s},r.render=function(){var s={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},i=this.props,a=i.component,o=i.render,l=i.children,c=i.name,d=i.formik,f=bn(d,["validate","validationSchema"]),h=ee({},s,{form:f,name:c});return a?b.createElement(a,h):o?o(h):l?typeof l=="function"?l(h):IS(l)?null:b.Children.only(l):null},e}(b.Component);sM.defaultProps={validateOnChange:!0};var iM=function(t){TS(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.shouldComponentUpdate=function(s){return me(this.props.formik.errors,this.props.name)!==me(s.formik.errors,this.props.name)||me(this.props.formik.touched,this.props.name)!==me(s.formik.touched,this.props.name)||Object.keys(this.props).length!==Object.keys(s).length},r.render=function(){var s=this.props,i=s.component,a=s.formik,o=s.render,l=s.children,c=s.name,d=bn(s,["component","formik","render","children","name"]),f=me(a.touched,c),h=me(a.errors,c);return f&&h?o?Le(o)?o(h):null:l?Le(l)?l(h):null:i?b.createElement(i,d,h):h:null},e}(b.Component),nt=eM(iM);function Ds(t){this._maxSize=t,this.clear()}Ds.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Ds.prototype.get=function(t){return this._values[t]};Ds.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var aM=/[^.^\]^[]+|(?=\[\]|\.\.)/g,AS=/^\d+$/,oM=/^\d/,lM=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,cM=/^\s*(['"]?)(.*?)(\1)\s*$/,hm=512,ew=new Ds(hm),tw=new Ds(hm),rw=new Ds(hm),ps={Cache:Ds,split:mh,normalizePath:Rd,setter:function(t){var e=Rd(t);return tw.get(t)||tw.set(t,function(n,s){for(var i=0,a=e.length,o=n;i<a-1;){var l=e[i];if(l==="__proto__"||l==="constructor"||l==="prototype")return n;o=o[e[i++]]}o[e[i]]=s})},getter:function(t,e){var r=Rd(t);return rw.get(t)||rw.set(t,function(s){for(var i=0,a=r.length;i<a;)if(s!=null||!e)s=s[r[i++]];else return;return s})},join:function(t){return t.reduce(function(e,r){return e+(pm(r)||AS.test(r)?"["+r+"]":(e?".":"")+r)},"")},forEach:function(t,e,r){uM(Array.isArray(t)?t:mh(t),e,r)}};function Rd(t){return ew.get(t)||ew.set(t,mh(t).map(function(e){return e.replace(cM,"$2")}))}function mh(t){return t.match(aM)||[""]}function uM(t,e,r){var n=t.length,s,i,a,o;for(i=0;i<n;i++)s=t[i],s&&(hM(s)&&(s='"'+s+'"'),o=pm(s),a=!o&&/^\d+$/.test(s),e.call(r,s,o,a,i,t))}function pm(t){return typeof t=="string"&&t&&["'",'"'].indexOf(t.charAt(0))!==-1}function dM(t){return t.match(oM)&&!t.match(AS)}function fM(t){return lM.test(t)}function hM(t){return!pm(t)&&(dM(t)||fM(t))}const pM=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,_u=t=>t.match(pM)||[],bu=t=>t[0].toUpperCase()+t.slice(1),mm=(t,e)=>_u(t).join(e).toLowerCase(),jS=t=>_u(t).reduce((e,r)=>`${e}${e?r[0].toUpperCase()+r.slice(1).toLowerCase():r.toLowerCase()}`,""),mM=t=>bu(jS(t)),gM=t=>mm(t,"_"),yM=t=>mm(t,"-"),vM=t=>bu(mm(t," ")),wM=t=>_u(t).map(bu).join(" ");var $d={words:_u,upperFirst:bu,camelCase:jS,pascalCase:mM,snakeCase:gM,kebabCase:yM,sentenceCase:vM,titleCase:wM},gm={exports:{}};gm.exports=function(t){return NS(_M(t),t)};gm.exports.array=NS;function NS(t,e){var r=t.length,n=new Array(r),s={},i=r,a=bM(e),o=xM(t);for(e.forEach(function(c){if(!o.has(c[0])||!o.has(c[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});i--;)s[i]||l(t[i],i,new Set);return n;function l(c,d,f){if(f.has(c)){var h;try{h=", node was:"+JSON.stringify(c)}catch{h=""}throw new Error("Cyclic dependency"+h)}if(!o.has(c))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(!s[d]){s[d]=!0;var g=a.get(c)||new Set;if(g=Array.from(g),d=g.length){f.add(c);do{var y=g[--d];l(y,o.get(y),f)}while(d);f.delete(c)}n[--r]=c}}}function _M(t){for(var e=new Set,r=0,n=t.length;r<n;r++){var s=t[r];e.add(s[0]),e.add(s[1])}return Array.from(e)}function bM(t){for(var e=new Map,r=0,n=t.length;r<n;r++){var s=t[r];e.has(s[0])||e.set(s[0],new Set),e.has(s[1])||e.set(s[1],new Set),e.get(s[0]).add(s[1])}return e}function xM(t){for(var e=new Map,r=0,n=t.length;r<n;r++)e.set(t[r],r);return e}var SM=gm.exports;const EM=Pc(SM),kM=Object.prototype.toString,TM=Error.prototype.toString,CM=RegExp.prototype.toString,IM=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",PM=/^Symbol\((.*)\)(.*)$/;function AM(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function nw(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const r=typeof t;if(r==="number")return AM(t);if(r==="string")return e?`"${t}"`:t;if(r==="function")return"[Function "+(t.name||"anonymous")+"]";if(r==="symbol")return IM.call(t).replace(PM,"Symbol($1)");const n=kM.call(t).slice(8,-1);return n==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):n==="Error"||t instanceof Error?"["+TM.call(t)+"]":n==="RegExp"?CM.call(t):null}function Fr(t,e){let r=nw(t,e);return r!==null?r:JSON.stringify(t,function(n,s){let i=nw(this[n],e);return i!==null?i:s},2)}function OS(t){return t==null?[]:[].concat(t)}let RS,$S,DS,jM=/\$\{\s*(\w+)\s*\}/g;RS=Symbol.toStringTag;class sw{constructor(e,r,n,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[RS]="Error",this.name="ValidationError",this.value=r,this.path=n,this.type=s,this.errors=[],this.inner=[],OS(e).forEach(i=>{if(at.isError(i)){this.errors.push(...i.errors);const a=i.inner.length?i.inner:[i];this.inner.push(...a)}else this.errors.push(i)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}$S=Symbol.hasInstance;DS=Symbol.toStringTag;class at extends Error{static formatError(e,r){const n=r.label||r.path||"this";return r=Object.assign({},r,{path:n,originalPath:r.path}),typeof e=="string"?e.replace(jM,(s,i)=>Fr(r[i])):typeof e=="function"?e(r):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,r,n,s,i){const a=new sw(e,r,n,s);if(i)return a;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[DS]="Error",this.name=a.name,this.message=a.message,this.type=a.type,this.value=a.value,this.path=a.path,this.errors=a.errors,this.inner=a.inner,Error.captureStackTrace&&Error.captureStackTrace(this,at)}static[$S](e){return sw[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let ar={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:r,originalValue:n})=>{const s=n!=null&&n!==r?` (cast from the value \`${Fr(n,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${Fr(r,!0)}\``+s:`${t} must match the configured type. The validated value was: \`${Fr(r,!0)}\``+s}},tt={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},NM={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},gh={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},OM={isValue:"${path} field must be ${value}"},Al={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},jl={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},RM={notType:t=>{const{path:e,value:r,spec:n}=t,s=n.types.length;if(Array.isArray(r)){if(r.length<s)return`${e} tuple value has too few items, expected a length of ${s} but got ${r.length} for value: \`${Fr(r,!0)}\``;if(r.length>s)return`${e} tuple value has too many items, expected a length of ${s} but got ${r.length} for value: \`${Fr(r,!0)}\``}return at.formatError(ar.notType,t)}};Object.assign(Object.create(null),{mixed:ar,string:tt,number:NM,date:gh,object:Al,array:jl,boolean:OM,tuple:RM});const xu=t=>t&&t.__isYupSchema__;class bc{static fromOptions(e,r){if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:s,otherwise:i}=r,a=typeof n=="function"?n:(...o)=>o.every(l=>l===n);return new bc(e,(o,l)=>{var c;let d=a(...o)?s:i;return(c=d==null?void 0:d(l))!=null?c:l})}constructor(e,r){this.fn=void 0,this.refs=e,this.refs=e,this.fn=r}resolve(e,r){let n=this.refs.map(i=>i.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),s=this.fn(n,e,r);if(s===void 0||s===e)return e;if(!xu(s))throw new TypeError("conditions must return a schema object");return s.resolve(r)}}const sl={context:"$",value:"."};function $M(t,e){return new Hn(t,e)}class Hn{constructor(e,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===sl.context,this.isValue=this.key[0]===sl.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?sl.context:this.isValue?sl.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&ps.getter(this.path,!0),this.map=r.map}getValue(e,r,n){let s=this.isContext?n:this.isValue?e:r;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(e,r){return this.getValue(e,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Hn.prototype.__isYupRef=!0;const cs=t=>t==null;function Bs(t){function e({value:r,path:n="",options:s,originalValue:i,schema:a},o,l){const{name:c,test:d,params:f,message:h,skipAbsent:g}=t;let{parent:y,context:w,abortEarly:_=a.spec.abortEarly,disableStackTrace:m=a.spec.disableStackTrace}=s;function p(C){return Hn.isRef(C)?C.getValue(r,y,w):C}function v(C={}){const D=Object.assign({value:r,originalValue:i,label:a.spec.label,path:C.path||n,spec:a.spec,disableStackTrace:C.disableStackTrace||m},f,C.params);for(const pe of Object.keys(D))D[pe]=p(D[pe]);const K=new at(at.formatError(C.message||h,D),r,D.path,C.type||c,D.disableStackTrace);return K.params=D,K}const S=_?o:l;let T={path:n,parent:y,type:c,from:s.from,createError:v,resolve:p,options:s,originalValue:i,schema:a};const E=C=>{at.isError(C)?S(C):C?l(null):S(v())},x=C=>{at.isError(C)?S(C):o(C)};if(g&&cs(r))return E(!0);let j;try{var N;if(j=d.call(T,r,T),typeof((N=j)==null?void 0:N.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${T.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(j).then(E,x)}}catch(C){x(C);return}E(j)}return e.OPTIONS=t,e}function DM(t,e,r,n=r){let s,i,a;return e?(ps.forEach(e,(o,l,c)=>{let d=l?o.slice(1,o.length-1):o;t=t.resolve({context:n,parent:s,value:r});let f=t.type==="tuple",h=c?parseInt(d,10):0;if(t.innerType||f){if(f&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(r&&h>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${o}, in the path: ${e}. because there is no value at that index. `);s=r,r=r&&r[h],t=f?t.spec.types[h]:t.innerType}if(!c){if(!t.fields||!t.fields[d])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${a} which is a type: "${t.type}")`);s=r,r=r&&r[d],t=t.fields[d]}i=d,a=l?"["+o+"]":"."+o}),{schema:t,parent:s,parentPath:i}):{parent:s,parentPath:e,schema:t}}class xc extends Set{describe(){const e=[];for(const r of this.values())e.push(Hn.isRef(r)?r.describe():r);return e}resolveAll(e){let r=[];for(const n of this.values())r.push(e(n));return r}clone(){return new xc(this.values())}merge(e,r){const n=this.clone();return e.forEach(s=>n.add(s)),r.forEach(s=>n.delete(s)),n}}function li(t,e=new Map){if(xu(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let r;if(t instanceof Date)r=new Date(t.getTime()),e.set(t,r);else if(t instanceof RegExp)r=new RegExp(t),e.set(t,r);else if(Array.isArray(t)){r=new Array(t.length),e.set(t,r);for(let n=0;n<t.length;n++)r[n]=li(t[n],e)}else if(t instanceof Map){r=new Map,e.set(t,r);for(const[n,s]of t.entries())r.set(n,li(s,e))}else if(t instanceof Set){r=new Set,e.set(t,r);for(const n of t)r.add(li(n,e))}else if(t instanceof Object){r={},e.set(t,r);for(const[n,s]of Object.entries(t))r[n]=li(s,e)}else throw Error(`Unable to clone ${t}`);return r}class Zt{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new xc,this._blacklist=new xc,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ar.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(r=>{r.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeCheck=this._typeCheck,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.internalTests=Object.assign({},this.internalTests),r.exclusiveTests=Object.assign({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=li(Object.assign({},this.spec,e)),r}label(e){let r=this.clone();return r.spec.label=e,r}meta(...e){if(e.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},e[0]),r}withMutation(e){let r=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=r,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let r=this,n=e.clone();const s=Object.assign({},r.spec,n.spec);return n.spec=s,n.internalTests=Object.assign({},r.internalTests,n.internalTests),n._whitelist=r._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=r._blacklist.merge(e._blacklist,e._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(i=>{e.tests.forEach(a=>{i.test(a.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((s,i)=>i.resolve(s,e),r),r=r.resolve(e)}return r}resolveOptions(e){var r,n,s,i;return Object.assign({},e,{from:e.from||[],strict:(r=e.strict)!=null?r:this.spec.strict,abortEarly:(n=e.abortEarly)!=null?n:this.spec.abortEarly,recursive:(s=e.recursive)!=null?s:this.spec.recursive,disableStackTrace:(i=e.disableStackTrace)!=null?i:this.spec.disableStackTrace})}cast(e,r={}){let n=this.resolve(Object.assign({value:e},r)),s=r.assert==="ignore-optionality",i=n._cast(e,r);if(r.assert!==!1&&!n.isType(i)){if(s&&cs(i))return i;let a=Fr(e),o=Fr(i);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". 

attempted value: ${a} 
`+(o!==a?`result of cast: ${o}`:""))}return i}_cast(e,r){let n=e===void 0?e:this.transforms.reduce((s,i)=>i.call(this,s,e,this),e);return n===void 0&&(n=this.getDefault(r)),n}_validate(e,r={},n,s){let{path:i,originalValue:a=e,strict:o=this.spec.strict}=r,l=e;o||(l=this._cast(l,Object.assign({assert:!1},r)));let c=[];for(let d of Object.values(this.internalTests))d&&c.push(d);this.runTests({path:i,value:l,originalValue:a,options:r,tests:c},n,d=>{if(d.length)return s(d,l);this.runTests({path:i,value:l,originalValue:a,options:r,tests:this.tests},n,s)})}runTests(e,r,n){let s=!1,{tests:i,value:a,originalValue:o,path:l,options:c}=e,d=w=>{s||(s=!0,r(w,a))},f=w=>{s||(s=!0,n(w,a))},h=i.length,g=[];if(!h)return f([]);let y={value:a,originalValue:o,path:l,options:c,schema:this};for(let w=0;w<i.length;w++){const _=i[w];_(y,d,function(p){p&&(Array.isArray(p)?g.push(...p):g.push(p)),--h<=0&&f(g)})}}asNestedTest({key:e,index:r,parent:n,parentPath:s,originalParent:i,options:a}){const o=e??r;if(o==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof o=="number";let c=n[o];const d=Object.assign({},a,{strict:!0,parent:n,value:c,originalValue:i[o],key:void 0,[l?"index":"key"]:o,path:l||o.includes(".")?`${s||""}[${l?o:`"${o}"`}]`:(s?`${s}.`:"")+e});return(f,h,g)=>this.resolve(d)._validate(c,d,h,g)}validate(e,r){var n;let s=this.resolve(Object.assign({},r,{value:e})),i=(n=r==null?void 0:r.disableStackTrace)!=null?n:s.spec.disableStackTrace;return new Promise((a,o)=>s._validate(e,r,(l,c)=>{at.isError(l)&&(l.value=c),o(l)},(l,c)=>{l.length?o(new at(l,c,void 0,void 0,i)):a(c)}))}validateSync(e,r){var n;let s=this.resolve(Object.assign({},r,{value:e})),i,a=(n=r==null?void 0:r.disableStackTrace)!=null?n:s.spec.disableStackTrace;return s._validate(e,Object.assign({},r,{sync:!0}),(o,l)=>{throw at.isError(o)&&(o.value=l),o},(o,l)=>{if(o.length)throw new at(o,e,void 0,void 0,a);i=l}),i}isValid(e,r){return this.validate(e,r).then(()=>!0,n=>{if(at.isError(n))return!1;throw n})}isValidSync(e,r){try{return this.validateSync(e,r),!0}catch(n){if(at.isError(n))return!1;throw n}}_getDefault(e){let r=this.spec.default;return r==null?r:typeof r=="function"?r.call(this,e):li(r)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,r){const n=this.clone({nullable:e});return n.internalTests.nullable=Bs({message:r,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),n}optionality(e,r){const n=this.clone({optional:e});return n.internalTests.optionality=Bs({message:r,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),n}optional(){return this.optionality(!0)}defined(e=ar.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=ar.notNull){return this.nullability(!1,e)}required(e=ar.required){return this.clone().withMutation(r=>r.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let r=this.clone();return r.transforms.push(e),r}test(...e){let r;if(e.length===1?typeof e[0]=="function"?r={test:e[0]}:r=e[0]:e.length===2?r={name:e[0],test:e[1]}:r={name:e[0],message:e[1],test:e[2]},r.message===void 0&&(r.message=ar.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),s=Bs(r),i=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(a=>!(a.OPTIONS.name===r.name&&(i||a.OPTIONS.test===s.OPTIONS.test))),n.tests.push(s),n}when(e,r){!Array.isArray(e)&&typeof e!="string"&&(r=e,e=".");let n=this.clone(),s=OS(e).map(i=>new Hn(i));return s.forEach(i=>{i.isSibling&&n.deps.push(i.key)}),n.conditions.push(typeof r=="function"?new bc(s,r):bc.fromOptions(s,r)),n}typeError(e){let r=this.clone();return r.internalTests.typeError=Bs({message:e,name:"typeError",skipAbsent:!0,test(n){return this.schema._typeCheck(n)?!0:this.createError({params:{type:this.schema.type}})}}),r}oneOf(e,r=ar.oneOf){let n=this.clone();return e.forEach(s=>{n._whitelist.add(s),n._blacklist.delete(s)}),n.internalTests.whiteList=Bs({message:r,name:"oneOf",skipAbsent:!0,test(s){let i=this.schema._whitelist,a=i.resolveAll(this.resolve);return a.includes(s)?!0:this.createError({params:{values:Array.from(i).join(", "),resolved:a}})}}),n}notOneOf(e,r=ar.notOneOf){let n=this.clone();return e.forEach(s=>{n._blacklist.add(s),n._whitelist.delete(s)}),n.internalTests.blacklist=Bs({message:r,name:"notOneOf",test(s){let i=this.schema._blacklist,a=i.resolveAll(this.resolve);return a.includes(s)?this.createError({params:{values:Array.from(i).join(", "),resolved:a}}):!0}}),n}strip(e=!0){let r=this.clone();return r.spec.strip=e,r}describe(e){const r=(e?this.resolve(e):this).clone(),{label:n,meta:s,optional:i,nullable:a}=r.spec;return{meta:s,label:n,optional:i,nullable:a,default:r.getDefault(e),type:r.type,oneOf:r._whitelist.describe(),notOneOf:r._blacklist.describe(),tests:r.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,c,d)=>d.findIndex(f=>f.name===l.name)===c)}}}Zt.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])Zt.prototype[`${t}At`]=function(e,r,n={}){const{parent:s,parentPath:i,schema:a}=DM(this,e,r,n.context);return a[t](s&&s[i],Object.assign({},n,{parent:s,path:e}))};for(const t of["equals","is"])Zt.prototype[t]=Zt.prototype.oneOf;for(const t of["not","nope"])Zt.prototype[t]=Zt.prototype.notOneOf;const LM=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function FM(t){const e=yh(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let r=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(r=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(r=0-r)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+r,e.second,e.millisecond)}function yh(t){var e,r;const n=LM.exec(t);return n?{year:Er(n[1]),month:Er(n[2],1)-1,day:Er(n[3],1),hour:Er(n[4]),minute:Er(n[5]),second:Er(n[6]),millisecond:n[7]?Er(n[7].substring(0,3)):0,precision:(e=(r=n[7])==null?void 0:r.length)!=null?e:void 0,z:n[8]||void 0,plusMinus:n[9]||void 0,hourOffset:Er(n[10]),minuteOffset:Er(n[11])}:null}function Er(t,e=0){return Number(t)||e}let MM=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,UM=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,BM=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,zM="^\\d{4}-\\d{2}-\\d{2}",VM="\\d{2}:\\d{2}:\\d{2}",WM="(([+-]\\d{2}(:?\\d{2})?)|Z)",HM=new RegExp(`${zM}T${VM}(\\.\\d+)?${WM}$`),qM=t=>cs(t)||t===t.trim(),KM={}.toString();function At(){return new LS}class LS extends Zt{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,r,n)=>{if(!n.spec.coerce||n.isType(e)||Array.isArray(e))return e;const s=e!=null&&e.toString?e.toString():e;return s===KM?e:s})})}required(e){return super.required(e).withMutation(r=>r.test({message:e||ar.required,name:"required",skipAbsent:!0,test:n=>!!n.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(r=>r.OPTIONS.name!=="required"),e))}length(e,r=tt.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(n){return n.length===this.resolve(e)}})}min(e,r=tt.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(n){return n.length>=this.resolve(e)}})}max(e,r=tt.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:e},skipAbsent:!0,test(n){return n.length<=this.resolve(e)}})}matches(e,r){let n=!1,s,i;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:s,name:i}=r:s=r),this.test({name:i||"matches",message:s||tt.matches,params:{regex:e},skipAbsent:!0,test:a=>a===""&&n||a.search(e)!==-1})}email(e=tt.email){return this.matches(MM,{name:"email",message:e,excludeEmptyString:!0})}url(e=tt.url){return this.matches(UM,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=tt.uuid){return this.matches(BM,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let r="",n,s;return e&&(typeof e=="object"?{message:r="",allowOffset:n=!1,precision:s=void 0}=e:r=e),this.matches(HM,{name:"datetime",message:r||tt.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||tt.datetime_offset,params:{allowOffset:n},skipAbsent:!0,test:i=>{if(!i||n)return!0;const a=yh(i);return a?!!a.z:!1}}).test({name:"datetime_precision",message:r||tt.datetime_precision,params:{precision:s},skipAbsent:!0,test:i=>{if(!i||s==null)return!0;const a=yh(i);return a?a.precision===s:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=tt.trim){return this.transform(r=>r!=null?r.trim():r).test({message:e,name:"trim",test:qM})}lowercase(e=tt.lowercase){return this.transform(r=>cs(r)?r:r.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>cs(r)||r===r.toLowerCase()})}uppercase(e=tt.uppercase){return this.transform(r=>cs(r)?r:r.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>cs(r)||r===r.toUpperCase()})}}At.prototype=LS.prototype;let GM=new Date(""),JM=t=>Object.prototype.toString.call(t)==="[object Date]";class ym extends Zt{constructor(){super({type:"date",check(e){return JM(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,r,n)=>!n.spec.coerce||n.isType(e)||e===null?e:(e=FM(e),isNaN(e)?ym.INVALID_DATE:new Date(e)))})}prepareParam(e,r){let n;if(Hn.isRef(e))n=e;else{let s=this.cast(e);if(!this._typeCheck(s))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=s}return n}min(e,r=gh.min){let n=this.prepareParam(e,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(s){return s>=this.resolve(n)}})}max(e,r=gh.max){let n=this.prepareParam(e,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(s){return s<=this.resolve(n)}})}}ym.INVALID_DATE=GM;function QM(t,e=[]){let r=[],n=new Set,s=new Set(e.map(([a,o])=>`${a}-${o}`));function i(a,o){let l=ps.split(a)[0];n.add(l),s.has(`${o}-${l}`)||r.push([o,l])}for(const a of Object.keys(t)){let o=t[a];n.add(a),Hn.isRef(o)&&o.isSibling?i(o.path,a):xu(o)&&"deps"in o&&o.deps.forEach(l=>i(l,a))}return EM.array(Array.from(n),r).reverse()}function iw(t,e){let r=1/0;return t.some((n,s)=>{var i;if((i=e.path)!=null&&i.includes(n))return r=s,!0}),r}function FS(t){return(e,r)=>iw(t,e)-iw(t,r)}const MS=(t,e,r)=>{if(typeof t!="string")return t;let n=t;try{n=JSON.parse(t)}catch{}return r.isType(n)?n:t};function Nl(t){if("fields"in t){const e={};for(const[r,n]of Object.entries(t.fields))e[r]=Nl(n);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=Nl(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(Nl)}):"optional"in t?t.optional():t}const XM=(t,e)=>{const r=[...ps.normalizePath(e)];if(r.length===1)return r[0]in t;let n=r.pop(),s=ps.getter(ps.join(r),!0)(t);return!!(s&&n in s)};let aw=t=>Object.prototype.toString.call(t)==="[object Object]";function ow(t,e){let r=Object.keys(t.fields);return Object.keys(e).filter(n=>r.indexOf(n)===-1)}const YM=FS([]);function Su(t){return new US(t)}class US extends Zt{constructor(e){super({type:"object",check(r){return aw(r)||typeof r=="function"}}),this.fields=Object.create(null),this._sortErrors=YM,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,r={}){var n;let s=super._cast(e,r);if(s===void 0)return this.getDefault(r);if(!this._typeCheck(s))return s;let i=this.fields,a=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,o=[].concat(this._nodes,Object.keys(s).filter(f=>!this._nodes.includes(f))),l={},c=Object.assign({},r,{parent:l,__validating:r.__validating||!1}),d=!1;for(const f of o){let h=i[f],g=f in s;if(h){let y,w=s[f];c.path=(r.path?`${r.path}.`:"")+f,h=h.resolve({value:w,context:r.context,parent:l});let _=h instanceof Zt?h.spec:void 0,m=_==null?void 0:_.strict;if(_!=null&&_.strip){d=d||f in s;continue}y=!r.__validating||!m?h.cast(s[f],c):s[f],y!==void 0&&(l[f]=y)}else g&&!a&&(l[f]=s[f]);(g!==f in l||l[f]!==s[f])&&(d=!0)}return d?l:s}_validate(e,r={},n,s){let{from:i=[],originalValue:a=e,recursive:o=this.spec.recursive}=r;r.from=[{schema:this,value:a},...i],r.__validating=!0,r.originalValue=a,super._validate(e,r,n,(l,c)=>{if(!o||!aw(c)){s(l,c);return}a=a||c;let d=[];for(let f of this._nodes){let h=this.fields[f];!h||Hn.isRef(h)||d.push(h.asNestedTest({options:r,key:f,parent:c,parentPath:r.path,originalParent:a}))}this.runTests({tests:d,value:c,originalValue:a,options:r},n,f=>{s(f.sort(this._sortErrors).concat(l),c)})})}clone(e){const r=super.clone(e);return r.fields=Object.assign({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(e){let r=super.concat(e),n=r.fields;for(let[s,i]of Object.entries(this.fields)){const a=n[s];n[s]=a===void 0?i:a}return r.withMutation(s=>s.setFields(n,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let r={};return this._nodes.forEach(n=>{var s;const i=this.fields[n];let a=e;(s=a)!=null&&s.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[n]})),r[n]=i&&"getDefault"in i?i.getDefault(a):void 0}),r}setFields(e,r){let n=this.clone();return n.fields=e,n._nodes=QM(e,r),n._sortErrors=FS(Object.keys(e)),r&&(n._excludedEdges=r),n}shape(e,r=[]){return this.clone().withMutation(n=>{let s=n._excludedEdges;return r.length&&(Array.isArray(r[0])||(r=[r]),s=[...n._excludedEdges,...r]),n.setFields(Object.assign(n.fields,e),s)})}partial(){const e={};for(const[r,n]of Object.entries(this.fields))e[r]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(e)}deepPartial(){return Nl(this)}pick(e){const r={};for(const n of e)this.fields[n]&&(r[n]=this.fields[n]);return this.setFields(r,this._excludedEdges.filter(([n,s])=>e.includes(n)&&e.includes(s)))}omit(e){const r=[];for(const n of Object.keys(this.fields))e.includes(n)||r.push(n);return this.pick(r)}from(e,r,n){let s=ps.getter(e,!0);return this.transform(i=>{if(!i)return i;let a=i;return XM(i,e)&&(a=Object.assign({},i),n||delete a[e],a[r]=s(i)),a})}json(){return this.transform(MS)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||Al.exact,test(r){if(r==null)return!0;const n=ow(this.schema,r);return n.length===0||this.createError({params:{properties:n.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,r=Al.noUnknown){typeof e!="boolean"&&(r=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(s){if(s==null)return!0;const i=ow(this.schema,s);return!e||i.length===0||this.createError({params:{unknown:i.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(e=!0,r=Al.noUnknown){return this.noUnknown(!e,r)}transformKeys(e){return this.transform(r=>{if(!r)return r;const n={};for(const s of Object.keys(r))n[e(s)]=r[s];return n})}camelCase(){return this.transformKeys($d.camelCase)}snakeCase(){return this.transformKeys($d.snakeCase)}constantCase(){return this.transformKeys(e=>$d.snakeCase(e).toUpperCase())}describe(e){const r=(e?this.resolve(e):this).clone(),n=super.describe(e);n.fields={};for(const[i,a]of Object.entries(r.fields)){var s;let o=e;(s=o)!=null&&s.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[i]})),n.fields[i]=a.describe(o)}return n}}Su.prototype=US.prototype;function Ol(t){return new BS(t)}class BS extends Zt{constructor(e){super({type:"array",spec:{types:e},check(r){return Array.isArray(r)}}),this.innerType=void 0,this.innerType=e}_cast(e,r){const n=super._cast(e,r);if(!this._typeCheck(n)||!this.innerType)return n;let s=!1;const i=n.map((a,o)=>{const l=this.innerType.cast(a,Object.assign({},r,{path:`${r.path||""}[${o}]`}));return l!==a&&(s=!0),l});return s?i:n}_validate(e,r={},n,s){var i;let a=this.innerType,o=(i=r.recursive)!=null?i:this.spec.recursive;r.originalValue!=null&&r.originalValue,super._validate(e,r,n,(l,c)=>{var d;if(!o||!a||!this._typeCheck(c)){s(l,c);return}let f=new Array(c.length);for(let g=0;g<c.length;g++){var h;f[g]=a.asNestedTest({options:r,index:g,parent:c,parentPath:r.path,originalParent:(h=r.originalValue)!=null?h:e})}this.runTests({value:c,tests:f,originalValue:(d=r.originalValue)!=null?d:e,options:r},n,g=>s(g.concat(l),c))})}clone(e){const r=super.clone(e);return r.innerType=this.innerType,r}json(){return this.transform(MS)}concat(e){let r=super.concat(e);return r.innerType=this.innerType,e.innerType&&(r.innerType=r.innerType?r.innerType.concat(e.innerType):e.innerType),r}of(e){let r=this.clone();if(!xu(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Fr(e));return r.innerType=e,r.spec=Object.assign({},r.spec,{types:e}),r}length(e,r=jl.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(n){return n.length===this.resolve(e)}})}min(e,r){return r=r||jl.min,this.test({message:r,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(n){return n.length>=this.resolve(e)}})}max(e,r){return r=r||jl.max,this.test({message:r,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(n){return n.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,r)=>this._typeCheck(e)?e:r==null?[]:[].concat(r))}compact(e){let r=e?(n,s,i)=>!e(n,s,i):n=>!!n;return this.transform(n=>n!=null?n.filter(r):n)}describe(e){const r=(e?this.resolve(e):this).clone(),n=super.describe(e);if(r.innerType){var s;let i=e;(s=i)!=null&&s.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),n.innerType=r.innerType.describe(i)}return n}}Ol.prototype=BS.prototype;const ZM=()=>{const[t,e]=b.useState(""),[r,n]=b.useState(!1),{login:s,currentUser:i}=Lt(),a=Bn();b.useEffect(()=>{i&&a("/dashboard")},[i,a]);const o=Su({email:At().email("Invalid email address").required("Email is required"),password:At().required("Password is required").min(6,"Password must be at least 6 characters")}),l={email:"",password:""},c=async(d,{setSubmitting:f})=>{try{e(""),n(!0),await s(d.email,d.password),a("/dashboard")}catch(h){e("Failed to log in. Please check your credentials."),console.error(h)}finally{n(!1),f(!1)}};return u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-3xl font-bold text-text-dark mb-4",children:"Welcome to LeadLines"}),u.jsx("p",{className:"text-text-dark mb-8",children:"Powerful Campaigns Made For You In Seconds."}),u.jsx("div",{className:"max-w-md mx-auto mb-12",children:u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-xl font-semibold text-text-dark mb-4",children:"Log In to Your Account"}),t&&u.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:u.jsx("span",{className:"block sm:inline",children:t})}),u.jsx(fm,{initialValues:l,validationSchema:o,onSubmit:c,children:({isSubmitting:d})=>u.jsxs(wu,{className:"space-y-4",children:[u.jsxs("div",{className:"text-left",children:[u.jsx("label",{htmlFor:"email",className:"block text-text-dark mb-1",children:"Email"}),u.jsx(ie,{type:"email",id:"email",name:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"your@email.com"}),u.jsx(nt,{name:"email",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{className:"text-left",children:[u.jsx("label",{htmlFor:"password",className:"block text-text-dark mb-1",children:"Password"}),u.jsx(ie,{type:"password",id:"password",name:"password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"••••••••"}),u.jsx(nt,{name:"password",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-text-dark",children:"Remember me"})]}),u.jsx("div",{className:"text-sm",children:u.jsx("a",{href:"#",className:"text-secondary hover:text-opacity-80",children:"Forgot password?"})})]}),u.jsx("button",{type:"submit",disabled:d||r,className:"w-full btn-primary disabled:opacity-50",children:r?"Logging in...":"Log In"})]})}),u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("p",{className:"text-text-dark",children:["Don't have an account?"," ",u.jsx(Pt,{to:"/register",className:"text-secondary hover:text-opacity-80",children:"Sign up"})]})})]})}),u.jsxs("div",{className:"mt-8 bg-accent p-6 rounded-lg shadow-md max-w-4xl mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-text-dark mb-3",children:"Harness The Power"}),u.jsxs("ul",{className:"text-left text-text-dark space-y-2",children:[u.jsx("li",{children:"✓ Access proven sales workflows that generate leads and campaigns"}),u.jsx("li",{children:"✓ Real-time cost estimation before launching campaigns"}),u.jsx("li",{children:"✓ Target the perfect audience for your services"}),u.jsx("li",{children:"✓ Save time with automated lead generation processes"})]})]})]})},eU=()=>{const[t,e]=b.useState(""),[r,n]=b.useState(!1),{signup:s,currentUser:i}=Lt(),a=Bn();b.useEffect(()=>{i&&a("/dashboard")},[i,a]);const o=Su({name:At().required("Name is required").min(2,"Name must be at least 2 characters"),email:At().email("Invalid email address").required("Email is required"),password:At().required("Password is required").min(6,"Password must be at least 6 characters"),confirmPassword:At().oneOf([$M("password"),null],"Passwords must match").required("Confirm Password is required")}),l={name:"",email:"",password:"",confirmPassword:""},c=async(d,{setSubmitting:f})=>{try{e(""),n(!0),await s(d.email,d.password),a("/dashboard")}catch(h){e("Failed to create an account. Please try again."),console.error(h)}finally{n(!1),f(!1)}};return u.jsxs("div",{className:"max-w-md mx-auto",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-dark mb-6 text-center",children:"Create an Account"}),t&&u.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:u.jsx("span",{className:"block sm:inline",children:t})}),u.jsxs("div",{className:"card",children:[u.jsx(fm,{initialValues:l,validationSchema:o,onSubmit:c,children:({isSubmitting:d})=>u.jsxs(wu,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",className:"block text-text-dark mb-1",children:"Full Name"}),u.jsx(ie,{type:"text",id:"name",name:"name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"John Doe"}),u.jsx(nt,{name:"name",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-text-dark mb-1",children:"Email"}),u.jsx(ie,{type:"email",id:"email",name:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"your@email.com"}),u.jsx(nt,{name:"email",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-text-dark mb-1",children:"Password"}),u.jsx(ie,{type:"password",id:"password",name:"password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"••••••••"}),u.jsx(nt,{name:"password",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-text-dark mb-1",children:"Confirm Password"}),u.jsx(ie,{type:"password",id:"confirmPassword",name:"confirmPassword",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"••••••••"}),u.jsx(nt,{name:"confirmPassword",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{id:"terms",name:"terms",type:"checkbox",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded",required:!0}),u.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-text-dark",children:["I agree to the ",u.jsx("a",{href:"#",className:"text-secondary hover:text-opacity-80",children:"Terms of Service"})," and ",u.jsx("a",{href:"#",className:"text-secondary hover:text-opacity-80",children:"Privacy Policy"})]})]}),u.jsx("button",{type:"submit",disabled:d||r,className:"w-full btn-primary disabled:opacity-50",children:r?"Creating Account...":"Sign Up"})]})}),u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("p",{className:"text-text-dark",children:["Already have an account?"," ",u.jsx(Pt,{to:"/login",className:"text-secondary hover:text-opacity-80",children:"Log in"})]})})]})]})};let vh;try{vh=require("../../services/WorkflowService").default}catch(t){console.error("Error importing WorkflowService:",t),vh={getUserWorkflowCounts:async()=>[],incrementSubmissionCount:async()=>!0,updateProcessingStatus:async()=>!0}}const tU=()=>{const{currentUser:t}=Lt(),[e,r]=b.useState([{id:1,title:"Job Posting Campaign",description:"Find companies with active job postings and target them with your services",submissions:0,hasProcessing:!1,createdAt:"2025-03-28"},{id:2,title:"Coming soon...",description:"Currently in development",submissions:0,hasProcessing:!1,createdAt:"2025-03-30"}]),[n,s]=b.useState(!0),[i,a]=b.useState(null);b.useEffect(()=>{(async()=>{if(!t){s(!1);return}try{s(!0),a(null);const c=await vh.getUserWorkflowCounts(t.uid);if(c&&c.length>0){const d=e.map(f=>{const h=c.find(g=>g.workflow_id===f.id);return h?{...f,submissions:h.submission_count||0,hasProcessing:h.has_processing||!1}:f});r(d)}}catch(c){console.error("Error in fetchUserSubmissionCounts:",c),a("Failed to load workflow data. Please try again later.")}finally{s(!1)}})()},[t]);const o=()=>{window.open("https://app.instantly.ai/app/dashboard","_blank")};return u.jsxs("div",{children:[u.jsx("div",{className:"mb-8",children:u.jsx("h2",{className:"text-2xl font-bold text-text-dark",children:"Dashboard"})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[u.jsxs("button",{onClick:o,className:"card bg-accent text-text-dark hover:bg-accent-dark transition-colors flex flex-col items-center justify-center cursor-pointer",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),u.jsx("h3",{className:"text-xl font-semibold mb-1",children:"Access Instantly Account"}),u.jsx("p",{className:"text-sm text-center",children:"Open your Instantly dashboard in a new tab"})]}),u.jsxs(Pt,{to:"/email-submission",className:"card bg-accent text-text-dark hover:bg-accent-dark transition-colors flex flex-col items-center justify-center cursor-pointer",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),u.jsx("h3",{className:"text-xl font-semibold mb-1",children:"Email Account Submission"}),u.jsx("p",{className:"text-sm text-center",children:"Submit your email account details"})]}),u.jsxs(Pt,{to:"/schedule-call",className:"card bg-accent text-text-dark hover:bg-accent-dark transition-colors flex flex-col items-center justify-center cursor-pointer",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("h3",{className:"text-xl font-semibold mb-1",children:"Schedule a Call"}),u.jsx("p",{className:"text-sm text-center",children:"Book a consultation with our team"})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-xl font-semibold text-text-dark mb-4",children:"Available Workflows"}),i&&u.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:i}),n?u.jsx("div",{className:"flex justify-center items-center h-40",children:u.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-secondary"})}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(l=>u.jsxs("div",{className:"card hover:shadow-lg transition-shadow flex flex-col h-full",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("h4",{className:"text-lg font-semibold text-text-dark mb-2",children:l.title}),u.jsx("p",{className:"text-gray-600 mb-4",children:l.description}),u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsxs("span",{className:"text-sm text-gray-500",children:["Submissions: ",l.submissions]}),l.hasProcessing&&u.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-800",children:"Processing"})]})]}),u.jsx("div",{className:"mt-auto pt-4",children:u.jsx(Pt,{to:`/workflow/${l.id}`,className:"btn-primary w-full block text-center",children:"Select Workflow"})})]},l.id))})]})]})};class rU{async getUserWorkflowCounts(e){try{if(!e)return[];const{data:r,error:n}=await se.from("user_workflow_submissions").select("workflow_id, submission_count, has_processing").eq("user_id",e);return n?(console.error("Error fetching workflow counts:",n),[]):r||[]}catch(r){return console.error("Error in getUserWorkflowCounts:",r),[]}}async incrementSubmissionCount(e,r){try{if(!e||!r)return!1;const{data:n}=await se.from("user_workflow_submissions").select("id, submission_count").eq("user_id",e).eq("workflow_id",r).single();if(n){const{error:s}=await se.from("user_workflow_submissions").update({submission_count:n.submission_count+1,updated_at:new Date().toISOString()}).eq("id",n.id);if(s)return console.error("Error updating submission count:",s),!1}else{const{error:s}=await se.from("user_workflow_submissions").insert({user_id:e,workflow_id:r,submission_count:1,has_processing:!1});if(s)return console.error("Error inserting submission count:",s),!1}return!0}catch(n){return console.error("Error incrementing submission count:",n),!1}}async updateProcessingStatus(e,r,n){try{if(!e||!r)return!1;const{error:s}=await se.from("user_workflow_submissions").update({has_processing:n,updated_at:new Date().toISOString()}).eq("user_id",e).eq("workflow_id",r);return s?(console.error("Error updating processing status:",s),!1):!0}catch(s){return console.error("Error updating processing status:",s),!1}}}const zS=new rU,nU=()=>{const[t,e]=b.useState(!1),[r,n]=b.useState(0),{id:s}=bI(),i=Bn(),{currentUser:a}=Lt();b.useEffect(()=>{s!=="1"&&i("/not-found")},[s,i]);const o=Su({campaignName:At().required("Campaign name is required").min(3,"Campaign name must be at least 3 characters"),targetIndustries:Ol().min(1,"Select at least one target industry"),jobTitles:At().required("Job titles are required"),locations:Ol().min(1,"Select at least one location"),companySize:Ol().min(1,"Select at least one company size"),excludedCompanies:At(),additionalKeywords:At(),emailTemplate:At().required("Email template is required").min(50,"Email template must be at least 50 characters")}),l={campaignName:"",targetIndustries:[],jobTitles:"",locations:[],companySize:[],excludedCompanies:"",additionalKeywords:"",emailTemplate:""},c=f=>{const h=f.jobTitles.split(",").length*15,g=f.locations.length>0?.8:1,y=f.targetIndustries.length>0?.9:1,w=f.additionalKeywords?.7:1,_=f.companySize.length>0?.85:1;return(h*g*y*w*_*1.75).toFixed(2)},d=async(f,{setSubmitting:h,resetForm:g})=>{try{console.log("Submitting campaign:",f),await new Promise(y=>setTimeout(y,1e3)),a&&(await zS.incrementSubmissionCount(a.uid,parseInt(s)),console.log("Incremented submission count for workflow:",s)),e(!0),g(),setTimeout(()=>{e(!1)},5e3)}catch(y){console.error("Error submitting campaign:",y)}finally{h(!1)}};return u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-dark mb-6",children:"Job Posting Campaign"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"This workflow finds companies with active job postings matching your criteria and generates leads for your outreach campaigns."}),t&&u.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",role:"alert",children:u.jsx("span",{className:"block sm:inline",children:"Campaign submitted successfully!"})}),u.jsx("div",{className:"card",children:u.jsx(fm,{initialValues:l,validationSchema:o,onSubmit:d,children:({values:f,isSubmitting:h,touched:g,errors:y})=>(fr.useEffect(()=>{n(c(f))},[f]),u.jsxs(wu,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"campaignName",className:"block text-text-dark mb-1",children:"Campaign Name"}),u.jsx(ie,{type:"text",id:"campaignName",name:"campaignName",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"e.g., Tech Startups Outreach"}),u.jsx(nt,{name:"campaignName",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"Target Industries"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"targetIndustries",value:"Technology",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"Technology"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"targetIndustries",value:"Healthcare",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"Healthcare"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"targetIndustries",value:"Finance",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"Finance"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"targetIndustries",value:"Education",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"Education"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"targetIndustries",value:"Retail",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"Retail"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"targetIndustries",value:"Manufacturing",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"Manufacturing"})]})]}),u.jsx(nt,{name:"targetIndustries",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"jobTitles",className:"block text-text-dark mb-1",children:"Job Titles"}),u.jsx(ie,{as:"textarea",id:"jobTitles",name:"jobTitles",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"Enter job titles separated by commas (e.g., Software Engineer, Product Manager, UX Designer)"}),u.jsx(nt,{name:"jobTitles",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"Locations"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"locations",value:"United States",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"United States"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"locations",value:"Remote",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"Remote"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"locations",value:"Europe",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"Europe"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"locations",value:"Asia",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"Asia"})]})]}),u.jsx(nt,{name:"locations",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"Company Size"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"companySize",value:"1-10",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"1-10 employees"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"companySize",value:"11-50",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"11-50 employees"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"companySize",value:"51-200",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"51-200 employees"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"companySize",value:"201-500",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"201-500 employees"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"companySize",value:"501-1000",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"501-1000 employees"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx(ie,{type:"checkbox",name:"companySize",value:"1001+",className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2",children:"1001+ employees"})]})]}),u.jsx(nt,{name:"companySize",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"excludedCompanies",className:"block text-text-dark mb-1",children:"Excluded Companies (Optional)"}),u.jsx(ie,{as:"textarea",id:"excludedCompanies",name:"excludedCompanies",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"Enter companies to exclude, separated by commas"}),u.jsx(nt,{name:"excludedCompanies",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"additionalKeywords",className:"block text-text-dark mb-1",children:"Additional Keywords (Optional)"}),u.jsx(ie,{type:"text",id:"additionalKeywords",name:"additionalKeywords",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"e.g., React, JavaScript, Remote"}),u.jsx(nt,{name:"additionalKeywords",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"emailTemplate",className:"block text-text-dark mb-1",children:"Email Template"}),u.jsx(ie,{as:"textarea",id:"emailTemplate",name:"emailTemplate",rows:"6",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"Enter your email template. Use {{company}} and {{position}} as placeholders."}),u.jsx(nt,{name:"emailTemplate",component:"div",className:"text-red-500 text-sm mt-1"})]}),u.jsxs("div",{className:"bg-accent p-4 rounded-md",children:[u.jsx("h3",{className:"text-lg font-semibold text-text-dark mb-2",children:"Estimated Results and Costs"}),u.jsx("p",{className:"text-sm text-text-dark mb-3",children:"Based on your filter criteria, here are the estimated results and costs. Adjust your filters to align with your budget."}),u.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-200",children:[u.jsx("span",{className:"text-text-dark",children:"Estimated Companies:"}),u.jsx("span",{className:"font-medium",children:Math.round(r/1.75)})]}),u.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-200",children:[u.jsx("span",{className:"text-text-dark",children:"Estimated Decision Makers:"}),u.jsx("span",{className:"font-medium",children:Math.round(r/1.75*1.5)})]}),u.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-200",children:[u.jsx("span",{className:"text-text-dark",children:"Estimated Email Deliveries:"}),u.jsx("span",{className:"font-medium",children:Math.round(r/1.75*1.5*.95)})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 mt-1 font-bold",children:[u.jsx("span",{className:"text-text-dark",children:"Total Estimated Cost:"}),u.jsxs("span",{className:"text-text-dark",children:["$",r]})]})]}),u.jsx("button",{type:"submit",disabled:h,className:"w-full btn-primary disabled:opacity-50",children:h?"Submitting...":"Launch Campaign"})]}))})})]})},sU=()=>{const{currentUser:t,getUserSettings:e,updateUserSettings:r,updatePassword:n}=Lt(),[s,i]=b.useState(!1),[a,o]=b.useState(!1),[l,c]=b.useState(!1),[d,f]=b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[h,g]=b.useState(""),[y,w]=b.useState(""),_=e()||{integrations:{instantly:{apiKey:"",isConnected:!1}}},[m,p]=b.useState({name:"John Doe",email:(t==null?void 0:t.email)||"john.doe@example.com",company:"Acme Corporation",role:"Hiring Manager",phone:"(555) 123-4567",notifications:{email:!0,browser:!1,mobile:!0},integrations:_.integrations||{instantly:{apiKey:"",isConnected:!1}}});b.useEffect(()=>{(async()=>{if(t)try{const{data:D,error:K}=await se.from("profiles").select("*").eq("user_id",t.uid).single();if(K){console.error("Error fetching user profile:",K);return}D&&p(pe=>({...pe,name:D.name||pe.name,company:D.company||pe.company,role:D.role||pe.role,phone:D.phone||pe.phone,notifications:D.notifications||pe.notifications}))}catch(D){console.error("Error in fetchUserProfile:",D)}})()},[t]),b.useEffect(()=>{_&&p(C=>({...C,integrations:_.integrations||{instantly:{apiKey:"",isConnected:!1}}}))},[_]);const v=C=>{const{name:D,value:K}=C.target;p({...m,[D]:K})},S=C=>{const{value:D}=C.target;p({...m,integrations:{...m.integrations,instantly:{...m.integrations.instantly,apiKey:D}}})},T=C=>{const{name:D,checked:K}=C.target;p({...m,notifications:{...m.notifications,[D]:K}})},E=C=>{const{name:D,value:K}=C.target;f({...d,[D]:K})},x=async C=>{C.preventDefault();try{const{error:D}=await se.from("profiles").upsert({user_id:t.uid,name:m.name,company:m.company,role:m.role,phone:m.phone,notifications:m.notifications,updated_at:new Date});if(D){console.error("Error saving profile data:",D);return}console.log("Profile data saved successfully"),i(!1)}catch(D){console.error("Error in handleSubmit:",D)}},I=async()=>{const C={..._,integrations:{..._.integrations,instantly:{apiKey:m.integrations.instantly.apiKey,isConnected:!0}}};r(C);try{const{error:D}=await se.from("api_keys").upsert({user_id:t.uid,service:"instantly",api_key:m.integrations.instantly.apiKey,updated_at:new Date});D&&console.error("Error saving API key:",D)}catch(D){console.error("Error in handleSaveApiKey:",D)}console.log("Saving Instantly API key for user:",t==null?void 0:t.email),o(!1)},j=async()=>{const C={..._,integrations:{..._.integrations,instantly:{apiKey:"",isConnected:!1}}};r(C);try{const{error:D}=await se.from("api_keys").delete().eq("user_id",t.uid).eq("service","instantly");D&&console.error("Error deleting API key:",D)}catch(D){console.error("Error in handleDisconnectInstantly:",D)}p({...m,integrations:{...m.integrations,instantly:{apiKey:"",isConnected:!1}}}),console.log("Disconnected Instantly integration for user:",t==null?void 0:t.email)},N=async C=>{if(C.preventDefault(),g(""),w(""),d.newPassword!==d.confirmPassword){g("New passwords do not match");return}if(d.newPassword.length<6){g("Password must be at least 6 characters");return}try{await n(d.currentPassword,d.newPassword),w("Password updated successfully"),f({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{c(!1),w("")},2e3)}catch(D){console.error("Error updating password:",D),g(D.message||"Failed to update password")}};return u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsx("div",{className:"flex justify-between items-center mb-6",children:u.jsx("h2",{className:"text-2xl font-bold text-text-dark",children:"Profile"})}),u.jsx("div",{className:"card",children:u.jsxs("form",{onSubmit:x,children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"Full Name"}),s?u.jsx("input",{type:"text",name:"name",value:m.name,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary"}):u.jsx("p",{className:"text-text-dark",children:m.name})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"Email"}),u.jsx("p",{className:"text-text-dark",children:m.email}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"Company"}),s?u.jsx("input",{type:"text",name:"company",value:m.company,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary"}):u.jsx("p",{className:"text-text-dark",children:m.company})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"Role"}),s?u.jsx("input",{type:"text",name:"role",value:m.role,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary"}):u.jsx("p",{className:"text-text-dark",children:m.role})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"Phone Number"}),s?u.jsx("input",{type:"text",name:"phone",value:m.phone,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary"}):u.jsx("p",{className:"text-text-dark",children:m.phone})]})]}),s&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-text-dark mb-3",children:"Notification Preferences"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",name:"email",checked:m.notifications.email,onChange:T,className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2 text-text-dark",children:"Email Notifications"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",name:"browser",checked:m.notifications.browser,onChange:T,className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2 text-text-dark",children:"Browser Notifications"})]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",name:"mobile",checked:m.notifications.mobile,onChange:T,className:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"}),u.jsx("span",{className:"ml-2 text-text-dark",children:"Mobile Notifications"})]})]})]}),s?u.jsxs("div",{className:"flex space-x-3 mt-4",children:[u.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 bg-gray-200 text-text-dark rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",children:"Save Changes"})]}):u.jsx("div",{className:"mt-4",children:u.jsx("button",{onClick:()=>i(!0),className:"btn-secondary",children:"Edit Profile"})})]})}),u.jsxs("div",{className:"mt-8",children:[u.jsx("h3",{className:"text-xl font-semibold text-text-dark mb-4",children:"Integrations"}),u.jsx("div",{className:"card",children:u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-medium text-text-dark mb-2",children:"Instantly.ai"}),u.jsx("p",{className:"text-gray-600 mb-3",children:"Connect your Instantly.ai account to enable campaign automation."})]}),u.jsx("div",{className:"flex items-center",children:m.integrations.instantly.isConnected&&u.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs mr-3",children:"Connected"})})]}),a?u.jsxs("div",{className:"mt-3",children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"API Key"}),u.jsx("div",{className:"flex",children:u.jsx("input",{type:"password",value:m.integrations.instantly.apiKey,onChange:S,placeholder:"Enter your Instantly API key",className:"flex-grow px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary"})}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You can find your API key in your Instantly.ai account settings."}),u.jsxs("div",{className:"flex space-x-3 mt-4",children:[u.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 bg-gray-200 text-text-dark rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),u.jsx("button",{type:"button",onClick:I,className:"btn-primary",children:"Save"})]})]}):u.jsx("div",{className:"mt-4",children:m.integrations.instantly.isConnected?u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{onClick:()=>o(!0),className:"btn-secondary",children:"Update API Key"}),u.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors",children:"Disconnect"})]}):u.jsx("button",{onClick:()=>o(!0),className:"btn-secondary",children:"Connect Instantly"})})]})})]}),u.jsxs("div",{className:"mt-8",children:[u.jsx("h3",{className:"text-xl font-semibold text-text-dark mb-4",children:"Account Security"}),u.jsx("div",{className:"card",children:u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-lg font-medium text-text-dark mb-2",children:"Change Password"}),u.jsx("p",{className:"text-gray-600 mb-3",children:"Ensure your account is using a strong password for security."}),l?u.jsxs("form",{onSubmit:N,children:[h&&u.jsx("div",{className:"mb-3 p-2 bg-red-100 text-red-700 rounded",children:h}),y&&u.jsx("div",{className:"mb-3 p-2 bg-green-100 text-green-700 rounded",children:y}),u.jsxs("div",{className:"mb-3",children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"Current Password"}),u.jsx("input",{type:"password",name:"currentPassword",value:d.currentPassword,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",required:!0})]}),u.jsxs("div",{className:"mb-3",children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"New Password"}),u.jsx("input",{type:"password",name:"newPassword",value:d.newPassword,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",required:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-text-dark mb-1",children:"Confirm New Password"}),u.jsx("input",{type:"password",name:"confirmPassword",value:d.confirmPassword,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",required:!0})]}),u.jsxs("div",{className:"flex space-x-3 mt-4",children:[u.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 bg-gray-200 text-text-dark rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",children:"Update Password"})]})]}):u.jsx("div",{className:"mt-4",children:u.jsx("button",{className:"btn-secondary",onClick:()=>c(!0),children:"Update Password"})})]})})]})]})},iU=()=>{const{currentUser:t}=Lt(),e=Bn(),r=()=>{e(t?"/dashboard":"/")};return u.jsxs("div",{className:"text-center py-12",children:[u.jsx("h2",{className:"text-4xl font-bold text-text-dark mb-4",children:"404"}),u.jsx("h3",{className:"text-2xl font-semibold text-text-dark mb-6",children:"Page Not Found"}),u.jsx("p",{className:"text-text-dark mb-8",children:"The page you are looking for doesn't exist or has been moved."}),u.jsx("button",{onClick:r,className:"btn-primary",children:t?"Return to Dashboard":"Return to Home"})]})},aU=()=>{const t=Bn(),{currentUser:e}=Lt(),[r,n]=b.useState({domains:"",forwardingDomain:"",firstName:"",lastName:""}),[s,i]=b.useState({}),[a,o]=b.useState(!1),[l,c]=b.useState(!1),d=y=>/^(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]$/i.test(y),f=()=>{const y={};if(!r.domains.trim())y.domains="Domains are required";else{const _=r.domains.split(",").map(m=>m.trim()).filter(m=>!d(m));_.length>0&&(y.domains=`Invalid domain format: ${_.join(", ")}`)}return r.forwardingDomain.trim()?d(r.forwardingDomain)||(y.forwardingDomain="Invalid forwarding domain format"):y.forwardingDomain="Forwarding domain is required",r.firstName.trim()||(y.firstName="First name is required"),r.lastName.trim()||(y.lastName="Last name is required"),i(y),Object.keys(y).length===0},h=y=>{const{name:w,value:_}=y.target;n(m=>({...m,[w]:_}))},g=async y=>{if(y.preventDefault(),f()){o(!0);try{console.log("Submitting email account data:",r),await new Promise(w=>setTimeout(w,1e3)),e&&(await zS.incrementSubmissionCount(e.uid,1),console.log("Incremented submission count for workflow: 1")),c(!0),n({domains:"",forwardingDomain:"",firstName:"",lastName:""}),setTimeout(()=>{t("/dashboard")},2e3)}catch(w){console.error("Error submitting form:",w),i({submit:"Failed to submit form. Please try again."})}finally{o(!1)}}};return u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsx("div",{className:"flex justify-between items-center mb-6",children:u.jsx("h2",{className:"text-2xl font-bold text-text-dark",children:"Email Account Submission"})}),u.jsx("div",{className:"card",children:l?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-green-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("h3",{className:"text-xl font-semibold text-text-dark mb-2",children:"Submission Successful!"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Your email account details have been submitted successfully."}),u.jsx("p",{className:"text-gray-600",children:"Redirecting to dashboard..."})]}):u.jsxs("form",{onSubmit:g,children:[u.jsx("div",{className:"mb-6",children:u.jsx("p",{className:"text-gray-600 mb-4",children:"Submit your email account details to set up your campaign delivery. All fields are required."})}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"domains",className:"block text-text-dark mb-1 font-medium",children:"Input Your Domains"}),u.jsx("input",{type:"text",id:"domains",name:"domains",value:r.domains,onChange:h,placeholder:"example.com, another-domain.com",className:`w-full px-3 py-2 border ${s.domains?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-secondary`}),s.domains&&u.jsx("p",{className:"mt-1 text-red-500 text-sm",children:s.domains}),u.jsx("p",{className:"mt-1 text-gray-500 text-sm",children:"Enter comma-separated list of domains"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"forwardingDomain",className:"block text-text-dark mb-1 font-medium",children:"Forwarding Domain"}),u.jsx("input",{type:"text",id:"forwardingDomain",name:"forwardingDomain",value:r.forwardingDomain,onChange:h,placeholder:"forwarding-domain.com",className:`w-full px-3 py-2 border ${s.forwardingDomain?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-secondary`}),s.forwardingDomain&&u.jsx("p",{className:"mt-1 text-red-500 text-sm",children:s.forwardingDomain})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"firstName",className:"block text-text-dark mb-1 font-medium",children:"First Name"}),u.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:h,placeholder:"John",className:`w-full px-3 py-2 border ${s.firstName?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-secondary`}),s.firstName&&u.jsx("p",{className:"mt-1 text-red-500 text-sm",children:s.firstName})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"lastName",className:"block text-text-dark mb-1 font-medium",children:"Last Name"}),u.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:h,placeholder:"Doe",className:`w-full px-3 py-2 border ${s.lastName?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-secondary`}),s.lastName&&u.jsx("p",{className:"mt-1 text-red-500 text-sm",children:s.lastName})]})]})]}),s.submit&&u.jsx("div",{className:"mt-4 p-3 bg-red-100 text-red-700 rounded-md",children:s.submit}),u.jsxs("div",{className:"mt-8 flex justify-end",children:[u.jsx(Pt,{to:"/dashboard",className:"px-4 py-2 bg-gray-200 text-text-dark rounded-md hover:bg-gray-300 transition-colors mr-3",children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:a,children:a?"Submitting...":"Submit Email Account"})]})]})})]})},oU=()=>{const[t,e]=b.useState(!0),r="https://form.bluecraft.ai/widget/booking/etmgsLRR2wxNiCSlJiI1",n=700,s=()=>{e(!1)};return b.useEffect(()=>{const i=document.createElement("script");return i.src="https://form.bluecraft.ai/js/form_embed.js",i.type="text/javascript",i.async=!0,document.body.appendChild(i),()=>{document.body.removeChild(i)}},[]),u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsx("div",{className:"flex justify-between items-center",style:{marginBottom:"0"},children:u.jsx("h2",{className:"text-2xl font-bold text-text-dark",children:"Schedule a Call"})}),t&&u.jsx("div",{className:"flex justify-center items-center h-12",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-secondary"})}),u.jsx("div",{style:{lineHeight:0,fontSize:0,marginTop:"-30px"},children:u.jsx("iframe",{src:r,style:{width:"100%",border:"none",display:"block",overflow:"hidden",height:`${n}px`,backgroundColor:"transparent",padding:0,margin:0},scrolling:"no",frameBorder:"0",id:"etmgsLRR2wxNiCSlJiI1_1743733381977",onLoad:s,title:"Schedule a Call",allowTransparency:"true"})})]})};class us{static async createSubmission(e){try{const{data:r,error:n}=await se.from("csv_submissions").insert([{id:e.id,user_id:e.user_id,user_email:e.user_email,original_filename:e.original_filename,custom_name:e.custom_name||e.original_filename,email_count:e.email_count,notes:e.notes,status:"processing"}]).select();if(n)throw n;return{data:r[0],error:null}}catch(r){return console.error("Error creating submission:",r),{data:null,error:r}}}static async getSubmissions(e,r=null,n=null){try{let s=se.from("csv_submissions").select("*").eq("user_id",e).order("created_at",{ascending:!1});r&&(s=s.eq("status",r)),n&&(s=s.or(`custom_name.ilike.%${n}%,original_filename.ilike.%${n}%`));const{data:i,error:a}=await s;if(a)throw a;return{data:i,error:null}}catch(s){return console.error("Error fetching submissions:",s),{data:null,error:s}}}static async getSubmissionById(e){try{const{data:r,error:n}=await se.from("csv_submissions").select("*").eq("id",e).single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error fetching submission:",r),{data:null,error:r}}}static async updateSubmissionStatus(e,r,n=null){try{const s={status:r,updated_at:new Date().toISOString()};n&&(s.processed_file_path=n);const{data:i,error:a}=await se.from("csv_submissions").update(s).eq("id",e).select();if(a)throw a;return{data:i[0],error:null}}catch(s){return console.error("Error updating submission status:",s),{data:null,error:s}}}static async updateSubmissionName(e,r){try{const{data:n,error:s}=await se.from("csv_submissions").update({custom_name:r,updated_at:new Date().toISOString()}).eq("id",e).select();if(s)throw s;return{data:n[0],error:null}}catch(n){return console.error("Error updating submission name:",n),{data:null,error:n}}}static async deleteSubmission(e){try{const{data:r,error:n}=await se.from("csv_submissions").delete().eq("id",e);if(n)throw n;return{success:!0,error:null}}catch(r){return console.error("Error deleting submission:",r),{success:!1,error:r}}}static async uploadFile(e,r,n){try{const s=`${r}/${n}/${e.name}`,{data:i,error:a}=await se.storage.from("csv-files").upload(s,e,{cacheControl:"3600",upsert:!1});if(a)throw a;return{data:i,error:null}}catch(s){return console.error("Error uploading file:",s),{data:null,error:s}}}static async getFileDownloadUrl(e){try{const r=e.startsWith("csv-files/")?e.substring(10):e;console.log("Generating signed URL for path:",r);const{data:n,error:s}=await se.storage.from("csv-files").createSignedUrl(r,60*60);if(s)throw s;return{url:n.signedUrl,error:null}}catch(r){return console.error("Error getting download URL:",r),{url:null,error:r}}}}const lU=()=>{const{currentUser:t}=Lt(),[e,r]=b.useState([]),[n,s]=b.useState(!0),[i,a]=b.useState(null),[o,l]=b.useState("all"),[c,d]=b.useState(""),[f,h]=b.useState(null),[g,y]=b.useState(""),w=async()=>{try{s(!0);const x=o!=="all"?o:null,{data:I,error:j}=await us.getSubmissions(t.uid,x,c.trim()||null);if(j)throw j;r(I||[]),a(null)}catch(x){console.error("Error fetching submissions:",x),a("Failed to load submissions. Please try again later.")}finally{s(!1)}};b.useEffect(()=>{t&&w()},[t,o]),b.useEffect(()=>{const x=setTimeout(()=>{t&&w()},500);return()=>clearTimeout(x)},[c]);const _=[{value:"all",label:"All Submissions"},{value:"processing",label:"Processing"},{value:"done",label:"Done"},{value:"error",label:"Error"}],m=x=>{l(x.target.value)},p=x=>{d(x.target.value)},v=x=>{h(x.id),y(x.custom_name||x.original_filename)},S=async x=>{try{if(!g.trim())return;const{data:I,error:j}=await us.updateSubmissionName(x,g.trim());if(j)throw j;r(N=>N.map(C=>C.id===x?{...C,custom_name:g.trim()}:C)),h(null)}catch(I){console.error("Error updating submission name:",I),a("Failed to update submission name. Please try again.")}},T=()=>{h(null),y("")},E=async x=>{try{if(!x.processed_file_path){a("Processed file not available for download yet.");return}const{url:I,error:j}=await us.getFileDownloadUrl(x.processed_file_path);if(j)throw j;window.open(I,"_blank")}catch(I){console.error("Error downloading file:",I),a("Failed to download file. Please try again later.")}};return u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-dark",children:"Submissions"}),u.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-3 w-full md:w-auto",children:[u.jsxs("div",{className:"relative w-full md:w-64",children:[u.jsx("input",{type:"text",placeholder:"Search submissions...",value:c,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary pr-8"}),c&&u.jsx("button",{onClick:()=>d(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"×"})]}),u.jsxs("div",{className:"flex items-center w-full md:w-auto",children:[u.jsx("label",{htmlFor:"filter",className:"mr-2 text-text-dark whitespace-nowrap",children:"Filter:"}),u.jsx("select",{id:"filter",value:o,onChange:m,className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary w-full md:w-auto",children:_.map(x=>u.jsx("option",{value:x.value,children:x.label},x.value))}),u.jsx("button",{onClick:w,className:"ml-2 p-2 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",title:"Refresh",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]})]}),i&&u.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:i}),n?u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-secondary"})}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full bg-white rounded-lg overflow-hidden shadow-md",children:[u.jsx("thead",{className:"bg-gray-100 text-text-dark",children:u.jsxs("tr",{children:[u.jsx("th",{className:"py-3 px-4 text-left",children:"Name"}),u.jsx("th",{className:"py-3 px-4 text-left",children:"Original File"}),u.jsx("th",{className:"py-3 px-4 text-left",children:"Status"}),u.jsx("th",{className:"py-3 px-4 text-left",children:"Created"}),u.jsx("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),u.jsx("tbody",{children:e.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:c?"No submissions match your search.":"No submissions found. Start by uploading a CSV file."})}):e.map(x=>u.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[u.jsx("td",{className:"py-3 px-4",children:f===x.id?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:g,onChange:I=>y(I.target.value),className:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-secondary w-full",autoFocus:!0}),u.jsx("button",{onClick:()=>S(x.id),className:"text-green-600 hover:text-green-800",title:"Save",children:"✓"}),u.jsx("button",{onClick:T,className:"text-red-600 hover:text-red-800",title:"Cancel",children:"✕"})]}):u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:x.custom_name||x.original_filename}),u.jsx("button",{onClick:()=>v(x),className:"text-gray-500 hover:text-gray-700",title:"Edit name",children:"✎"})]})}),u.jsx("td",{className:"py-3 px-4 text-gray-600 text-sm",children:x.original_filename}),u.jsx("td",{className:"py-3 px-4",children:u.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${x.status==="done"?"bg-green-100 text-green-800":x.status==="error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:x.status==="processing"?"Processing":x.status==="done"?"Done":"Error"})}),u.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(x.created_at).toLocaleString()}),u.jsx("td",{className:"py-3 px-4",children:u.jsx("button",{onClick:()=>E(x),className:`text-secondary hover:text-opacity-80 ${x.status!=="done"?"opacity-50 cursor-not-allowed":""}`,disabled:x.status!=="done",title:x.status!=="done"?"Available when processing is complete":"Download processed file",children:"Download"})})]},x.id))})]})}),u.jsxs("div",{className:"mt-6 bg-blue-50 p-4 rounded-md border border-blue-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"About CSV Processing"}),u.jsx("p",{className:"text-blue-800 mb-2",children:"LeadLines processes your CSV files through the following workflow:"}),u.jsxs("ol",{className:"list-decimal pl-5 space-y-1 text-blue-800",children:[u.jsx("li",{children:'When you submit a CSV file, the status is set to "Processing"'}),u.jsx("li",{children:"Your file is processed through our AI-powered system"}),u.jsx("li",{children:'When processing is complete, the status is updated to "Done"'}),u.jsx("li",{children:'If an error occurs, the status is updated to "Error"'}),u.jsx("li",{children:'You can download the processed file once the status is "Done"'}),u.jsx("li",{children:"You can edit the submission name at any time for better organization"})]})]})]})},$e=[];for(let t=0;t<256;++t)$e.push((t+256).toString(16).slice(1));function cU(t,e=0){return($e[t[e+0]]+$e[t[e+1]]+$e[t[e+2]]+$e[t[e+3]]+"-"+$e[t[e+4]]+$e[t[e+5]]+"-"+$e[t[e+6]]+$e[t[e+7]]+"-"+$e[t[e+8]]+$e[t[e+9]]+"-"+$e[t[e+10]]+$e[t[e+11]]+$e[t[e+12]]+$e[t[e+13]]+$e[t[e+14]]+$e[t[e+15]]).toLowerCase()}let Dd;const uU=new Uint8Array(16);function dU(){if(!Dd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Dd=crypto.getRandomValues.bind(crypto)}return Dd(uU)}const fU=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),lw={randomUUID:fU};function hU(t,e,r){var s;if(lw.randomUUID&&!t)return lw.randomUUID();t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??dU();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,cU(n)}const pU=()=>{const[t,e]=b.useState([]),[r,n]=b.useState(""),[s,i]=b.useState(""),[a,o]=b.useState(!1),[l,c]=b.useState({text:"",type:""}),d=b.useRef(null),f=b.useRef(null),{currentUser:h}=Lt(),g="https://bluecraftleads.app.n8n.cloud/webhook-test/363e4379-80f1-49b0-8d2f-e5ad1bc61f85";b.useEffect(()=>{const E=f.current;if(!E)return;const x=C=>{C.preventDefault(),C.stopPropagation()},I=()=>{E.classList.add("dragover")},j=()=>{E.classList.remove("dragover")},N=C=>{j();const K=C.dataTransfer.files;_(K)};return["dragenter","dragover","dragleave","drop"].forEach(C=>{E.addEventListener(C,x,!1)}),["dragenter","dragover"].forEach(C=>{E.addEventListener(C,I,!1)}),["dragleave","drop"].forEach(C=>{E.addEventListener(C,j,!1)}),E.addEventListener("drop",N,!1),()=>{["dragenter","dragover","dragleave","drop"].forEach(C=>{E.removeEventListener(C,x,!1)}),["dragenter","dragover"].forEach(C=>{E.removeEventListener(C,I,!1)}),["dragleave","drop"].forEach(C=>{E.removeEventListener(C,j,!1)}),E.removeEventListener("drop",N,!1)}},[]);const y=E=>{const x=E.target.files;x.length>0&&_(x)},w=()=>{d.current&&d.current.click()},_=E=>{if(E.length===0)return;const x=Array.from(E).filter(I=>I.size>10*1024*1024?(p(`File ${I.name} is too large. Maximum size is 10MB.`,"error"),!1):I.name.toLowerCase().endsWith(".csv")?!0:(p(`File ${I.name} is not a CSV file.`,"error"),!1));x.length!==0&&e(I=>[...I,...x])},m=E=>{e(x=>x.filter((I,j)=>j!==E))},p=(E,x)=>{c({text:E,type:x}),setTimeout(()=>{c({text:"",type:""})},5e3)},v=async E=>{var x;if(E.preventDefault(),!!S()){o(!0);try{const I=hU(),j=new FormData;j.append("submission_id",I),j.append("user_id",h.uid),j.append("user_email",h.email),r.trim()&&j.append("number_of_emails",r),s.trim()&&j.append("additional_notes",s);for(let C=0;C<t.length;C++){j.append("files",t[C]),j.append("original_filename",t[C].name);const{data:D,error:K}=await us.createSubmission({id:I,user_id:h.uid,user_email:h.email,original_filename:t[C].name,custom_name:t[C].name,email_count:parseInt(r)||0,notes:s});if(K){p("Error creating submission record. Please try again.","error"),o(!1);return}const{error:pe}=await us.uploadFile(t[C],h.uid,I);if(pe){p("Error uploading file. Please try again.","error"),await us.deleteSubmission(I),o(!1);return}}(await fetch(g,{method:"POST",body:j,headers:{"x-user-id":h.uid,"x-user-email":h.email,"x-submission-id":I,"x-original-filename":((x=t[0])==null?void 0:x.name)||""}})).ok?(p("Files uploaded successfully! Check the Submissions page for status updates.","success"),T()):(p("Error uploading files. Please try again.","error"),await us.deleteSubmission(I))}catch(I){console.error("Error submitting form:",I),p("Error uploading files. Please try again.","error")}finally{o(!1)}}},S=()=>t.length===0?(p("Please select at least one CSV file.","error"),!1):r.trim()?!0:(p("Please enter the number of emails.","error"),!1),T=()=>{e([]),n(""),i(""),d.current&&(d.current.value="")};return u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-dark mb-6",children:"CSV Upload"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Upload your CSV file to generate personalized email sequences."}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[u.jsxs("div",{className:"bg-secondary text-white p-5 text-center",children:[u.jsx("h3",{className:"text-xl font-bold",children:"LeadLines File Upload"}),u.jsx("p",{className:"opacity-90",children:"Upload Your CSV"})]}),u.jsxs("div",{className:"p-6",children:[l.text&&u.jsx("div",{className:`p-4 mb-6 rounded-md ${l.type==="success"?"bg-green-100 border border-green-300 text-green-700":"bg-red-100 border border-red-300 text-red-700"}`,children:l.text}),u.jsxs("form",{onSubmit:v,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fileUpload",className:"block font-semibold mb-2 after:content-['*'] after:ml-0.5 after:text-red-500",children:"Files"}),u.jsxs("div",{ref:f,className:"border-2 border-dashed border-gray-300 rounded-md p-6 text-center cursor-pointer hover:border-secondary hover:bg-blue-50 transition-colors relative",onClick:w,children:[u.jsx("div",{className:"text-4xl mb-2",children:"📂"}),u.jsx("p",{children:"Drag & drop files here or click to browse"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum file size: 10MB"}),u.jsx("input",{type:"file",id:"fileUpload",ref:d,className:"hidden",multiple:!0,accept:".csv",onChange:y})]}),t.length>0&&u.jsxs("div",{className:"mt-4 p-3 bg-gray-100 rounded-md",children:[u.jsx("p",{className:"font-semibold",children:"Selected files:"}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.map((E,x)=>u.jsxs("div",{className:"flex items-center bg-white border border-gray-300 rounded-md px-3 py-2 text-sm",children:[u.jsx("span",{className:"max-w-[180px] truncate",children:E.name}),u.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:I=>{I.stopPropagation(),m(x)},children:"×"})]},x))})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"emailCount",className:"block font-semibold mb-2 after:content-['*'] after:ml-0.5 after:text-red-500",children:"Number of Emails"}),u.jsx("input",{type:"number",id:"emailCount",value:r,onChange:E=>n(E.target.value),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"Enter the number of emails in your CSV",required:!0}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Specify how many email's you'd like to have in your sequence."})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"notes",className:"block font-semibold mb-2",children:"Additional Notes"}),u.jsx("textarea",{id:"notes",value:s,onChange:E=>i(E.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-secondary",placeholder:"Enter any additional information about your CSV file here..."}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Add any context or special instructions related to your upload."})]}),u.jsx("button",{type:"submit",className:"w-full bg-secondary text-white py-3 px-4 rounded-md font-semibold hover:bg-blue-600 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed",disabled:a,children:a?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2 align-middle"}),u.jsx("span",{children:"Submitting..."})]}):"Submit"})]})]})]})]})},mU=()=>u.jsx("div",{className:"py-6",children:u.jsx(pU,{})}),wh="RFC3986",_h={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},gU="RFC1738",yU=Array.isArray,nr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Ld=1024,vU=(t,e,r,n,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),r==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<i.length;o+=Ld){const l=i.length>=Ld?i.slice(o,o+Ld):i,c=[];for(let d=0;d<l.length;++d){let f=l.charCodeAt(d);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===gU&&(f===40||f===41)){c[c.length]=l.charAt(d);continue}if(f<128){c[c.length]=nr[f];continue}if(f<2048){c[c.length]=nr[192|f>>6]+nr[128|f&63];continue}if(f<55296||f>=57344){c[c.length]=nr[224|f>>12]+nr[128|f>>6&63]+nr[128|f&63];continue}d+=1,f=65536+((f&1023)<<10|l.charCodeAt(d)&1023),c[c.length]=nr[240|f>>18]+nr[128|f>>12&63]+nr[128|f>>6&63]+nr[128|f&63]}a+=c.join("")}return a};function wU(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function cw(t,e){if(yU(t)){const r=[];for(let n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)}const _U=Object.prototype.hasOwnProperty,VS={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},or=Array.isArray,bU=Array.prototype.push,WS=function(t,e){bU.apply(t,or(e)?e:[e])},xU=Date.prototype.toISOString,Ce={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:vU,encodeValuesOnly:!1,format:wh,formatter:_h[wh],indices:!1,serializeDate(t){return xU.call(t)},skipNulls:!1,strictNullHandling:!1};function SU(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Fd={};function HS(t,e,r,n,s,i,a,o,l,c,d,f,h,g,y,w,_,m){let p=t,v=m,S=0,T=!1;for(;(v=v.get(Fd))!==void 0&&!T;){const N=v.get(t);if(S+=1,typeof N<"u"){if(N===S)throw new RangeError("Cyclic object value");T=!0}typeof v.get(Fd)>"u"&&(S=0)}if(typeof c=="function"?p=c(e,p):p instanceof Date?p=h==null?void 0:h(p):r==="comma"&&or(p)&&(p=cw(p,function(N){return N instanceof Date?h==null?void 0:h(N):N})),p===null){if(i)return l&&!w?l(e,Ce.encoder,_,"key",g):e;p=""}if(SU(p)||wU(p)){if(l){const N=w?e:l(e,Ce.encoder,_,"key",g);return[(y==null?void 0:y(N))+"="+(y==null?void 0:y(l(p,Ce.encoder,_,"value",g)))]}return[(y==null?void 0:y(e))+"="+(y==null?void 0:y(String(p)))]}const E=[];if(typeof p>"u")return E;let x;if(r==="comma"&&or(p))w&&l&&(p=cw(p,l)),x=[{value:p.length>0?p.join(",")||null:void 0}];else if(or(c))x=c;else{const N=Object.keys(p);x=d?N.sort(d):N}const I=o?String(e).replace(/\./g,"%2E"):String(e),j=n&&or(p)&&p.length===1?I+"[]":I;if(s&&or(p)&&p.length===0)return j+"[]";for(let N=0;N<x.length;++N){const C=x[N],D=typeof C=="object"&&typeof C.value<"u"?C.value:p[C];if(a&&D===null)continue;const K=f&&o?C.replace(/\./g,"%2E"):C,pe=or(p)?typeof r=="function"?r(j,K):j:j+(f?"."+K:"["+K+"]");m.set(t,S);const xr=new WeakMap;xr.set(Fd,m),WS(E,HS(D,pe,r,n,s,i,a,o,r==="comma"&&w&&or(p)?null:l,c,d,f,h,g,y,w,_,xr))}return E}function EU(t=Ce){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ce.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=wh;if(typeof t.format<"u"){if(!_U.call(_h,t.format))throw new TypeError("Unknown format option provided.");r=t.format}const n=_h[r];let s=Ce.filter;(typeof t.filter=="function"||or(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in VS?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Ce.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ce.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ce.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ce.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ce.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ce.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ce.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ce.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ce.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ce.encodeValuesOnly,filter:s,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ce.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ce.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ce.strictNullHandling}}function kU(t,e={}){let r=t;const n=EU(e);let s,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):or(n.filter)&&(i=n.filter,s=i);const a=[];if(typeof r!="object"||r===null)return"";const o=VS[n.arrayFormat],l=o==="comma"&&n.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);const c=new WeakMap;for(let h=0;h<s.length;++h){const g=s[h];n.skipNulls&&r[g]===null||WS(a,HS(r[g],g,o,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}const d=a.join(n.delimiter);let f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""}const Ks="4.100.0";let uw=!1,Ra,qS,KS,bh,GS,JS,QS,XS,YS;function TU(t,e={auto:!1}){if(uw)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Ra)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Ra}'\``);uw=e.auto,Ra=t.kind,qS=t.fetch,KS=t.FormData,bh=t.File,GS=t.ReadableStream,JS=t.getMultipartRequestOptions,QS=t.getDefaultAgent,XS=t.fileFromPath,YS=t.isFsReadStream}class CU{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function IU({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,n,s,i;try{r=fetch,n=Request,s=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:r,Request:n,Response:s,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new CU(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}const ZS=()=>{Ra||TU(IU(),{auto:!0})};ZS();class z extends Error{}class Be extends z{constructor(e,r,n,s){super(`${Be.makeMessage(e,r,n)}`),this.status=e,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=r;const i=r;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,r,n){const s=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,r,n,s){if(!e||!s)return new Eu({message:n,cause:Sh(r)});const i=r==null?void 0:r.error;return e===400?new eE(e,i,n,s):e===401?new tE(e,i,n,s):e===403?new rE(e,i,n,s):e===404?new nE(e,i,n,s):e===409?new sE(e,i,n,s):e===422?new iE(e,i,n,s):e===429?new aE(e,i,n,s):e>=500?new oE(e,i,n,s):new Be(e,i,n,s)}}class Nt extends Be{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Eu extends Be{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}}class vm extends Eu{constructor({message:e}={}){super({message:e??"Request timed out."})}}class eE extends Be{}class tE extends Be{}class rE extends Be{}class nE extends Be{}class sE extends Be{}class iE extends Be{}class aE extends Be{}class oE extends Be{}class lE extends z{constructor(){super("Could not parse response content as the length limit was reached")}}class cE extends z{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var il=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},Yn=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},pt;class ku{constructor(){pt.set(this,void 0),this.buffer=new Uint8Array,il(this,pt,null,"f")}decode(e){if(e==null)return[];const r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let n=new Uint8Array(this.buffer.length+r.length);n.set(this.buffer),n.set(r,this.buffer.length),this.buffer=n;const s=[];let i;for(;(i=PU(this.buffer,Yn(this,pt,"f")))!=null;){if(i.carriage&&Yn(this,pt,"f")==null){il(this,pt,i.index,"f");continue}if(Yn(this,pt,"f")!=null&&(i.index!==Yn(this,pt,"f")+1||i.carriage)){s.push(this.decodeText(this.buffer.slice(0,Yn(this,pt,"f")-1))),this.buffer=this.buffer.slice(Yn(this,pt,"f")),il(this,pt,null,"f");continue}const a=Yn(this,pt,"f")!==null?i.preceding-1:i.preceding,o=this.decodeText(this.buffer.slice(0,a));s.push(o),this.buffer=this.buffer.slice(i.index),il(this,pt,null,"f")}return s}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new z(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new z(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new z("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}pt=new WeakMap;ku.NEWLINE_CHARS=new Set([`
`,"\r"]);ku.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function PU(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function AU(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}function uE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class dr{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let n=!1;async function*s(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const a of jU(e,r))if(!i){if(a.data.startsWith("[DONE]")){i=!0;continue}if(a.event===null||a.event.startsWith("response.")||a.event.startsWith("transcript.")){let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(o&&o.error)throw new Be(void 0,o.error,void 0,yE(e.headers));yield o}else{let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(a.event=="error")throw new Be(void 0,o.error,o.message,void 0);yield{event:a.event,data:o}}}i=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{i||r.abort()}}return new dr(s,r)}static fromReadableStream(e,r){let n=!1;async function*s(){const a=new ku,o=uE(e);for await(const l of o)for(const c of a.decode(l))yield c;for(const l of a.flush())yield l}async function*i(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const o of s())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||r.abort()}}return new dr(i,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],r=[],n=this.iterator(),s=i=>({next:()=>{if(i.length===0){const a=n.next();e.push(a),r.push(a)}return i.shift()}});return[new dr(()=>s(e),this.controller),new dr(()=>s(r),this.controller)]}toReadableStream(){const e=this;let r;const n=new TextEncoder;return new GS({async start(){r=e[Symbol.asyncIterator]()},async pull(s){try{const{value:i,done:a}=await r.next();if(a)return s.close();const o=n.encode(JSON.stringify(i)+`
`);s.enqueue(o)}catch(i){s.error(i)}},async cancel(){var s;await((s=r.return)==null?void 0:s.call(r))}})}}async function*jU(t,e){if(!t.body)throw e.abort(),new z("Attempted to iterate over a response with no body");const r=new OU,n=new ku,s=uE(t.body);for await(const i of NU(s))for(const a of n.decode(i)){const o=r.decode(a);o&&(yield o)}for(const i of n.flush()){const a=r.decode(i);a&&(yield a)}}async function*NU(t){let e=new Uint8Array;for await(const r of t){if(r==null)continue;const n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r;let s=new Uint8Array(e.length+n.length);s.set(e),s.set(n,e.length),e=s;let i;for(;(i=AU(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class OU{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,s]=RU(e,":");return s.startsWith(" ")&&(s=s.substring(1)),r==="event"?this.event=s:r==="data"&&this.data.push(s),null}}function RU(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}const dE=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",fE=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Tu(t),Tu=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",$U=t=>fE(t)||dE(t)||YS(t);async function hE(t,e,r){var s;if(t=await t,fE(t))return t;if(dE(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=Tu(i)?[await i.arrayBuffer()]:[i];return new bh(a,e,r)}const n=await DU(t);if(e||(e=FU(t)??"unknown_file"),!(r!=null&&r.type)){const i=(s=n[0])==null?void 0:s.type;typeof i=="string"&&(r={...r,type:i})}return new bh(n,e,r)}async function DU(t){var r;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Tu(t))e.push(await t.arrayBuffer());else if(MU(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(r=t==null?void 0:t.constructor)==null?void 0:r.name}; props: ${LU(t)}`);return e}function LU(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function FU(t){var e;return Md(t.name)||Md(t.filename)||((e=Md(t.path))==null?void 0:e.split(/[\\/]/).pop())}const Md=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},MU=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",dw=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Ri=async t=>{const e=await UU(t.body);return JS(e,t)},UU=async t=>{const e=new KS;return await Promise.all(Object.entries(t||{}).map(([r,n])=>xh(e,r,n))),e},xh=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if($U(r)){const n=await hE(r);t.append(e,n)}else if(Array.isArray(r))await Promise.all(r.map(n=>xh(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,s])=>xh(t,`${e}[${n}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var _i={},BU=function(t,e,r,n,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r},zU=function(t,e,r,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},al;ZS();async function pE(t){var a;const{response:e}=t;if(t.options.stream)return On("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):dr.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const r=e.headers.get("content-type"),n=(a=r==null?void 0:r.split(";")[0])==null?void 0:a.trim();if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.endsWith("+json"))){const o=await e.json();return On("response",e.status,e.url,e.headers,o),mE(o,e)}const i=await e.text();return On("response",e.status,e.url,e.headers,i),i}function mE(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Cu extends Promise{constructor(e,r=pE){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new Cu(this.responsePromise,async r=>mE(e(await this.parseResponse(r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class VU{constructor({baseURL:e,maxRetries:r=2,timeout:n=6e5,httpAgent:s,fetch:i}){this.baseURL=e,this.maxRetries=Ud("maxRetries",r),this.timeout=Ud("timeout",n),this.httpAgent=s,this.fetch=i??qS}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...GU(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${YU()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(async s=>{const i=s&&Tu(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:e,path:r,...s,body:i}}))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:r=0}={}){var w;const n={...e},{method:s,path:i,query:a,headers:o={}}=n,l=ArrayBuffer.isView(n.body)||n.__binaryRequest&&typeof n.body=="string"?n.body:dw(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,c=this.calculateContentLength(l),d=this.buildURL(i,a);"timeout"in n&&Ud("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const f=n.httpAgent??this.httpAgent??QS(d),h=n.timeout+1e3;typeof((w=f==null?void 0:f.options)==null?void 0:w.timeout)=="number"&&h>(f.options.timeout??0)&&(f.options.timeout=h),this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const g=this.buildHeaders({options:n,headers:o,contentLength:c,retryCount:r});return{req:{method:s,...l&&{body:l},headers:g,...f&&{agent:f},signal:n.signal??null},url:d,timeout:n.timeout}}buildHeaders({options:e,headers:r,contentLength:n,retryCount:s}){const i={};n&&(i["content-length"]=n);const a=this.defaultHeaders(e);return mw(i,a),mw(i,r),dw(e.body)&&Ra!=="node"&&delete i["content-type"],ll(a,"x-stainless-retry-count")===void 0&&ll(r,"x-stainless-retry-count")===void 0&&(i["x-stainless-retry-count"]=String(s)),ll(a,"x-stainless-timeout")===void 0&&ll(r,"x-stainless-timeout")===void 0&&e.timeout&&(i["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(i,r),i}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,s){return Be.generate(e,r,n,s)}request(e,r=null){return new Cu(this.makeRequest(e,r))}async makeRequest(e,r){var f,h;const n=await e,s=n.maxRetries??this.maxRetries;r==null&&(r=s),await this.prepareOptions(n);const{req:i,url:a,timeout:o}=this.buildRequest(n,{retryCount:s-r});if(await this.prepareRequest(i,{url:a,options:n}),On("request",a,n,i.headers),(f=n.signal)!=null&&f.aborted)throw new Nt;const l=new AbortController,c=await this.fetchWithTimeout(a,i,o,l).catch(Sh);if(c instanceof Error){if((h=n.signal)!=null&&h.aborted)throw new Nt;if(r)return this.retryRequest(n,r);throw c.name==="AbortError"?new vm:new Eu({cause:c})}const d=yE(c.headers);if(!c.ok){if(r&&this.shouldRetry(c)){const p=`retrying, ${r} attempts remaining`;return On(`response (error; ${p})`,c.status,a,d),this.retryRequest(n,r,d)}const g=await c.text().catch(p=>Sh(p).message),y=JU(g),w=y?void 0:g;throw On(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,c.status,a,d,w),this.makeStatusError(c.status,y,w,d)}return{response:c,options:n,controller:l}}requestAPIList(e,r){const n=this.makeRequest(r,null);return new WU(this,n,e)}buildURL(e,r){const n=XU(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return vE(s)||(r={...s,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new z(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,s){const{signal:i,...a}=r||{};i&&i.addEventListener("abort",()=>s.abort());const o=setTimeout(()=>s.abort(),n),l={signal:s.signal,...a};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(o)})}shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){let s;const i=n==null?void 0:n["retry-after-ms"];if(i){const o=parseFloat(i);Number.isNaN(o)||(s=o)}const a=n==null?void 0:n["retry-after"];if(a&&!s){const o=parseFloat(a);Number.isNaN(o)?s=Date.parse(a)-Date.now():s=o*1e3}if(!(s&&0<=s&&s<60*1e3)){const o=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(r,o)}return await Co(s),this.makeRequest(e,r-1)}calculateDefaultRetryTimeoutMillis(e,r){const i=r-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Ks}`}}class gE{constructor(e,r,n,s){al.set(this,void 0),BU(this,al,e),this.options=s,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new z("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in e&&typeof r.query=="object")r.query={...r.query,...e.params};else if("url"in e){const n=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(const[s,i]of n)e.url.searchParams.set(s,i);r.query=void 0,r.path=e.url.toString()}return await zU(this,al,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(al=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const r of e.getPaginatedItems())yield r}}class WU extends Cu{constructor(e,r,n){super(r,async s=>new n(e,s.response,await pE(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}const yE=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){const n=r.toString();return e[n.toLowerCase()]||e[n]}}),HU={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},xe=t=>typeof t=="object"&&t!==null&&!vE(t)&&Object.keys(t).every(e=>wE(HU,e)),qU=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ks,"X-Stainless-OS":hw(Deno.build.os),"X-Stainless-Arch":fw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ks,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ks,"X-Stainless-OS":hw(process.platform),"X-Stainless-Arch":fw(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=KU();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ks,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ks,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function KU(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const s=n[1]||0,i=n[2]||0,a=n[3]||0;return{browser:e,version:`${s}.${i}.${a}`}}}return null}const fw=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",hw=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let pw;const GU=()=>pw??(pw=qU()),JU=t=>{try{return JSON.parse(t)}catch{return}},QU=/^[a-z][a-z0-9+.-]*:/i,XU=t=>QU.test(t),Co=t=>new Promise(e=>setTimeout(e,t)),Ud=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new z(`${t} must be an integer`);if(e<0)throw new z(`${t} must be a positive integer`);return e},Sh=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},ol=t=>{var e,r,n,s;if(typeof process<"u")return((e=_i==null?void 0:_i[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(s=(n=(r=Deno.env)==null?void 0:r.get)==null?void 0:n.call(r,t))==null?void 0:s.trim()};function vE(t){if(!t)return!0;for(const e in t)return!1;return!0}function wE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mw(t,e){for(const r in e){if(!wE(e,r))continue;const n=r.toLowerCase();if(!n)continue;const s=e[r];s===null?delete t[n]:s!==void 0&&(t[n]=s)}}const gw=new Set(["authorization","api-key"]);function On(t,...e){if(typeof process<"u"&&(_i==null?void 0:_i.DEBUG)==="true"){const r=e.map(n=>{if(!n)return n;if(n.headers){const i={...n,headers:{...n.headers}};for(const a in n.headers)gw.has(a.toLowerCase())&&(i.headers[a]="REDACTED");return i}let s=null;for(const i in n)gw.has(i.toLowerCase())&&(s??(s={...n}),s[i]="REDACTED");return s??n});console.log(`OpenAI:DEBUG:${t}`,...r)}}const YU=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),ZU=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",e3=t=>typeof(t==null?void 0:t.get)=="function",ll=(t,e)=>{var n;const r=e.toLowerCase();if(e3(t)){const s=((n=e[0])==null?void 0:n.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(i,a,o)=>a+o.toUpperCase());for(const i of[e,r,e.toUpperCase(),s]){const a=t.get(i);if(a)return a}}for(const[s,i]of Object.entries(t))if(s.toLowerCase()===r)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i},t3=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),r=e.length,n=new Uint8Array(r);for(let s=0;s<r;s++)n[s]=e.charCodeAt(s);return Array.from(new Float32Array(n.buffer))}};function Bd(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class Iu extends gE{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class ze extends gE{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const r=Object.fromEntries(e.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const r=(n=e[e.length-1])==null?void 0:n.id;return r?{params:{after:r}}:null}}class W{constructor(e){this._client=e}}let _E=class extends W{list(e,r={},n){return xe(r)?this.list(e,{},r):this._client.getAPIList(`/chat/completions/${e}/messages`,r3,{query:r,...n})}},Pu=class extends W{constructor(){super(...arguments),this.messages=new _E(this._client)}create(e,r){return this._client.post("/chat/completions",{body:e,...r,stream:e.stream??!1})}retrieve(e,r){return this._client.get(`/chat/completions/${e}`,r)}update(e,r,n){return this._client.post(`/chat/completions/${e}`,{body:r,...n})}list(e={},r){return xe(e)?this.list({},e):this._client.getAPIList("/chat/completions",Au,{query:e,...r})}del(e,r){return this._client.delete(`/chat/completions/${e}`,r)}};class Au extends ze{}class r3 extends ze{}Pu.ChatCompletionsPage=Au;Pu.Messages=_E;let ju=class extends W{constructor(){super(...arguments),this.completions=new Pu(this._client)}};ju.Completions=Pu;ju.ChatCompletionsPage=Au;class bE extends W{create(e,r){return this._client.post("/audio/speech",{body:e,...r,headers:{Accept:"application/octet-stream",...r==null?void 0:r.headers},__binaryResponse:!0})}}class xE extends W{create(e,r){return this._client.post("/audio/transcriptions",Ri({body:e,...r,stream:e.stream??!1,__metadata:{model:e.model}}))}}class SE extends W{create(e,r){return this._client.post("/audio/translations",Ri({body:e,...r,__metadata:{model:e.model}}))}}class Io extends W{constructor(){super(...arguments),this.transcriptions=new xE(this._client),this.translations=new SE(this._client),this.speech=new bE(this._client)}}Io.Transcriptions=xE;Io.Translations=SE;Io.Speech=bE;class wm extends W{create(e,r){return this._client.post("/batches",{body:e,...r})}retrieve(e,r){return this._client.get(`/batches/${e}`,r)}list(e={},r){return xe(e)?this.list({},e):this._client.getAPIList("/batches",_m,{query:e,...r})}cancel(e,r){return this._client.post(`/batches/${e}/cancel`,r)}}class _m extends ze{}wm.BatchesPage=_m;var zt=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},ye=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Eh,Rl,$l,fa,ha,Dl,pa,Tr,ma,Sc,Ec,Gs,EE;class bm{constructor(){Eh.add(this),this.controller=new AbortController,Rl.set(this,void 0),$l.set(this,()=>{}),fa.set(this,()=>{}),ha.set(this,void 0),Dl.set(this,()=>{}),pa.set(this,()=>{}),Tr.set(this,{}),ma.set(this,!1),Sc.set(this,!1),Ec.set(this,!1),Gs.set(this,!1),zt(this,Rl,new Promise((e,r)=>{zt(this,$l,e,"f"),zt(this,fa,r,"f")}),"f"),zt(this,ha,new Promise((e,r)=>{zt(this,Dl,e,"f"),zt(this,pa,r,"f")}),"f"),ye(this,Rl,"f").catch(()=>{}),ye(this,ha,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ye(this,Eh,"m",EE).bind(this))},0)}_connected(){this.ended||(ye(this,$l,"f").call(this),this._emit("connect"))}get ended(){return ye(this,ma,"f")}get errored(){return ye(this,Sc,"f")}get aborted(){return ye(this,Ec,"f")}abort(){this.controller.abort()}on(e,r){return(ye(this,Tr,"f")[e]||(ye(this,Tr,"f")[e]=[])).push({listener:r}),this}off(e,r){const n=ye(this,Tr,"f")[e];if(!n)return this;const s=n.findIndex(i=>i.listener===r);return s>=0&&n.splice(s,1),this}once(e,r){return(ye(this,Tr,"f")[e]||(ye(this,Tr,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{zt(this,Gs,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){zt(this,Gs,!0,"f"),await ye(this,ha,"f")}_emit(e,...r){if(ye(this,ma,"f"))return;e==="end"&&(zt(this,ma,!0,"f"),ye(this,Dl,"f").call(this));const n=ye(this,Tr,"f")[e];if(n&&(ye(this,Tr,"f")[e]=n.filter(s=>!s.once),n.forEach(({listener:s})=>s(...r))),e==="abort"){const s=r[0];!ye(this,Gs,"f")&&!(n!=null&&n.length)&&Promise.reject(s),ye(this,fa,"f").call(this,s),ye(this,pa,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=r[0];!ye(this,Gs,"f")&&!(n!=null&&n.length)&&Promise.reject(s),ye(this,fa,"f").call(this,s),ye(this,pa,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Rl=new WeakMap,$l=new WeakMap,fa=new WeakMap,ha=new WeakMap,Dl=new WeakMap,pa=new WeakMap,Tr=new WeakMap,ma=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,Gs=new WeakMap,Eh=new WeakSet,EE=function(e){if(zt(this,Sc,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Nt),e instanceof Nt)return zt(this,Ec,!0,"f"),this._emit("abort",e);if(e instanceof z)return this._emit("error",e);if(e instanceof Error){const r=new z(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new z(String(e)))};var U=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ft=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},Fe,kh,lr,Ll,Wt,ds,ci,ss,kc,gt,Fl,Ml,$a,ga,ya,yw,vw,ww,_w,bw,xw,Sw;class Gt extends bm{constructor(){super(...arguments),Fe.add(this),kh.set(this,[]),lr.set(this,{}),Ll.set(this,{}),Wt.set(this,void 0),ds.set(this,void 0),ci.set(this,void 0),ss.set(this,void 0),kc.set(this,void 0),gt.set(this,void 0),Fl.set(this,void 0),Ml.set(this,void 0),$a.set(this,void 0)}[(kh=new WeakMap,lr=new WeakMap,Ll=new WeakMap,Wt=new WeakMap,ds=new WeakMap,ci=new WeakMap,ss=new WeakMap,kc=new WeakMap,gt=new WeakMap,Fl=new WeakMap,Ml=new WeakMap,$a=new WeakMap,Fe=new WeakSet,Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("event",s=>{const i=r.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const r=new Gt;return r._run(()=>r._fromReadableStream(e)),r}async _fromReadableStream(e,r){var i;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=dr.fromReadableStream(e,this.controller);for await(const a of s)U(this,Fe,"m",ga).call(this,a);if((i=s.controller.signal)!=null&&i.aborted)throw new Nt;return this._addRun(U(this,Fe,"m",ya).call(this))}toReadableStream(){return new dr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,r,n,s,i){const a=new Gt;return a._run(()=>a._runToolAssistantStream(e,r,n,s,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,r,n,s,i){var c;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},l=await e.submitToolOutputs(r,n,o,{...i,signal:this.controller.signal});this._connected();for await(const d of l)U(this,Fe,"m",ga).call(this,d);if((c=l.controller.signal)!=null&&c.aborted)throw new Nt;return this._addRun(U(this,Fe,"m",ya).call(this))}static createThreadAssistantStream(e,r,n){const s=new Gt;return s._run(()=>s._threadAssistantStream(e,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,r,n,s){const i=new Gt;return i._run(()=>i._runAssistantStream(e,r,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return U(this,Fl,"f")}currentRun(){return U(this,Ml,"f")}currentMessageSnapshot(){return U(this,Wt,"f")}currentRunStepSnapshot(){return U(this,$a,"f")}async finalRunSteps(){return await this.done(),Object.values(U(this,lr,"f"))}async finalMessages(){return await this.done(),Object.values(U(this,Ll,"f"))}async finalRun(){if(await this.done(),!U(this,ds,"f"))throw Error("Final run was not received.");return U(this,ds,"f")}async _createThreadAssistantStream(e,r,n){var o;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...r,stream:!0},a=await e.createAndRun(i,{...n,signal:this.controller.signal});this._connected();for await(const l of a)U(this,Fe,"m",ga).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new Nt;return this._addRun(U(this,Fe,"m",ya).call(this))}async _createAssistantStream(e,r,n,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},o=await e.create(r,a,{...s,signal:this.controller.signal});this._connected();for await(const c of o)U(this,Fe,"m",ga).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new Nt;return this._addRun(U(this,Fe,"m",ya).call(this))}static accumulateDelta(e,r){for(const[n,s]of Object.entries(r)){if(!e.hasOwnProperty(n)){e[n]=s;continue}let i=e[n];if(i==null){e[n]=s;continue}if(n==="index"||n==="type"){e[n]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(Bd(i)&&Bd(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...s);continue}for(const a of s){if(!Bd(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=i[o];l==null?i.push(a):i[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${s}, accValue: ${i}`);e[n]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,r,n){return await this._createThreadAssistantStream(r,e,n)}async _runAssistantStream(e,r,n,s){return await this._createAssistantStream(r,e,n,s)}async _runToolAssistantStream(e,r,n,s,i){return await this._createToolAssistantStream(n,e,r,s,i)}}ga=function(e){if(!this.ended)switch(ft(this,Fl,e,"f"),U(this,Fe,"m",ww).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":U(this,Fe,"m",Sw).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":U(this,Fe,"m",vw).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":U(this,Fe,"m",yw).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ya=function(){if(this.ended)throw new z("stream has ended, this shouldn't happen");if(!U(this,ds,"f"))throw Error("Final run has not been received");return U(this,ds,"f")},yw=function(e){const[r,n]=U(this,Fe,"m",bw).call(this,e,U(this,Wt,"f"));ft(this,Wt,r,"f"),U(this,Ll,"f")[r.id]=r;for(const s of n){const i=r.content[s.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,r),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,a=r.content[s.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=U(this,ci,"f")){if(U(this,ss,"f"))switch(U(this,ss,"f").type){case"text":this._emit("textDone",U(this,ss,"f").text,U(this,Wt,"f"));break;case"image_file":this._emit("imageFileDone",U(this,ss,"f").image_file,U(this,Wt,"f"));break}ft(this,ci,s.index,"f")}ft(this,ss,r.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(U(this,ci,"f")!==void 0){const s=e.data.content[U(this,ci,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,U(this,Wt,"f"));break;case"text":this._emit("textDone",s.text,U(this,Wt,"f"));break}}U(this,Wt,"f")&&this._emit("messageDone",e.data),ft(this,Wt,void 0,"f")}},vw=function(e){const r=U(this,Fe,"m",_w).call(this,e);switch(ft(this,$a,r,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const i of n.step_details.tool_calls)i.index==U(this,kc,"f")?this._emit("toolCallDelta",i,r.step_details.tool_calls[i.index]):(U(this,gt,"f")&&this._emit("toolCallDone",U(this,gt,"f")),ft(this,kc,i.index,"f"),ft(this,gt,r.step_details.tool_calls[i.index],"f"),U(this,gt,"f")&&this._emit("toolCallCreated",U(this,gt,"f")));this._emit("runStepDelta",e.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ft(this,$a,void 0,"f"),e.data.step_details.type=="tool_calls"&&U(this,gt,"f")&&(this._emit("toolCallDone",U(this,gt,"f")),ft(this,gt,void 0,"f")),this._emit("runStepDone",e.data,r);break}},ww=function(e){U(this,kh,"f").push(e),this._emit("event",e)},_w=function(e){switch(e.event){case"thread.run.step.created":return U(this,lr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let r=U(this,lr,"f")[e.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const s=Gt.accumulateDelta(r,n.delta);U(this,lr,"f")[e.data.id]=s}return U(this,lr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":U(this,lr,"f")[e.data.id]=e.data;break}if(U(this,lr,"f")[e.data.id])return U(this,lr,"f")[e.data.id];throw new Error("No snapshot available")},bw=function(e,r){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in r.content){let a=r.content[i.index];r.content[i.index]=U(this,Fe,"m",xw).call(this,i,a)}else r.content[i.index]=i,n.push(i);return[r,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},xw=function(e,r){return Gt.accumulateDelta(r,e)},Sw=function(e){switch(ft(this,Ml,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":ft(this,ds,e.data,"f"),U(this,gt,"f")&&(this._emit("toolCallDone",U(this,gt,"f")),ft(this,gt,void 0,"f"));break}};class xm extends W{create(e,r){return this._client.post("/assistants",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,r){return this._client.get(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,r,n){return this._client.post(`/assistants/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},r){return xe(e)?this.list({},e):this._client.getAPIList("/assistants",Sm,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,r){return this._client.delete(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Sm extends ze{}xm.AssistantsPage=Sm;function Ew(t){return typeof t.parse=="function"}const bi=t=>(t==null?void 0:t.role)==="assistant",kE=t=>(t==null?void 0:t.role)==="function",TE=t=>(t==null?void 0:t.role)==="tool";function Em(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Po(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function n3(t,e){return!e||!CE(e)?{...t,choices:t.choices.map(r=>({...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:km(t,e)}function km(t,e){const r=t.choices.map(n=>{var s;if(n.finish_reason==="length")throw new lE;if(n.finish_reason==="content_filter")throw new cE;return{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:((s=n.message.tool_calls)==null?void 0:s.map(i=>i3(e,i)))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?s3(e,n.message.content):null}}});return{...t,choices:r}}function s3(t,e){var r,n;return((r=t.response_format)==null?void 0:r.type)!=="json_schema"?null:((n=t.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function i3(t,e){var n;const r=(n=t.tools)==null?void 0:n.find(s=>{var i;return((i=s.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Po(r)?r.$parseRaw(e.function.arguments):r!=null&&r.function.strict?JSON.parse(e.function.arguments):null}}}function a3(t,e){var n;if(!t)return!1;const r=(n=t.tools)==null?void 0:n.find(s=>{var i;return((i=s.function)==null?void 0:i.name)===e.function.name});return Po(r)||(r==null?void 0:r.function.strict)||!1}function CE(t){var e;return Em(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(r=>Po(r)||r.type==="function"&&r.function.strict===!0))??!1}function o3(t){for(const e of t??[]){if(e.type!=="function")throw new z(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new z(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var rt=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},He,Th,Tc,Ch,Ih,Ph,IE,Ah;const kw=10;class PE extends bm{constructor(){super(...arguments),He.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const r=(n=e.choices[0])==null?void 0:n.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),(kE(e)||TE(e))&&e.content)this._emit("functionCallResult",e.content);else if(bi(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(bi(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new z("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),rt(this,He,"m",Th).call(this)}async finalMessage(){return await this.done(),rt(this,He,"m",Tc).call(this)}async finalFunctionCall(){return await this.done(),rt(this,He,"m",Ch).call(this)}async finalFunctionCallResult(){return await this.done(),rt(this,He,"m",Ih).call(this)}async totalUsage(){return await this.done(),rt(this,He,"m",Ph).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const r=rt(this,He,"m",Tc).call(this);r&&this._emit("finalMessage",r);const n=rt(this,He,"m",Th).call(this);n&&this._emit("finalContent",n);const s=rt(this,He,"m",Ch).call(this);s&&this._emit("finalFunctionCall",s);const i=rt(this,He,"m",Ih).call(this);i!=null&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",rt(this,He,"m",Ph).call(this))}async _createChatCompletion(e,r,n){const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),rt(this,He,"m",IE).call(this,r);const i=await e.chat.completions.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(km(i,r))}async _runChatCompletion(e,r,n){for(const s of r.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,r,n)}async _runFunctions(e,r,n){var h;const s="function",{function_call:i="auto",stream:a,...o}=r,l=typeof i!="string"&&(i==null?void 0:i.name),{maxChatCompletions:c=kw}=n||{},d={};for(const g of r.functions)d[g.name||g.function.name]=g;const f=r.functions.map(g=>({name:g.name||g.function.name,parameters:g.parameters,description:g.description}));for(const g of r.messages)this._addMessage(g,!1);for(let g=0;g<c;++g){const w=(h=(await this._createChatCompletion(e,{...o,function_call:i,functions:f,messages:[...this.messages]},n)).choices[0])==null?void 0:h.message;if(!w)throw new z("missing message in ChatCompletion response");if(!w.function_call)return;const{name:_,arguments:m}=w.function_call,p=d[_];if(p){if(l&&l!==_){const E=`Invalid function_call: ${JSON.stringify(_)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,name:_,content:E});continue}}else{const E=`Invalid function_call: ${JSON.stringify(_)}. Available options are: ${f.map(x=>JSON.stringify(x.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:_,content:E});continue}let v;try{v=Ew(p)?await p.parse(m):m}catch(E){this._addMessage({role:s,name:_,content:E instanceof Error?E.message:String(E)});continue}const S=await p.function(v,this),T=rt(this,He,"m",Ah).call(this,S);if(this._addMessage({role:s,name:_,content:T}),l)return}}async _runTools(e,r,n){var g,y,w;const s="tool",{tool_choice:i="auto",stream:a,...o}=r,l=typeof i!="string"&&((g=i==null?void 0:i.function)==null?void 0:g.name),{maxChatCompletions:c=kw}=n||{},d=r.tools.map(_=>{if(Po(_)){if(!_.$callback)throw new z("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_.$callback,name:_.function.name,description:_.function.description||"",parameters:_.function.parameters,parse:_.$parseRaw,strict:!0}}}return _}),f={};for(const _ of d)_.type==="function"&&(f[_.function.name||_.function.function.name]=_.function);const h="tools"in r?d.map(_=>_.type==="function"?{type:"function",function:{name:_.function.name||_.function.function.name,parameters:_.function.parameters,description:_.function.description,strict:_.function.strict}}:_):void 0;for(const _ of r.messages)this._addMessage(_,!1);for(let _=0;_<c;++_){const p=(y=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:h,messages:[...this.messages]},n)).choices[0])==null?void 0:y.message;if(!p)throw new z("missing message in ChatCompletion response");if(!((w=p.tool_calls)!=null&&w.length))return;for(const v of p.tool_calls){if(v.type!=="function")continue;const S=v.id,{name:T,arguments:E}=v.function,x=f[T];if(x){if(l&&l!==T){const C=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:S,content:C});continue}}else{const C=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${Object.keys(f).map(D=>JSON.stringify(D)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:S,content:C});continue}let I;try{I=Ew(x)?await x.parse(E):E}catch(C){const D=C instanceof Error?C.message:String(C);this._addMessage({role:s,tool_call_id:S,content:D});continue}const j=await x.function(I,this),N=rt(this,He,"m",Ah).call(this,j);if(this._addMessage({role:s,tool_call_id:S,content:N}),l)return}}}}He=new WeakSet,Th=function(){return rt(this,He,"m",Tc).call(this).content??null},Tc=function(){let e=this.messages.length;for(;e-- >0;){const r=this.messages[e];if(bi(r)){const{function_call:n,...s}=r,i={...s,content:r.content??null,refusal:r.refusal??null};return n&&(i.function_call=n),i}}throw new z("stream ended without producing a ChatCompletionMessage with role=assistant")},Ch=function(){var e,r;for(let n=this.messages.length-1;n>=0;n--){const s=this.messages[n];if(bi(s)&&(s!=null&&s.function_call))return s.function_call;if(bi(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(r=s.tool_calls.at(-1))==null?void 0:r.function}},Ih=function(){for(let e=this.messages.length-1;e>=0;e--){const r=this.messages[e];if(kE(r)&&r.content!=null||TE(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(n=>{var s;return n.role==="assistant"&&((s=n.tool_calls)==null?void 0:s.some(i=>i.type==="function"&&i.id===r.tool_call_id))}))return r.content}},Ph=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},IE=function(e){if(e.n!=null&&e.n>1)throw new z("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Ah=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class lo extends PE{static runFunctions(e,r,n){const s=new lo,i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,r,i)),s}static runTools(e,r,n){const s=new lo,i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,r,i)),s}_addMessage(e,r=!0){super._addMessage(e,r),bi(e)&&e.content&&this._emit("content",e.content)}}const AE=1,jE=2,NE=4,OE=8,RE=16,$E=32,DE=64,LE=128,FE=256,ME=LE|FE,UE=RE|$E|ME|DE,BE=AE|jE|UE,zE=NE|OE,l3=BE|zE,Ae={STR:AE,NUM:jE,ARR:NE,OBJ:OE,NULL:RE,BOOL:$E,NAN:DE,INFINITY:LE,MINUS_INFINITY:FE,INF:ME,SPECIAL:UE,ATOM:BE,COLLECTION:zE,ALL:l3};class c3 extends Error{}class u3 extends Error{}function d3(t,e=Ae.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return f3(t.trim(),e)}const f3=(t,e)=>{const r=t.length;let n=0;const s=h=>{throw new c3(`${h} at position ${n}`)},i=h=>{throw new u3(`${h} at position ${n}`)},a=()=>(f(),n>=r&&s("Unexpected end of input"),t[n]==='"'?o():t[n]==="{"?l():t[n]==="["?c():t.substring(n,n+4)==="null"||Ae.NULL&e&&r-n<4&&"null".startsWith(t.substring(n))?(n+=4,null):t.substring(n,n+4)==="true"||Ae.BOOL&e&&r-n<4&&"true".startsWith(t.substring(n))?(n+=4,!0):t.substring(n,n+5)==="false"||Ae.BOOL&e&&r-n<5&&"false".startsWith(t.substring(n))?(n+=5,!1):t.substring(n,n+8)==="Infinity"||Ae.INFINITY&e&&r-n<8&&"Infinity".startsWith(t.substring(n))?(n+=8,1/0):t.substring(n,n+9)==="-Infinity"||Ae.MINUS_INFINITY&e&&1<r-n&&r-n<9&&"-Infinity".startsWith(t.substring(n))?(n+=9,-1/0):t.substring(n,n+3)==="NaN"||Ae.NAN&e&&r-n<3&&"NaN".startsWith(t.substring(n))?(n+=3,NaN):d()),o=()=>{const h=n;let g=!1;for(n++;n<r&&(t[n]!=='"'||g&&t[n-1]==="\\");)g=t[n]==="\\"?!g:!1,n++;if(t.charAt(n)=='"')try{return JSON.parse(t.substring(h,++n-Number(g)))}catch(y){i(String(y))}else if(Ae.STR&e)try{return JSON.parse(t.substring(h,n-Number(g))+'"')}catch{return JSON.parse(t.substring(h,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{n++,f();const h={};try{for(;t[n]!=="}";){if(f(),n>=r&&Ae.OBJ&e)return h;const g=o();f(),n++;try{const y=a();Object.defineProperty(h,g,{value:y,writable:!0,enumerable:!0,configurable:!0})}catch(y){if(Ae.OBJ&e)return h;throw y}f(),t[n]===","&&n++}}catch{if(Ae.OBJ&e)return h;s("Expected '}' at end of object")}return n++,h},c=()=>{n++;const h=[];try{for(;t[n]!=="]";)h.push(a()),f(),t[n]===","&&n++}catch{if(Ae.ARR&e)return h;s("Expected ']' at end of array")}return n++,h},d=()=>{if(n===0){t==="-"&&Ae.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(Ae.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(g))}}const h=n;for(t[n]==="-"&&n++;t[n]&&!",]}".includes(t[n]);)n++;n==r&&!(Ae.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(h,n))}catch{t.substring(h,n)==="-"&&Ae.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(h,t.lastIndexOf("e")))}catch(y){i(String(y))}}},f=()=>{for(;n<r&&` 
\r	`.includes(t[n]);)n++};return a()},Tw=t=>d3(t,Ae.ALL^Ae.NUM);var zs=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},ne=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Te,kr,Vs,Zr,zd,cl,Vd,Wd,Hd,ul,qd,Cw;class co extends PE{constructor(e){super(),Te.add(this),kr.set(this,void 0),Vs.set(this,void 0),Zr.set(this,void 0),zs(this,kr,e,"f"),zs(this,Vs,[],"f")}get currentChatCompletionSnapshot(){return ne(this,Zr,"f")}static fromReadableStream(e){const r=new co(null);return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,n){const s=new co(r);return s._run(()=>s._runChatCompletion(e,{...r,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,r,n){var a;super._createChatCompletion;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ne(this,Te,"m",zd).call(this);const i=await e.chat.completions.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const o of i)ne(this,Te,"m",Vd).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new Nt;return this._addChatCompletion(ne(this,Te,"m",ul).call(this))}async _fromReadableStream(e,r){var a;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),ne(this,Te,"m",zd).call(this),this._connected();const s=dr.fromReadableStream(e,this.controller);let i;for await(const o of s)i&&i!==o.id&&this._addChatCompletion(ne(this,Te,"m",ul).call(this)),ne(this,Te,"m",Vd).call(this,o),i=o.id;if((a=s.controller.signal)!=null&&a.aborted)throw new Nt;return this._addChatCompletion(ne(this,Te,"m",ul).call(this))}[(kr=new WeakMap,Vs=new WeakMap,Zr=new WeakMap,Te=new WeakSet,zd=function(){this.ended||zs(this,Zr,void 0,"f")},cl=function(r){let n=ne(this,Vs,"f")[r.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ne(this,Vs,"f")[r.index]=n,n)},Vd=function(r){var s,i,a,o,l,c,d,f,h,g,y,w,_,m,p;if(this.ended)return;const n=ne(this,Te,"m",Cw).call(this,r);this._emit("chunk",r,n);for(const v of r.choices){const S=n.choices[v.index];v.delta.content!=null&&((s=S.message)==null?void 0:s.role)==="assistant"&&((i=S.message)!=null&&i.content)&&(this._emit("content",v.delta.content,S.message.content),this._emit("content.delta",{delta:v.delta.content,snapshot:S.message.content,parsed:S.message.parsed})),v.delta.refusal!=null&&((a=S.message)==null?void 0:a.role)==="assistant"&&((o=S.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:v.delta.refusal,snapshot:S.message.refusal}),((l=v.logprobs)==null?void 0:l.content)!=null&&((c=S.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=v.logprobs)==null?void 0:d.content,snapshot:((f=S.logprobs)==null?void 0:f.content)??[]}),((h=v.logprobs)==null?void 0:h.refusal)!=null&&((g=S.message)==null?void 0:g.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(y=v.logprobs)==null?void 0:y.refusal,snapshot:((w=S.logprobs)==null?void 0:w.refusal)??[]});const T=ne(this,Te,"m",cl).call(this,S);S.finish_reason&&(ne(this,Te,"m",Hd).call(this,S),T.current_tool_call_index!=null&&ne(this,Te,"m",Wd).call(this,S,T.current_tool_call_index));for(const E of v.delta.tool_calls??[])T.current_tool_call_index!==E.index&&(ne(this,Te,"m",Hd).call(this,S),T.current_tool_call_index!=null&&ne(this,Te,"m",Wd).call(this,S,T.current_tool_call_index)),T.current_tool_call_index=E.index;for(const E of v.delta.tool_calls??[]){const x=(_=S.message.tool_calls)==null?void 0:_[E.index];x!=null&&x.type&&((x==null?void 0:x.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(m=x.function)==null?void 0:m.name,index:E.index,arguments:x.function.arguments,parsed_arguments:x.function.parsed_arguments,arguments_delta:((p=E.function)==null?void 0:p.arguments)??""}):(x==null||x.type,void 0))}}},Wd=function(r,n){var a,o,l;if(ne(this,Te,"m",cl).call(this,r).done_tool_calls.has(n))return;const i=(a=r.message.tool_calls)==null?void 0:a[n];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const c=(l=(o=ne(this,kr,"f"))==null?void 0:o.tools)==null?void 0:l.find(d=>d.type==="function"&&d.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:n,arguments:i.function.arguments,parsed_arguments:Po(c)?c.$parseRaw(i.function.arguments):c!=null&&c.function.strict?JSON.parse(i.function.arguments):null})}else i.type},Hd=function(r){var s,i;const n=ne(this,Te,"m",cl).call(this,r);if(r.message.content&&!n.content_done){n.content_done=!0;const a=ne(this,Te,"m",qd).call(this);this._emit("content.done",{content:r.message.content,parsed:a?a.$parseRaw(r.message.content):null})}r.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),(s=r.logprobs)!=null&&s.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),(i=r.logprobs)!=null&&i.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},ul=function(){if(this.ended)throw new z("stream has ended, this shouldn't happen");const r=ne(this,Zr,"f");if(!r)throw new z("request ended without sending any chunks");return zs(this,Zr,void 0,"f"),zs(this,Vs,[],"f"),h3(r,ne(this,kr,"f"))},qd=function(){var n;const r=(n=ne(this,kr,"f"))==null?void 0:n.response_format;return Em(r)?r:null},Cw=function(r){var n,s,i,a;let o=ne(this,Zr,"f");const{choices:l,...c}=r;o?Object.assign(o,c):o=zs(this,Zr,{...c,choices:[]},"f");for(const{delta:d,finish_reason:f,index:h,logprobs:g=null,...y}of r.choices){let w=o.choices[h];if(w||(w=o.choices[h]={finish_reason:f,index:h,message:{},logprobs:g,...y}),g)if(!w.logprobs)w.logprobs=Object.assign({},g);else{const{content:E,refusal:x,...I}=g;Object.assign(w.logprobs,I),E&&((n=w.logprobs).content??(n.content=[]),w.logprobs.content.push(...E)),x&&((s=w.logprobs).refusal??(s.refusal=[]),w.logprobs.refusal.push(...x))}if(f&&(w.finish_reason=f,ne(this,kr,"f")&&CE(ne(this,kr,"f")))){if(f==="length")throw new lE;if(f==="content_filter")throw new cE}if(Object.assign(w,y),!d)continue;const{content:_,refusal:m,function_call:p,role:v,tool_calls:S,...T}=d;if(Object.assign(w.message,T),m&&(w.message.refusal=(w.message.refusal||"")+m),v&&(w.message.role=v),p&&(w.message.function_call?(p.name&&(w.message.function_call.name=p.name),p.arguments&&((i=w.message.function_call).arguments??(i.arguments=""),w.message.function_call.arguments+=p.arguments)):w.message.function_call=p),_&&(w.message.content=(w.message.content||"")+_,!w.message.refusal&&ne(this,Te,"m",qd).call(this)&&(w.message.parsed=Tw(w.message.content))),S){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:E,id:x,type:I,function:j,...N}of S){const C=(a=w.message.tool_calls)[E]??(a[E]={});Object.assign(C,N),x&&(C.id=x),I&&(C.type=I),j&&(C.function??(C.function={name:j.name??"",arguments:""})),j!=null&&j.name&&(C.function.name=j.name),j!=null&&j.arguments&&(C.function.arguments+=j.arguments,a3(ne(this,kr,"f"),C)&&(C.function.parsed_arguments=Tw(C.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("chunk",s=>{const i=r.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new dr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function h3(t,e){const{id:r,choices:n,created:s,model:i,system_fingerprint:a,...o}=t,l={...o,id:r,choices:n.map(({message:c,finish_reason:d,index:f,logprobs:h,...g})=>{if(!d)throw new z(`missing finish_reason for choice ${f}`);const{content:y=null,function_call:w,tool_calls:_,...m}=c,p=c.role;if(!p)throw new z(`missing role for choice ${f}`);if(w){const{arguments:v,name:S}=w;if(v==null)throw new z(`missing function_call.arguments for choice ${f}`);if(!S)throw new z(`missing function_call.name for choice ${f}`);return{...g,message:{content:y,function_call:{arguments:v,name:S},role:p,refusal:c.refusal??null},finish_reason:d,index:f,logprobs:h}}return _?{...g,index:f,finish_reason:d,logprobs:h,message:{...m,role:p,content:y,refusal:c.refusal??null,tool_calls:_.map((v,S)=>{const{function:T,type:E,id:x,...I}=v,{arguments:j,name:N,...C}=T||{};if(x==null)throw new z(`missing choices[${f}].tool_calls[${S}].id
${dl(t)}`);if(E==null)throw new z(`missing choices[${f}].tool_calls[${S}].type
${dl(t)}`);if(N==null)throw new z(`missing choices[${f}].tool_calls[${S}].function.name
${dl(t)}`);if(j==null)throw new z(`missing choices[${f}].tool_calls[${S}].function.arguments
${dl(t)}`);return{...I,id:x,type:E,function:{...C,name:N,arguments:j}}})}}:{...g,message:{...m,content:y,role:p,refusal:c.refusal??null},finish_reason:d,index:f,logprobs:h}}),created:s,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return n3(l,e)}function dl(t){return JSON.stringify(t)}class xi extends co{static fromReadableStream(e){const r=new xi(null);return r._run(()=>r._fromReadableStream(e)),r}static runFunctions(e,r,n){const s=new xi(null),i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,r,i)),s}static runTools(e,r,n){const s=new xi(r),i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,r,i)),s}}let VE=class extends W{parse(e,r){return o3(e.tools),this._client.chat.completions.create(e,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(n=>km(n,e))}runFunctions(e,r){return e.stream?xi.runFunctions(this._client,e,r):lo.runFunctions(this._client,e,r)}runTools(e,r){return e.stream?xi.runTools(this._client,e,r):lo.runTools(this._client,e,r)}stream(e,r){return co.createChatCompletion(this._client,e,r)}};class jh extends W{constructor(){super(...arguments),this.completions=new VE(this._client)}}(function(t){t.Completions=VE})(jh||(jh={}));class WE extends W{create(e,r){return this._client.post("/realtime/sessions",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class HE extends W{create(e,r){return this._client.post("/realtime/transcription_sessions",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Nu extends W{constructor(){super(...arguments),this.sessions=new WE(this._client),this.transcriptionSessions=new HE(this._client)}}Nu.Sessions=WE;Nu.TranscriptionSessions=HE;class Tm extends W{create(e,r,n){return this._client.post(`/threads/${e}/messages`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/threads/${e}/messages/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,r,n,s){return this._client.post(`/threads/${e}/messages/${r}`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,r={},n){return xe(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/messages`,Cm,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,r,n){return this._client.delete(`/threads/${e}/messages/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Cm extends ze{}Tm.MessagesPage=Cm;class Im extends W{retrieve(e,r,n,s={},i){return xe(s)?this.retrieve(e,r,n,{},s):this._client.get(`/threads/${e}/runs/${r}/steps/${n}`,{query:s,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,r,n={},s){return xe(n)?this.list(e,r,{},n):this._client.getAPIList(`/threads/${e}/runs/${r}/steps`,Pm,{query:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Pm extends ze{}Im.RunStepsPage=Pm;let Ao=class extends W{constructor(){super(...arguments),this.steps=new Im(this._client)}create(e,r,n){const{include:s,...i}=r;return this._client.post(`/threads/${e}/runs`,{query:{include:s},body:i,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:r.stream??!1})}retrieve(e,r,n){return this._client.get(`/threads/${e}/runs/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,r,n,s){return this._client.post(`/threads/${e}/runs/${r}`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,r={},n){return xe(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/runs`,Am,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,r,n){return this._client.post(`/threads/${e}/runs/${r}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,r,n){const s=await this.create(e,r,n);return await this.poll(e,s.id,n)}createAndStream(e,r,n){return Gt.createAssistantStream(e,this._client.beta.threads.runs,r,n)}async poll(e,r,n){const s={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:i,response:a}=await this.retrieve(e,r,{...n,headers:{...n==null?void 0:n.headers,...s}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Co(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,r,n){return Gt.createAssistantStream(e,this._client.beta.threads.runs,r,n)}submitToolOutputs(e,r,n,s){return this._client.post(`/threads/${e}/runs/${r}/submit_tool_outputs`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,r,n,s){const i=await this.submitToolOutputs(e,r,n,s);return await this.poll(e,i.id,s)}submitToolOutputsStream(e,r,n,s){return Gt.createToolAssistantStream(e,r,this._client.beta.threads.runs,n,s)}};class Am extends ze{}Ao.RunsPage=Am;Ao.Steps=Im;Ao.RunStepsPage=Pm;class Hi extends W{constructor(){super(...arguments),this.runs=new Ao(this._client),this.messages=new Tm(this._client)}create(e={},r){return xe(e)?this.create({},e):this._client.post("/threads",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,r){return this._client.get(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,r,n){return this._client.post(`/threads/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,r){return this._client.delete(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}createAndRun(e,r){return this._client.post("/threads/runs",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:e.stream??!1})}async createAndRunPoll(e,r){const n=await this.createAndRun(e,r);return await this.runs.poll(n.thread_id,n.id,r)}createAndRunStream(e,r){return Gt.createThreadAssistantStream(e,this._client.beta.threads,r)}}Hi.Runs=Ao;Hi.RunsPage=Am;Hi.Messages=Tm;Hi.MessagesPage=Cm;class qi extends W{constructor(){super(...arguments),this.realtime=new Nu(this._client),this.chat=new jh(this._client),this.assistants=new xm(this._client),this.threads=new Hi(this._client)}}qi.Realtime=Nu;qi.Assistants=xm;qi.AssistantsPage=Sm;qi.Threads=Hi;class qE extends W{create(e,r){return this._client.post("/completions",{body:e,...r,stream:e.stream??!1})}}class KE extends W{create(e,r){const n=!!e.encoding_format;let s=n?e.encoding_format:"base64";n&&On("Request","User defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:s},...r});return n?i:(On("response","Decoding base64 embeddings to float32 array"),i._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const l=o.embedding;o.embedding=t3(l)}),a)))}}class jm extends W{retrieve(e,r,n,s){return this._client.get(`/evals/${e}/runs/${r}/output_items/${n}`,s)}list(e,r,n={},s){return xe(n)?this.list(e,r,{},n):this._client.getAPIList(`/evals/${e}/runs/${r}/output_items`,Nm,{query:n,...s})}}class Nm extends ze{}jm.OutputItemListResponsesPage=Nm;class jo extends W{constructor(){super(...arguments),this.outputItems=new jm(this._client)}create(e,r,n){return this._client.post(`/evals/${e}/runs`,{body:r,...n})}retrieve(e,r,n){return this._client.get(`/evals/${e}/runs/${r}`,n)}list(e,r={},n){return xe(r)?this.list(e,{},r):this._client.getAPIList(`/evals/${e}/runs`,Om,{query:r,...n})}del(e,r,n){return this._client.delete(`/evals/${e}/runs/${r}`,n)}cancel(e,r,n){return this._client.post(`/evals/${e}/runs/${r}`,n)}}class Om extends ze{}jo.RunListResponsesPage=Om;jo.OutputItems=jm;jo.OutputItemListResponsesPage=Nm;class No extends W{constructor(){super(...arguments),this.runs=new jo(this._client)}create(e,r){return this._client.post("/evals",{body:e,...r})}retrieve(e,r){return this._client.get(`/evals/${e}`,r)}update(e,r,n){return this._client.post(`/evals/${e}`,{body:r,...n})}list(e={},r){return xe(e)?this.list({},e):this._client.getAPIList("/evals",Rm,{query:e,...r})}del(e,r){return this._client.delete(`/evals/${e}`,r)}}class Rm extends ze{}No.EvalListResponsesPage=Rm;No.Runs=jo;No.RunListResponsesPage=Om;let $m=class extends W{create(e,r){return this._client.post("/files",Ri({body:e,...r}))}retrieve(e,r){return this._client.get(`/files/${e}`,r)}list(e={},r){return xe(e)?this.list({},e):this._client.getAPIList("/files",Dm,{query:e,...r})}del(e,r){return this._client.delete(`/files/${e}`,r)}content(e,r){return this._client.get(`/files/${e}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}retrieveContent(e,r){return this._client.get(`/files/${e}/content`,r)}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:n=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!s.has(a.status);)if(await Co(r),a=await this.retrieve(e),Date.now()-i>n)throw new vm({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return a}};class Dm extends ze{}$m.FileObjectsPage=Dm;class GE extends W{}let JE=class extends W{run(e,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...r})}validate(e,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...r})}};class Lm extends W{constructor(){super(...arguments),this.graders=new JE(this._client)}}Lm.Graders=JE;class Fm extends W{create(e,r,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Mm,{body:r,method:"post",...n})}retrieve(e,r={},n){return xe(r)?this.retrieve(e,{},r):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:r,...n})}del(e,r,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${r}`,n)}}class Mm extends Iu{}Fm.PermissionCreateResponsesPage=Mm;let Ou=class extends W{constructor(){super(...arguments),this.permissions=new Fm(this._client)}};Ou.Permissions=Fm;Ou.PermissionCreateResponsesPage=Mm;class Um extends W{list(e,r={},n){return xe(r)?this.list(e,{},r):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Bm,{query:r,...n})}}class Bm extends ze{}Um.FineTuningJobCheckpointsPage=Bm;class Ki extends W{constructor(){super(...arguments),this.checkpoints=new Um(this._client)}create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(`/fine_tuning/jobs/${e}`,r)}list(e={},r){return xe(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",zm,{query:e,...r})}cancel(e,r){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return xe(r)?this.listEvents(e,{},r):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Vm,{query:r,...n})}pause(e,r){return this._client.post(`/fine_tuning/jobs/${e}/pause`,r)}resume(e,r){return this._client.post(`/fine_tuning/jobs/${e}/resume`,r)}}class zm extends ze{}class Vm extends ze{}Ki.FineTuningJobsPage=zm;Ki.FineTuningJobEventsPage=Vm;Ki.Checkpoints=Um;Ki.FineTuningJobCheckpointsPage=Bm;class qn extends W{constructor(){super(...arguments),this.methods=new GE(this._client),this.jobs=new Ki(this._client),this.checkpoints=new Ou(this._client),this.alpha=new Lm(this._client)}}qn.Methods=GE;qn.Jobs=Ki;qn.FineTuningJobsPage=zm;qn.FineTuningJobEventsPage=Vm;qn.Checkpoints=Ou;qn.Alpha=Lm;class QE extends W{}class Wm extends W{constructor(){super(...arguments),this.graderModels=new QE(this._client)}}Wm.GraderModels=QE;class XE extends W{createVariation(e,r){return this._client.post("/images/variations",Ri({body:e,...r}))}edit(e,r){return this._client.post("/images/edits",Ri({body:e,...r}))}generate(e,r){return this._client.post("/images/generations",{body:e,...r})}}class Hm extends W{retrieve(e,r){return this._client.get(`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",qm,e)}del(e,r){return this._client.delete(`/models/${e}`,r)}}class qm extends Iu{}Hm.ModelsPage=qm;class YE extends W{create(e,r){return this._client.post("/moderations",{body:e,...r})}}function p3(t,e){return!e||!g3(e)?{...t,output_parsed:null,output:t.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(n=>({...n,parsed:null}))}:r)}:ZE(t,e)}function ZE(t,e){const r=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:w3(e,s)};if(s.type==="message"){const i=s.content.map(a=>a.type==="output_text"?{...a,parsed:m3(e,a.text)}:a);return{...s,content:i}}return s}),n=Object.assign({},t,{output:r});return Object.getOwnPropertyDescriptor(t,"output_text")||ek(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const s of n.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),n}function m3(t,e){var r,n,s,i;return((n=(r=t.text)==null?void 0:r.format)==null?void 0:n.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function g3(t){var e;return!!Em((e=t.text)==null?void 0:e.format)}function y3(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function v3(t,e){return t.find(r=>r.type==="function"&&r.name===e)}function w3(t,e){const r=v3(t.tools??[],e.name);return{...e,...e,parsed_arguments:y3(r)?r.$parseRaw(e.arguments):r!=null&&r.strict?JSON.parse(e.arguments):null}}function ek(t){const e=[];for(const r of t.output)if(r.type==="message")for(const n of r.content)n.type==="output_text"&&e.push(n.text);t.output_text=e.join("")}class tk extends W{list(e,r={},n){return xe(r)?this.list(e,{},r):this._client.getAPIList(`/responses/${e}/input_items`,b3,{query:r,...n})}}var Ws=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},en=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Hs,fl,tn,hl,Iw,Pw,Aw,jw;class Km extends bm{constructor(e){super(),Hs.add(this),fl.set(this,void 0),tn.set(this,void 0),hl.set(this,void 0),Ws(this,fl,e,"f")}static createResponse(e,r,n){const s=new Km(r);return s._run(()=>s._createResponse(e,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createResponse(e,r,n){var a;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),en(this,Hs,"m",Iw).call(this);const i=await e.responses.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const o of i)en(this,Hs,"m",Pw).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new Nt;return en(this,Hs,"m",Aw).call(this)}[(fl=new WeakMap,tn=new WeakMap,hl=new WeakMap,Hs=new WeakSet,Iw=function(){this.ended||Ws(this,tn,void 0,"f")},Pw=function(r){if(this.ended)return;const n=en(this,Hs,"m",jw).call(this,r);switch(this._emit("event",r),r.type){case"response.output_text.delta":{const s=n.output[r.output_index];if(!s)throw new z(`missing output at index ${r.output_index}`);if(s.type==="message"){const i=s.content[r.content_index];if(!i)throw new z(`missing content at index ${r.content_index}`);if(i.type!=="output_text")throw new z(`expected content to be 'output_text', got ${i.type}`);this._emit("response.output_text.delta",{...r,snapshot:i.text})}break}case"response.function_call_arguments.delta":{const s=n.output[r.output_index];if(!s)throw new z(`missing output at index ${r.output_index}`);s.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...r,snapshot:s.arguments});break}default:this._emit(r.type,r);break}},Aw=function(){if(this.ended)throw new z("stream has ended, this shouldn't happen");const r=en(this,tn,"f");if(!r)throw new z("request ended without sending any events");Ws(this,tn,void 0,"f");const n=_3(r,en(this,fl,"f"));return Ws(this,hl,n,"f"),n},jw=function(r){let n=en(this,tn,"f");if(!n){if(r.type!=="response.created")throw new z(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return n=Ws(this,tn,r.response,"f"),n}switch(r.type){case"response.output_item.added":{n.output.push(r.item);break}case"response.content_part.added":{const s=n.output[r.output_index];if(!s)throw new z(`missing output at index ${r.output_index}`);s.type==="message"&&s.content.push(r.part);break}case"response.output_text.delta":{const s=n.output[r.output_index];if(!s)throw new z(`missing output at index ${r.output_index}`);if(s.type==="message"){const i=s.content[r.content_index];if(!i)throw new z(`missing content at index ${r.content_index}`);if(i.type!=="output_text")throw new z(`expected content to be 'output_text', got ${i.type}`);i.text+=r.delta}break}case"response.function_call_arguments.delta":{const s=n.output[r.output_index];if(!s)throw new z(`missing output at index ${r.output_index}`);s.type==="function_call"&&(s.arguments+=r.delta);break}case"response.completed":{Ws(this,tn,r.response,"f");break}}return n},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("event",s=>{const i=r.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=en(this,hl,"f");if(!e)throw new z("stream ended without producing a ChatCompletion");return e}}function _3(t,e){return p3(t,e)}class Gm extends W{constructor(){super(...arguments),this.inputItems=new tk(this._client)}create(e,r){return this._client.post("/responses",{body:e,...r,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&ek(n),n))}retrieve(e,r={},n){return xe(r)?this.retrieve(e,{},r):this._client.get(`/responses/${e}`,{query:r,...n})}del(e,r){return this._client.delete(`/responses/${e}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}parse(e,r){return this._client.responses.create(e,r)._thenUnwrap(n=>ZE(n,e))}stream(e,r){return Km.createResponse(this._client,e,r)}}class b3 extends ze{}Gm.InputItems=tk;class rk extends W{create(e,r,n){return this._client.post(`/uploads/${e}/parts`,Ri({body:r,...n}))}}class Jm extends W{constructor(){super(...arguments),this.parts=new rk(this._client)}create(e,r){return this._client.post("/uploads",{body:e,...r})}cancel(e,r){return this._client.post(`/uploads/${e}/cancel`,r)}complete(e,r,n){return this._client.post(`/uploads/${e}/complete`,{body:r,...n})}}Jm.Parts=rk;const x3=async t=>{const e=await Promise.allSettled(t),r=e.filter(s=>s.status==="rejected");if(r.length){for(const s of r)console.error(s.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const n=[];for(const s of e)s.status==="fulfilled"&&n.push(s.value);return n};class Ru extends W{create(e,r,n){return this._client.post(`/vector_stores/${e}/files`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/vector_stores/${e}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,r,n,s){return this._client.post(`/vector_stores/${e}/files/${r}`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,r={},n){return xe(r)?this.list(e,{},r):this._client.getAPIList(`/vector_stores/${e}/files`,$u,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,r,n){return this._client.delete(`/vector_stores/${e}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,r,n){const s=await this.create(e,r,n);return await this.poll(e,s.id,n)}async poll(e,r,n){const s={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const i=await this.retrieve(e,r,{...n,headers:s}).withResponse(),a=i.data;switch(a.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=i.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Co(o);break;case"failed":case"completed":return a}}}async upload(e,r,n){const s=await this._client.files.create({file:r,purpose:"assistants"},n);return this.create(e,{file_id:s.id},n)}async uploadAndPoll(e,r,n){const s=await this.upload(e,r,n);return await this.poll(e,s.id,n)}content(e,r,n){return this._client.getAPIList(`/vector_stores/${e}/files/${r}/content`,Qm,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class $u extends ze{}class Qm extends Iu{}Ru.VectorStoreFilesPage=$u;Ru.FileContentResponsesPage=Qm;class nk extends W{create(e,r,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/vector_stores/${e}/file_batches/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,r,n){return this._client.post(`/vector_stores/${e}/file_batches/${r}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,r,n){const s=await this.create(e,r);return await this.poll(e,s.id,n)}listFiles(e,r,n={},s){return xe(n)?this.listFiles(e,r,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${r}/files`,$u,{query:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(e,r,n){const s={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:i,response:a}=await this.retrieve(e,r,{...n,headers:s}).withResponse();switch(i.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Co(o);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:r,fileIds:n=[]},s){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(s==null?void 0:s.maxConcurrency)??5,a=Math.min(i,r.length),o=this._client,l=r.values(),c=[...n];async function d(h){for(let g of h){const y=await o.files.create({file:g,purpose:"assistants"},s);c.push(y.id)}}const f=Array(a).fill(l).map(d);return await x3(f),await this.createAndPoll(e,{file_ids:c})}}class Kn extends W{constructor(){super(...arguments),this.files=new Ru(this._client),this.fileBatches=new nk(this._client)}create(e,r){return this._client.post("/vector_stores",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,r){return this._client.get(`/vector_stores/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,r,n){return this._client.post(`/vector_stores/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},r){return xe(e)?this.list({},e):this._client.getAPIList("/vector_stores",Xm,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,r){return this._client.delete(`/vector_stores/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}search(e,r,n){return this._client.getAPIList(`/vector_stores/${e}/search`,Ym,{body:r,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Xm extends ze{}class Ym extends Iu{}Kn.VectorStoresPage=Xm;Kn.VectorStoreSearchResponsesPage=Ym;Kn.Files=Ru;Kn.VectorStoreFilesPage=$u;Kn.FileContentResponsesPage=Qm;Kn.FileBatches=nk;var sk;class H extends VU{constructor({baseURL:e=ol("OPENAI_BASE_URL"),apiKey:r=ol("OPENAI_API_KEY"),organization:n=ol("OPENAI_ORG_ID")??null,project:s=ol("OPENAI_PROJECT_ID")??null,...i}={}){if(r===void 0)throw new z("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:r,organization:n,project:s,...i,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&ZU())throw new z(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new qE(this),this.chat=new ju(this),this.embeddings=new KE(this),this.files=new $m(this),this.images=new XE(this),this.audio=new Io(this),this.moderations=new YE(this),this.models=new Hm(this),this.fineTuning=new qn(this),this.graders=new Wm(this),this.vectorStores=new Kn(this),this.beta=new qi(this),this.batches=new wm(this),this.uploads=new Jm(this),this.responses=new Gm(this),this.evals=new No(this),this._options=a,this.apiKey=r,this.organization=n,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return kU(e,{arrayFormat:"brackets"})}}sk=H;H.OpenAI=sk;H.DEFAULT_TIMEOUT=6e5;H.OpenAIError=z;H.APIError=Be;H.APIConnectionError=Eu;H.APIConnectionTimeoutError=vm;H.APIUserAbortError=Nt;H.NotFoundError=nE;H.ConflictError=sE;H.RateLimitError=aE;H.BadRequestError=eE;H.AuthenticationError=tE;H.InternalServerError=oE;H.PermissionDeniedError=rE;H.UnprocessableEntityError=iE;H.toFile=hE;H.fileFromPath=XS;H.Completions=qE;H.Chat=ju;H.ChatCompletionsPage=Au;H.Embeddings=KE;H.Files=$m;H.FileObjectsPage=Dm;H.Images=XE;H.Audio=Io;H.Moderations=YE;H.Models=Hm;H.ModelsPage=qm;H.FineTuning=qn;H.Graders=Wm;H.VectorStores=Kn;H.VectorStoresPage=Xm;H.VectorStoreSearchResponsesPage=Ym;H.Beta=qi;H.Batches=wm;H.BatchesPage=_m;H.Uploads=Jm;H.Responses=Gm;H.Evals=No;H.EvalListResponsesPage=Rm;var S3={};const E3={openai:{apiKey:S3.OPENAI_API_KEY||"OPENAI_API_KEY_PLACEHOLDER"}},Bt=new H({apiKey:E3.openai.apiKey});class rn{static async getUserAssistant(e){try{const{data:r,error:n}=await se.from("user_assistants").select("assistant_id").eq("user_id",e).single();return n?(console.error("Error getting user assistant:",n),{assistantId:null,error:n}):{assistantId:r.assistant_id,error:null}}catch(r){return console.error("Error getting user assistant:",r),{assistantId:null,error:r}}}static async getUserThreads(e){try{const{data:r,error:n}=await se.from("assistant_threads").select("*").eq("user_id",e).order("last_message_at",{ascending:!1});if(n)throw n;return{threads:r,error:null}}catch(r){return console.error("Error getting user threads:",r),{threads:[],error:r}}}static async createThread(e,r="New Conversation"){try{const n=await Bt.beta.threads.create(),{data:s,error:i}=await se.from("assistant_threads").insert([{user_id:e,thread_id:n.id,title:r}]).select();if(i)throw i;return{thread:s[0],error:null}}catch(n){return console.error("Error creating thread:",n),{thread:null,error:n}}}static async getUserFiles(e){try{const{data:r,error:n}=await se.from("assistant_files").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw n;return{files:r,error:null}}catch(r){return console.error("Error getting user files:",r),{files:[],error:r}}}static async uploadFile(e,r,n){try{const s=new Blob([e],{type:e.type}),i=await Bt.files.create({file:s,purpose:"assistants"});await Bt.beta.assistants.files.create(n,{file_id:i.id});const{data:a,error:o}=await se.from("assistant_files").insert([{user_id:r,assistant_id:n,file_id:i.id,filename:e.name,file_size:e.size,file_type:e.type}]).select();if(o)throw o;return{file:a[0],error:null}}catch(s){return console.error("Error uploading file:",s),{file:null,error:s}}}static async sendMessage(e,r,n){try{const{assistantId:s,error:i}=await this.getUserAssistant(n);if(i)throw i;await Bt.beta.threads.messages.create(e,{role:"user",content:r});const a=await Bt.beta.threads.runs.create(e,{assistant_id:s});let o=await Bt.beta.threads.runs.retrieve(e,a.id);for(;o.status!=="completed"&&o.status!=="failed";)await new Promise(f=>setTimeout(f,1e3)),o=await Bt.beta.threads.runs.retrieve(e,a.id);if(o.status==="failed")throw new Error("Assistant run failed");const c=(await Bt.beta.threads.messages.list(e)).data.find(f=>f.role==="assistant"&&f.run_id===a.id),{error:d}=await se.from("assistant_threads").update({last_message_at:new Date().toISOString()}).eq("thread_id",e).eq("user_id",n);if(d)throw d;return{response:c.content[0].text.value,error:null}}catch(s){return console.error("Error sending message:",s),{response:null,error:s}}}static async deleteThread(e,r){try{await Bt.beta.threads.del(e);const{error:n}=await se.from("assistant_threads").delete().eq("thread_id",e).eq("user_id",r);if(n)throw n;return{success:!0,error:null}}catch(n){return console.error("Error deleting thread:",n),{success:!1,error:n}}}static async deleteFile(e,r){try{const{assistantId:n,error:s}=await this.getUserAssistant(r);if(s)throw s;await Bt.beta.assistants.files.del(n,e),await Bt.files.del(e);const{error:i}=await se.from("assistant_files").delete().eq("file_id",e).eq("user_id",r);if(i)throw i;return{success:!0,error:null}}catch(n){return console.error("Error deleting file:",n),{success:!1,error:n}}}}var ik={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Nw=fr.createContext&&fr.createContext(ik),k3=["attr","size","title"];function T3(t,e){if(t==null)return{};var r=C3(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function C3(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Cc(){return Cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cc.apply(this,arguments)}function Ow(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ic(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ow(Object(r),!0).forEach(function(n){I3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ow(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I3(t,e,r){return e=P3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P3(t){var e=A3(t,"string");return typeof e=="symbol"?e:e+""}function A3(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ak(t){return t&&t.map((e,r)=>fr.createElement(e.tag,Ic({key:r},e.attr),ak(e.child)))}function Oo(t){return e=>fr.createElement(j3,Cc({attr:Ic({},t.attr)},e),ak(t.child))}function j3(t){var e=r=>{var{attr:n,size:s,title:i}=t,a=T3(t,k3),o=s||r.size||"1em",l;return r.className&&(l=r.className),t.className&&(l=(l?l+" ":"")+t.className),fr.createElement("svg",Cc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:l,style:Ic(Ic({color:t.color||r.color},r.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&fr.createElement("title",null,i),t.children)};return Nw!==void 0?fr.createElement(Nw.Consumer,null,r=>e(r)):e(ik)}function N3(t){return Oo({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function O3(t){return Oo({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"},child:[]}]})(t)}function R3(t){return Oo({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function $3(t){return Oo({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function Rw(t){return Oo({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}const D3=()=>{const{currentUser:t}=Lt(),[e,r]=b.useState([]),[n,s]=b.useState(null),[i,a]=b.useState([]),[o,l]=b.useState(""),[c,d]=b.useState(!1),[f,h]=b.useState(null),[g,y]=b.useState(null),[w,_]=b.useState(!1),[m,p]=b.useState([]),[v,S]=b.useState(!1),T=b.useRef(null),E=b.useRef(null);b.useEffect(()=>{t&&(I(),j(),N())},[t]),b.useEffect(()=>{x()},[i]);const x=()=>{var L;(L=T.current)==null||L.scrollIntoView({behavior:"smooth"})},I=async()=>{d(!0);try{const{assistantId:L,error:P}=await rn.getUserAssistant(t.uid);if(P)throw y("Could not find an AI Assistant associated with your account. Please contact support."),P;h(L),y(null)}catch(L){console.error("Error initializing assistant:",L),y("Could not find an AI Assistant associated with your account. Please contact support.")}finally{d(!1)}},j=async()=>{try{const{threads:L,error:P}=await rn.getUserThreads(t.uid);if(P)throw P;r(L),L.length>0?(s(L[0]),a([{role:"assistant",content:"Hello! How can I help you today?"}])):C()}catch(L){console.error("Error loading threads:",L)}},N=async()=>{try{const{files:L,error:P}=await rn.getUserFiles(t.uid);if(P)throw P;p(L)}catch(L){console.error("Error loading files:",L)}},C=async()=>{if(!f){y("No AI Assistant found for your account. Please contact support.");return}d(!0);try{const{thread:L,error:P}=await rn.createThread(t.uid);if(P)throw P;r($=>[L,...$]),s(L),a([{role:"assistant",content:"Hello! How can I help you today?"}])}catch(L){console.error("Error creating thread:",L)}finally{d(!1)}},D=async L=>{if(L.preventDefault(),!o.trim()||!n||!f)return;const P={role:"user",content:o};a($=>[...$,P]),l(""),d(!0);try{const{response:$,error:F}=await rn.sendMessage(n.thread_id,o,t.uid);if(F)throw F;a(G=>[...G,{role:"assistant",content:$}])}catch($){console.error("Error sending message:",$),a(F=>[...F,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{d(!1)}},K=async L=>{const P=L.target.files[0];if(!(!P||!f)){S(!0);try{const{file:$,error:F}=await rn.uploadFile(P,t.uid,f);if(F)throw F;p(G=>[$,...G]),a(G=>[...G,{role:"assistant",content:`File "${P.name}" has been uploaded and is now available to the assistant.`}])}catch($){console.error("Error uploading file:",$),a(F=>[...F,{role:"assistant",content:`Sorry, I couldn't upload the file "${P.name}". Please try again.`}])}finally{S(!1)}}},pe=async L=>{if(window.confirm("Are you sure you want to delete this conversation?"))try{const{success:P,error:$}=await rn.deleteThread(L,t.uid);if($)throw $;if(r(F=>F.filter(G=>G.thread_id!==L)),(n==null?void 0:n.thread_id)===L)if(e.length>1){const F=e.find(G=>G.thread_id!==L);s(F),a([{role:"assistant",content:"Hello! How can I help you today?"}])}else C()}catch(P){console.error("Error deleting thread:",P)}},xr=async L=>{if(window.confirm("Are you sure you want to delete this file?"))try{const{success:P,error:$}=await rn.deleteFile(L,t.uid);if($)throw $;p(F=>F.filter(G=>G.file_id!==L))}catch(P){console.error("Error deleting file:",P)}},Gn=L=>{s(L),a([{role:"assistant",content:"Hello! How can I help you today?"}]),_(!1)};return g?u.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-white p-6",children:u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md text-center",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-700",children:"AI Assistant Not Available"}),u.jsx("p",{className:"mb-4 text-gray-700",children:g}),u.jsx("button",{onClick:I,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Try Again"})]})}):u.jsxs("div",{className:"flex flex-col h-screen bg-white",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"AI Assistant"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:()=>_(!w),className:"p-2 rounded-full hover:bg-gray-100",title:"Show conversations",children:u.jsx(N3,{})}),u.jsx("button",{onClick:C,className:"p-2 rounded-full hover:bg-gray-100",title:"New conversation",disabled:!f,children:u.jsx(R3,{})}),u.jsxs("button",{onClick:()=>{var L;return(L=E.current)==null?void 0:L.click()},className:"p-2 rounded-full hover:bg-gray-100",title:"Upload file",disabled:v||!f,children:[u.jsx(O3,{}),u.jsx("input",{type:"file",ref:E,onChange:K,className:"hidden"})]})]})]}),u.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[w&&u.jsx("div",{className:"w-64 border-r overflow-y-auto",children:u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"font-medium mb-2",children:"Conversations"}),u.jsx("ul",{children:e.map(L=>u.jsxs("li",{className:`flex justify-between items-center p-2 rounded cursor-pointer ${(n==null?void 0:n.thread_id)===L.thread_id?"bg-blue-100":"hover:bg-gray-100"}`,children:[u.jsx("span",{className:"truncate flex-1",onClick:()=>Gn(L),children:L.title||"New Conversation"}),u.jsx("button",{onClick:()=>pe(L.thread_id),className:"text-gray-500 hover:text-red-500",children:u.jsx(Rw,{size:16})})]},L.thread_id))}),u.jsx("h3",{className:"font-medium mt-6 mb-2",children:"Files"}),u.jsx("ul",{children:m.map(L=>u.jsxs("li",{className:"flex justify-between items-center p-2 rounded hover:bg-gray-100",children:[u.jsx("span",{className:"truncate flex-1",title:L.filename,children:L.filename}),u.jsx("button",{onClick:()=>xr(L.file_id),className:"text-gray-500 hover:text-red-500",children:u.jsx(Rw,{size:16})})]},L.file_id))})]})}),u.jsxs("div",{className:"flex-1 flex flex-col",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[i.map((L,P)=>u.jsx("div",{className:`mb-4 flex ${L.role==="user"?"justify-end":"justify-start"}`,children:u.jsx("div",{className:`max-w-3/4 p-3 rounded-lg ${L.role==="user"?"bg-blue-500 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:L.content})},P)),c&&u.jsx("div",{className:"flex justify-start mb-4",children:u.jsx("div",{className:"bg-gray-100 p-3 rounded-lg rounded-bl-none text-gray-800",children:u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce"}),u.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0.2s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0.4s"}})]})})}),u.jsx("div",{ref:T})]}),u.jsx("div",{className:"border-t p-4",children:u.jsxs("form",{onSubmit:D,className:"flex",children:[u.jsx("input",{type:"text",value:o,onChange:L=>l(L.target.value),placeholder:"Type your message...",className:"flex-1 border rounded-l-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:c||!n||!f}),u.jsx("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded-r-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:c||!o.trim()||!n||!f,children:u.jsx($3,{})})]})})]})]})]})},nn=({children:t})=>{const{currentUser:e}=Lt();return e?t:u.jsx(nb,{to:"/login",replace:!0})};function L3(){return u.jsxs(LI,{children:[u.jsx(ht,{path:"/",element:u.jsx(nb,{to:"/login",replace:!0})}),u.jsx(ht,{path:"/login",element:u.jsx(Ut,{children:u.jsx(ZM,{})})}),u.jsx(ht,{path:"/register",element:u.jsx(Ut,{children:u.jsx(eU,{})})}),u.jsx(ht,{path:"/submissions",element:u.jsx(nn,{children:u.jsx(Ut,{children:u.jsx(lU,{})})})}),u.jsx(ht,{path:"/dashboard",element:u.jsx(nn,{children:u.jsx(Ut,{children:u.jsx(tU,{})})})}),u.jsx(ht,{path:"/upload",element:u.jsx(nn,{children:u.jsx(Ut,{children:u.jsx(mU,{})})})}),u.jsx(ht,{path:"/agent",element:u.jsx(nn,{children:u.jsx(Ut,{children:u.jsx(D3,{})})})}),u.jsx(ht,{path:"/workflow/:id",element:u.jsx(nn,{children:u.jsx(Ut,{children:u.jsx(nU,{})})})}),u.jsx(ht,{path:"/profile",element:u.jsx(nn,{children:u.jsx(Ut,{children:u.jsx(sU,{})})})}),u.jsx(ht,{path:"/email-submission",element:u.jsx(nn,{children:u.jsx(Ut,{children:u.jsx(aU,{})})})}),u.jsx(ht,{path:"/schedule-call",element:u.jsx(nn,{children:u.jsx(Ut,{children:u.jsx(oU,{})})})}),u.jsx(ht,{path:"*",element:u.jsx(Ut,{children:u.jsx(iU,{})})})]})}function F3(){return u.jsx(T2,{children:u.jsx(WI,{children:u.jsx(L3,{})})})}Kd.createRoot(document.getElementById("root")).render(u.jsx(fr.StrictMode,{children:u.jsx(F3,{})}));export{Pc as g};
